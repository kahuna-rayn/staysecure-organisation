{"version":3,"file":"index.umd.js","sources":["../node_modules/lucide-react/dist/esm/shared/src/utils.js","../node_modules/lucide-react/dist/esm/defaultAttributes.js","../node_modules/lucide-react/dist/esm/Icon.js","../node_modules/lucide-react/dist/esm/createLucideIcon.js","../node_modules/lucide-react/dist/esm/icons/arrow-left.js","../node_modules/lucide-react/dist/esm/icons/award.js","../node_modules/lucide-react/dist/esm/icons/book-open.js","../node_modules/lucide-react/dist/esm/icons/building-2.js","../node_modules/lucide-react/dist/esm/icons/building.js","../node_modules/lucide-react/dist/esm/icons/calendar.js","../node_modules/lucide-react/dist/esm/icons/check.js","../node_modules/lucide-react/dist/esm/icons/chevrons-up-down.js","../node_modules/lucide-react/dist/esm/icons/clock.js","../node_modules/lucide-react/dist/esm/icons/eye.js","../node_modules/lucide-react/dist/esm/icons/file-text.js","../node_modules/lucide-react/dist/esm/icons/graduation-cap.js","../node_modules/lucide-react/dist/esm/icons/hash.js","../node_modules/lucide-react/dist/esm/icons/id-card.js","../node_modules/lucide-react/dist/esm/icons/key.js","../node_modules/lucide-react/dist/esm/icons/laptop.js","../node_modules/lucide-react/dist/esm/icons/layout-grid.js","../node_modules/lucide-react/dist/esm/icons/list.js","../node_modules/lucide-react/dist/esm/icons/loader-circle.js","../node_modules/lucide-react/dist/esm/icons/mail.js","../node_modules/lucide-react/dist/esm/icons/map-pin.js","../node_modules/lucide-react/dist/esm/icons/monitor-smartphone.js","../node_modules/lucide-react/dist/esm/icons/network.js","../node_modules/lucide-react/dist/esm/icons/phone.js","../node_modules/lucide-react/dist/esm/icons/play.js","../node_modules/lucide-react/dist/esm/icons/plus.js","../node_modules/lucide-react/dist/esm/icons/save.js","../node_modules/lucide-react/dist/esm/icons/settings.js","../node_modules/lucide-react/dist/esm/icons/shield.js","../node_modules/lucide-react/dist/esm/icons/square-pen.js","../node_modules/lucide-react/dist/esm/icons/star.js","../node_modules/lucide-react/dist/esm/icons/trash-2.js","../node_modules/lucide-react/dist/esm/icons/upload.js","../node_modules/lucide-react/dist/esm/icons/user-check.js","../node_modules/lucide-react/dist/esm/icons/user.js","../node_modules/lucide-react/dist/esm/icons/users.js","../node_modules/lucide-react/dist/esm/icons/x.js","../src/context/OrganisationContext.tsx","../src/utils/userManagementActions.ts","../src/components/admin/UserCard.tsx","../src/components/admin/UserList.tsx","../src/components/admin/UserTable.tsx","../src/components/admin/CreateUserDialog.tsx","../src/components/admin/EditUserDialog.tsx","../src/components/admin/ImportUsersDialog.tsx","../src/components/admin/UserManagement.tsx","../src/components/knowledge/RoleManagement.tsx","../src/components/knowledge/DepartmentManagement.tsx","../src/components/knowledge/LocationManagement.tsx","../src/components/admin/AddOrganisationCertificateDialog.tsx","../src/components/OrganisationCertificates.tsx","../node_modules/sonner/dist/index.mjs","../src/components/SearchableProfileField.tsx","../src/components/OrganisationProfile.tsx","../src/components/OrganisationPanel.tsx","../src/components/OrganisationWrapper.tsx","../src/components/PersonaDetailsTabs.tsx","../src/components/EditableProfileHeader.tsx","../src/components/PersonaProfile.tsx","../src/components/UserDetailView.tsx","../src/components/profile/EditableField.tsx","../src/components/profile/UserRoleField.tsx","../src/components/profile/ProfileBasicInfo.tsx","../src/components/profile/ProfileAvatar.tsx","../src/components/profile/ProfileContactInfo.tsx","../src/components/profile/MultipleRolesField.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\n\nexport { mergeClasses, toKebabCase };\n//# sourceMappingURL=utils.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\nimport { mergeClasses } from './shared/src/utils.js';\n\nconst Icon = forwardRef(\n  ({\n    color = \"currentColor\",\n    size = 24,\n    strokeWidth = 2,\n    absoluteStrokeWidth,\n    className = \"\",\n    children,\n    iconNode,\n    ...rest\n  }, ref) => {\n    return createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: mergeClasses(\"lucide\", className),\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...Array.isArray(children) ? children : [children]\n      ]\n    );\n  }\n);\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport { mergeClasses, toKebabCase } from './shared/src/utils.js';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ className, ...props }, ref) => createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(`lucide-${toKebabCase(iconName)}`, className),\n      ...props\n    })\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowLeft = createLucideIcon(\"ArrowLeft\", [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n]);\n\nexport { ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Award = createLucideIcon(\"Award\", [\n  [\n    \"path\",\n    {\n      d: \"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526\",\n      key: \"1yiouv\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"8\", r: \"6\", key: \"1vp47v\" }]\n]);\n\nexport { Award as default };\n//# sourceMappingURL=award.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BookOpen = createLucideIcon(\"BookOpen\", [\n  [\"path\", { d: \"M12 7v14\", key: \"1akyts\" }],\n  [\n    \"path\",\n    {\n      d: \"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z\",\n      key: \"ruj8y\"\n    }\n  ]\n]);\n\nexport { BookOpen as default };\n//# sourceMappingURL=book-open.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Building2 = createLucideIcon(\"Building2\", [\n  [\"path\", { d: \"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z\", key: \"1b4qmf\" }],\n  [\"path\", { d: \"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2\", key: \"i71pzd\" }],\n  [\"path\", { d: \"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2\", key: \"10jefs\" }],\n  [\"path\", { d: \"M10 6h4\", key: \"1itunk\" }],\n  [\"path\", { d: \"M10 10h4\", key: \"tcdvrf\" }],\n  [\"path\", { d: \"M10 14h4\", key: \"kelpxr\" }],\n  [\"path\", { d: \"M10 18h4\", key: \"1ulq68\" }]\n]);\n\nexport { Building2 as default };\n//# sourceMappingURL=building-2.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Building = createLucideIcon(\"Building\", [\n  [\"rect\", { width: \"16\", height: \"20\", x: \"4\", y: \"2\", rx: \"2\", ry: \"2\", key: \"76otgf\" }],\n  [\"path\", { d: \"M9 22v-4h6v4\", key: \"r93iot\" }],\n  [\"path\", { d: \"M8 6h.01\", key: \"1dz90k\" }],\n  [\"path\", { d: \"M16 6h.01\", key: \"1x0f13\" }],\n  [\"path\", { d: \"M12 6h.01\", key: \"1vi96p\" }],\n  [\"path\", { d: \"M12 10h.01\", key: \"1nrarc\" }],\n  [\"path\", { d: \"M12 14h.01\", key: \"1etili\" }],\n  [\"path\", { d: \"M16 10h.01\", key: \"1m94wz\" }],\n  [\"path\", { d: \"M16 14h.01\", key: \"1gbofw\" }],\n  [\"path\", { d: \"M8 10h.01\", key: \"19clt8\" }],\n  [\"path\", { d: \"M8 14h.01\", key: \"6423bh\" }]\n]);\n\nexport { Building as default };\n//# sourceMappingURL=building.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Calendar = createLucideIcon(\"Calendar\", [\n  [\"path\", { d: \"M8 2v4\", key: \"1cmpym\" }],\n  [\"path\", { d: \"M16 2v4\", key: \"4m81vk\" }],\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"4\", rx: \"2\", key: \"1hopcy\" }],\n  [\"path\", { d: \"M3 10h18\", key: \"8toen8\" }]\n]);\n\nexport { Calendar as default };\n//# sourceMappingURL=calendar.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"Check\", [[\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronsUpDown = createLucideIcon(\"ChevronsUpDown\", [\n  [\"path\", { d: \"m7 15 5 5 5-5\", key: \"1hf1tw\" }],\n  [\"path\", { d: \"m7 9 5-5 5 5\", key: \"sgt6xg\" }]\n]);\n\nexport { ChevronsUpDown as default };\n//# sourceMappingURL=chevrons-up-down.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Clock = createLucideIcon(\"Clock\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16 14\", key: \"68esgv\" }]\n]);\n\nexport { Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Eye = createLucideIcon(\"Eye\", [\n  [\n    \"path\",\n    {\n      d: \"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0\",\n      key: \"1nclc0\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Eye as default };\n//# sourceMappingURL=eye.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileText = createLucideIcon(\"FileText\", [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\"path\", { d: \"M10 9H8\", key: \"b1mrlr\" }],\n  [\"path\", { d: \"M16 13H8\", key: \"t4e002\" }],\n  [\"path\", { d: \"M16 17H8\", key: \"z1uh3a\" }]\n]);\n\nexport { FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst GraduationCap = createLucideIcon(\"GraduationCap\", [\n  [\n    \"path\",\n    {\n      d: \"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z\",\n      key: \"j76jl0\"\n    }\n  ],\n  [\"path\", { d: \"M22 10v6\", key: \"1lu8f3\" }],\n  [\"path\", { d: \"M6 12.5V16a6 3 0 0 0 12 0v-3.5\", key: \"1r8lef\" }]\n]);\n\nexport { GraduationCap as default };\n//# sourceMappingURL=graduation-cap.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Hash = createLucideIcon(\"Hash\", [\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"9\", y2: \"9\", key: \"4lhtct\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"15\", y2: \"15\", key: \"vyu0kd\" }],\n  [\"line\", { x1: \"10\", x2: \"8\", y1: \"3\", y2: \"21\", key: \"1ggp8o\" }],\n  [\"line\", { x1: \"16\", x2: \"14\", y1: \"3\", y2: \"21\", key: \"weycgp\" }]\n]);\n\nexport { Hash as default };\n//# sourceMappingURL=hash.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst IdCard = createLucideIcon(\"IdCard\", [\n  [\"path\", { d: \"M16 10h2\", key: \"8sgtl7\" }],\n  [\"path\", { d: \"M16 14h2\", key: \"epxaof\" }],\n  [\"path\", { d: \"M6.17 15a3 3 0 0 1 5.66 0\", key: \"n6f512\" }],\n  [\"circle\", { cx: \"9\", cy: \"11\", r: \"2\", key: \"yxgjnd\" }],\n  [\"rect\", { x: \"2\", y: \"5\", width: \"20\", height: \"14\", rx: \"2\", key: \"qneu4z\" }]\n]);\n\nexport { IdCard as default };\n//# sourceMappingURL=id-card.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Key = createLucideIcon(\"Key\", [\n  [\"path\", { d: \"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4\", key: \"g0fldk\" }],\n  [\"path\", { d: \"m21 2-9.6 9.6\", key: \"1j0ho8\" }],\n  [\"circle\", { cx: \"7.5\", cy: \"15.5\", r: \"5.5\", key: \"yqb3hr\" }]\n]);\n\nexport { Key as default };\n//# sourceMappingURL=key.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Laptop = createLucideIcon(\"Laptop\", [\n  [\n    \"path\",\n    {\n      d: \"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16\",\n      key: \"tarvll\"\n    }\n  ]\n]);\n\nexport { Laptop as default };\n//# sourceMappingURL=laptop.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LayoutGrid = createLucideIcon(\"LayoutGrid\", [\n  [\"rect\", { width: \"7\", height: \"7\", x: \"3\", y: \"3\", rx: \"1\", key: \"1g98yp\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"14\", y: \"3\", rx: \"1\", key: \"6d4xhi\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"14\", y: \"14\", rx: \"1\", key: \"nxv5o0\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"3\", y: \"14\", rx: \"1\", key: \"1bb6yr\" }]\n]);\n\nexport { LayoutGrid as default };\n//# sourceMappingURL=layout-grid.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst List = createLucideIcon(\"List\", [\n  [\"path\", { d: \"M3 12h.01\", key: \"nlz23k\" }],\n  [\"path\", { d: \"M3 18h.01\", key: \"1tta3j\" }],\n  [\"path\", { d: \"M3 6h.01\", key: \"1rqtza\" }],\n  [\"path\", { d: \"M8 12h13\", key: \"1za7za\" }],\n  [\"path\", { d: \"M8 18h13\", key: \"1lx6n3\" }],\n  [\"path\", { d: \"M8 6h13\", key: \"ik3vkj\" }]\n]);\n\nexport { List as default };\n//# sourceMappingURL=list.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LoaderCircle = createLucideIcon(\"LoaderCircle\", [\n  [\"path\", { d: \"M21 12a9 9 0 1 1-6.219-8.56\", key: \"13zald\" }]\n]);\n\nexport { LoaderCircle as default };\n//# sourceMappingURL=loader-circle.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Mail = createLucideIcon(\"Mail\", [\n  [\"rect\", { width: \"20\", height: \"16\", x: \"2\", y: \"4\", rx: \"2\", key: \"18n3k1\" }],\n  [\"path\", { d: \"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\", key: \"1ocrg3\" }]\n]);\n\nexport { Mail as default };\n//# sourceMappingURL=mail.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MapPin = createLucideIcon(\"MapPin\", [\n  [\n    \"path\",\n    {\n      d: \"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0\",\n      key: \"1r0f0z\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"10\", r: \"3\", key: \"ilqhr7\" }]\n]);\n\nexport { MapPin as default };\n//# sourceMappingURL=map-pin.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MonitorSmartphone = createLucideIcon(\"MonitorSmartphone\", [\n  [\"path\", { d: \"M18 8V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h8\", key: \"10dyio\" }],\n  [\"path\", { d: \"M10 19v-3.96 3.15\", key: \"1irgej\" }],\n  [\"path\", { d: \"M7 19h5\", key: \"qswx4l\" }],\n  [\"rect\", { width: \"6\", height: \"10\", x: \"16\", y: \"12\", rx: \"2\", key: \"1egngj\" }]\n]);\n\nexport { MonitorSmartphone as default };\n//# sourceMappingURL=monitor-smartphone.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Network = createLucideIcon(\"Network\", [\n  [\"rect\", { x: \"16\", y: \"16\", width: \"6\", height: \"6\", rx: \"1\", key: \"4q2zg0\" }],\n  [\"rect\", { x: \"2\", y: \"16\", width: \"6\", height: \"6\", rx: \"1\", key: \"8cvhb9\" }],\n  [\"rect\", { x: \"9\", y: \"2\", width: \"6\", height: \"6\", rx: \"1\", key: \"1egb70\" }],\n  [\"path\", { d: \"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3\", key: \"1jsf9p\" }],\n  [\"path\", { d: \"M12 12V8\", key: \"2874zd\" }]\n]);\n\nexport { Network as default };\n//# sourceMappingURL=network.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Phone = createLucideIcon(\"Phone\", [\n  [\n    \"path\",\n    {\n      d: \"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\",\n      key: \"foiqr5\"\n    }\n  ]\n]);\n\nexport { Phone as default };\n//# sourceMappingURL=phone.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Play = createLucideIcon(\"Play\", [\n  [\"polygon\", { points: \"6 3 20 12 6 21 6 3\", key: \"1oa8hb\" }]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Plus = createLucideIcon(\"Plus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n]);\n\nexport { Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Save = createLucideIcon(\"Save\", [\n  [\n    \"path\",\n    {\n      d: \"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z\",\n      key: \"1c8476\"\n    }\n  ],\n  [\"path\", { d: \"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7\", key: \"1ydtos\" }],\n  [\"path\", { d: \"M7 3v4a1 1 0 0 0 1 1h7\", key: \"t51u73\" }]\n]);\n\nexport { Save as default };\n//# sourceMappingURL=save.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings = createLucideIcon(\"Settings\", [\n  [\n    \"path\",\n    {\n      d: \"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z\",\n      key: \"1qme2f\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shield = createLucideIcon(\"Shield\", [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ]\n]);\n\nexport { Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst SquarePen = createLucideIcon(\"SquarePen\", [\n  [\"path\", { d: \"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\", key: \"1m0v6g\" }],\n  [\n    \"path\",\n    {\n      d: \"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z\",\n      key: \"ohrbg2\"\n    }\n  ]\n]);\n\nexport { SquarePen as default };\n//# sourceMappingURL=square-pen.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Star = createLucideIcon(\"Star\", [\n  [\n    \"path\",\n    {\n      d: \"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z\",\n      key: \"r04s7s\"\n    }\n  ]\n]);\n\nexport { Star as default };\n//# sourceMappingURL=star.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trash2 = createLucideIcon(\"Trash2\", [\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\", key: \"4alrt4\" }],\n  [\"path\", { d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\", key: \"v07s0e\" }],\n  [\"line\", { x1: \"10\", x2: \"10\", y1: \"11\", y2: \"17\", key: \"1uufr5\" }],\n  [\"line\", { x1: \"14\", x2: \"14\", y1: \"11\", y2: \"17\", key: \"xtxkd\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"Upload\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"17 8 12 3 7 8\", key: \"t8dd8p\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"3\", y2: \"15\", key: \"widbto\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst UserCheck = createLucideIcon(\"UserCheck\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"polyline\", { points: \"16 11 18 13 22 9\", key: \"1pwet4\" }]\n]);\n\nexport { UserCheck as default };\n//# sourceMappingURL=user-check.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst User = createLucideIcon(\"User\", [\n  [\"path\", { d: \"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\", key: \"975kel\" }],\n  [\"circle\", { cx: \"12\", cy: \"7\", r: \"4\", key: \"17ys0d\" }]\n]);\n\nexport { User as default };\n//# sourceMappingURL=user.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Users = createLucideIcon(\"Users\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"path\", { d: \"M16 3.13a4 4 0 0 1 0 7.75\", key: \"1da9ce\" }]\n]);\n\nexport { Users as default };\n//# sourceMappingURL=users.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","import React, { createContext, useContext, ReactNode } from 'react';\nimport type { OrganisationConfig } from '../types';\n\ninterface OrganisationContextValue extends OrganisationConfig {\n  isTabEnabled: (tab: string) => boolean;\n  hasPermission: (permission: keyof NonNullable<OrganisationConfig['permissions']>) => boolean;\n}\n\nconst OrganisationContext = createContext<OrganisationContextValue | null>(null);\n\ninterface OrganisationProviderProps {\n  config: OrganisationConfig;\n  children: ReactNode;\n}\n\nconst defaultPermissions = {\n  canCreateUsers: true,\n  canEditUsers: true,\n  canDeleteUsers: true,\n  canManageRoles: true,\n  canManageDepartments: true,\n  canManageLocations: true,\n  canManageCertificates: true,\n  canManageProfile: true,\n};\n\nconst defaultEnabledTabs = ['users', 'roles', 'departments', 'locations', 'certificates', 'profile'];\n\nexport const OrganisationProvider: React.FC<OrganisationProviderProps> = ({ config, children }) => {\n  const isTabEnabled = (tab: string): boolean => {\n    const enabledTabs = config.enabledTabs || defaultEnabledTabs;\n    return enabledTabs.includes(tab);\n  };\n\n  const hasPermission = (permission: keyof NonNullable<OrganisationConfig['permissions']>): boolean => {\n    const permissions = { ...defaultPermissions, ...config.permissions };\n    return permissions[permission] ?? true;\n  };\n\n  const contextValue: OrganisationContextValue = {\n    ...config,\n    isTabEnabled,\n    hasPermission,\n  };\n\n  return (\n    <OrganisationContext.Provider value={contextValue}>\n      {children}\n    </OrganisationContext.Provider>\n  );\n};\n\nexport const useOrganisationContext = (): OrganisationContextValue => {\n  const context = useContext(OrganisationContext);\n  if (!context) {\n    throw new Error('useOrganisationContext must be used within OrganisationProvider');\n  }\n  return context;\n};","import { supabase } from '@/integrations/supabase/client';\nimport { toast } from '@/components/ui/use-toast';\nimport type { UserProfile } from '@/hooks/useUserProfiles';\n\n// Define NewUser type locally since it's not exported from useUserManagement\ninterface NewUser {\n  full_name: string;\n  first_name?: string;\n  last_name?: string;\n  username?: string;\n  email: string;\n  phone?: string;\n  location?: string;\n  location_id?: string;\n  status?: string;\n  access_level?: string;\n  bio?: string;\n  employee_id?: string;\n  role?: string;\n  department?: string;\n}\n\nexport const handleSaveUser = async (\n  editingUser: any, // Use any to work around type conflicts\n  updateProfile: (id: string, updates: Partial<UserProfile>) => Promise<void>,\n  onSuccess: () => void\n) => {\n  try {\n    await updateProfile(editingUser.id, editingUser);\n    toast({\n      title: \"Success\",\n      description: \"User updated successfully\",\n    });\n    onSuccess();\n  } catch (error: any) {\n    toast({\n      title: \"Error\",\n      description: error.message,\n      variant: \"destructive\",\n    });\n  }\n};\n\nexport const handleCreateUser = async (\n  newUser: NewUser,\n  updateProfile: (id: string, updates: Partial<UserProfile>) => Promise<void>,\n  onSuccess: () => void\n) => {\n  try {\n    // Create user via Supabase Edge Function\n    const supabaseUrl = import.meta.env.VITE_SUPABASE_URL || 'https://ufvingocbzegpgjknzhm.supabase.co'\n    const response = await fetch(`${supabaseUrl}/functions/v1/create-user`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${import.meta.env.VITE_SUPABASE_ANON_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVmdmluZ29jYnplZ3BnamtuemhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgzNjQ2MTUsImV4cCI6MjA2Mzk0MDYxNX0.lEUYYYZnZcWtJLdcDk4qUm2M_zL5Xv58N0FheSHgGp0'}`\n      },\n      body: JSON.stringify(newUser)\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.error || 'Failed to create user');\n    }\n\n    const { user } = await response.json();\n\n    // Update profile with additional data\n    if (user?.id) {\n      await updateProfile(user.id, {\n        full_name: newUser.full_name,\n        first_name: newUser.first_name,\n        last_name: newUser.last_name,\n        username: newUser.username,\n        phone: newUser.phone,\n        location: newUser.location,\n        location_id: newUser.location_id,\n        status: newUser.status,\n        bio: newUser.bio,\n        employee_id: newUser.employee_id,\n      });\n\n            // Assign physical location access if location is selected\n      if (newUser.location_id) {\n        try {\n          const locationData = {\n            user_id: user.id,\n            location_id: newUser.location_id,\n            full_name: newUser.full_name,\n            access_purpose: 'General Access',\n            status: 'Active',\n            date_access_created: new Date().toISOString()\n          };\n\n          const { data: locationDataResult, error: locationError } = await supabase\n            .from('physical_location_access')\n            .insert(locationData)\n            .select();\n\n          if (locationError) {\n            console.error('❌ Error assigning physical location access:', locationError);\n          }\n        } catch (locationError) {\n          console.error('❌ Exception assigning physical location access:', locationError);\n        }\n      }\n    }\n\n    toast({\n      title: \"Success\",\n      description: \"User created successfully\",\n    });\n    \n    onSuccess();\n  } catch (error: any) {\n    console.error('Error creating user:', error);\n    toast({\n      title: \"Error\",\n      description: error.message || \"Failed to create user\",\n      variant: \"destructive\",\n    });\n  }\n};\n\nexport const handleDeleteUser = async (userId: string, userName: string, reason?: string): Promise<{ success: boolean; deletedUser?: any; error?: string }> => {\n  try {\n    // Call the delete-user Edge Function\n    const { data, error } = await supabase.functions.invoke('delete-user', {\n      body: {\n        userId,\n        reason: reason || undefined\n      }\n    });\n\n    if (error) {\n      console.error('Error calling delete function:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete user\",\n        variant: \"destructive\",\n      });\n      return { success: false, error: \"Failed to delete user\" };\n    }\n\n    if (!data.success) {\n      console.error('Delete function returned error:', data.error);\n      toast({\n        title: \"Error\",\n        description: data.error || \"Failed to delete user\",\n        variant: \"destructive\",\n      });\n      return { success: false, error: data.error || \"Failed to delete user\" };\n    }\n\n    return { success: true, deletedUser: data.deletedUser };\n  } catch (error: any) {\n    console.error('Error deleting user:', error);\n    toast({\n      title: \"Error\",\n      description: \"Failed to delete user\",\n      variant: \"destructive\",\n    });\n    return { success: false, error: \"Failed to delete user\" };\n  }\n};","\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useQuery } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { Edit, Trash2, Phone, MapPin, IdCard, Mail, Eye, Settings } from 'lucide-react';\nimport EditableField from '@/modules/organisation/components/profile/EditableField';\nimport { toast } from '@/components/ui/use-toast';\nimport { DepartmentRolePairsDisplay } from '@/components/admin/DepartmentRolePairsDisplay';\nimport type { UserProfile } from '@/hooks/useUserProfiles';\n\ninterface UserCardProps {\n  user: UserProfile;\n  onEdit: (user: UserProfile) => void;\n  onDelete: (userId: string) => void;\n}\n\nconst UserCard: React.FC<UserCardProps> = ({ user, onEdit, onDelete }) => {\n  const navigate = useNavigate();\n  const [editingField, setEditingField] = useState<string | null>(null);\n  const [saving, setSaving] = useState(false);\n\n  const initials = user.full_name \n    ? user.full_name.split(' ').map(n => n.charAt(0)).join('').slice(0, 2)\n    : user.username?.slice(0, 2) || 'U';\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'Active': return 'bg-green-500';\n      case 'Inactive': return 'bg-red-500';\n      case 'OnLeave': return 'bg-yellow-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  // Fetch physical location access for this user\n  const { data: locationAccess = [] } = useQuery({\n    queryKey: ['user-location-access', user.email],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('physical_location_access')\n        .select('access_purpose, status')\n        .eq('user_id', user.id)\n        .eq('status', 'Active');\n      \n      if (error) throw error;\n      return data;\n    },\n  });\n\n  const handleFieldSave = async (fieldKey: string, value: string) => {\n    setSaving(true);\n    try {\n      if (fieldKey === 'email') {\n        toast({\n          title: \"Email Update Limitation\",\n          description: \"Email addresses are managed by authentication and cannot be updated directly from this interface.\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      \n      const updatedUser = { ...user, [fieldKey]: value };\n      onEdit(updatedUser);\n      \n      toast({\n        title: \"Field updated\",\n        description: `${fieldKey} has been updated successfully.`,\n      });\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    } finally {\n      setSaving(false);\n      setEditingField(null);\n    }\n  };\n\n  const handleViewDetails = () => {\n    navigate(`/admin/users/${user.id}`);\n  };\n\n  return (\n    <Card className=\"cursor-pointer hover:shadow-md transition-shadow\" onClick={handleViewDetails}>\n      <CardContent className=\"p-4\">\n        <div className=\"flex items-start justify-between mb-3\">\n          <div className=\"flex items-center gap-3\">\n            <Avatar className=\"h-10 w-10\">\n              <AvatarImage src={user.avatar_url} />\n              <AvatarFallback>{initials}</AvatarFallback>\n            </Avatar>\n            <div>\n              <h3 className=\"font-medium\">{user.full_name || 'No name'}</h3>\n              <div className=\"text-sm text-muted-foreground\">\n                <DepartmentRolePairsDisplay userId={user.id} />\n              </div>\n            </div>\n          </div>\n          <Badge className={`${getStatusColor(user.status || 'Active')} text-white`}>\n            {user.status || 'Active'}\n          </Badge>\n        </div>\n\n        <div className=\"space-y-2 text-sm\">\n          <div className=\"flex items-center gap-2\">\n            <Mail className=\"h-3 w-3 text-muted-foreground\" />\n            <EditableField\n              value={user.email || 'No email'}\n              fieldKey=\"email\"\n              placeholder=\"Enter email\"\n              className=\"flex-1\"\n              inputClassName=\"text-sm\"\n              onSave={handleFieldSave}\n              isEditing={editingField === 'email'}\n              onEdit={setEditingField}\n              onCancel={() => setEditingField(null)}\n              saving={saving}\n            />\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <IdCard className=\"h-3 w-3 text-muted-foreground\" />\n            <span className=\"text-muted-foreground\">ID: {user.employee_id || 'Not set'}</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Phone className=\"h-3 w-3 text-muted-foreground\" />\n            <span className=\"text-muted-foreground\">{user.phone || 'No phone'}</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <MapPin className=\"h-3 w-3 text-muted-foreground\" />\n            <span className=\"text-muted-foreground\">{user.location || 'No location'}</span>\n          </div>\n          \n          {/* Physical Location Access Section */}\n          {locationAccess.length > 0 && (\n            <div className=\"mt-3 pt-3 border-t\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <MapPin className=\"h-3 w-3 text-muted-foreground\" />\n                <span className=\"text-xs font-medium text-muted-foreground\">Physical Access:</span>\n              </div>\n              <div className=\"flex flex-wrap gap-1\">\n                {locationAccess.slice(0, 3).map((access, index) => (\n                  <Badge key={index} variant=\"outline\" className=\"text-xs\">\n                    {access.access_purpose || 'Unknown Purpose'}\n                  </Badge>\n                ))}\n                {locationAccess.length > 3 && (\n                  <Badge variant=\"outline\" className=\"text-xs\">\n                    +{locationAccess.length - 3} more\n                  </Badge>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex gap-2 mt-4\" onClick={(e) => e.stopPropagation()}>\n          <Button size=\"sm\" variant=\"outline\" onClick={handleViewDetails}>\n            <Eye className=\"h-3 w-3\" />\n          </Button>\n          <Button size=\"sm\" variant=\"outline\" onClick={() => navigate(`/admin/users/${user.id}`)}>\n            <Settings className=\"h-3 w-3\" />\n          </Button>\n          <Button size=\"sm\" variant=\"outline\" onClick={() => onEdit(user)}>\n            <Edit className=\"h-3 w-3\" />\n          </Button>\n          <Button size=\"sm\" variant=\"outline\" onClick={() => onDelete(user.id)}>\n            <Trash2 className=\"h-3 w-3\" />\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default UserCard;\n","\nimport React from 'react';\nimport UserCard from './UserCard';\nimport type { UserProfile } from '@/hooks/useUserProfiles';\n\ninterface UserListProps {\n  profiles: UserProfile[];\n  onEdit: (user: UserProfile) => void;\n  onDelete: (userId: string) => void;\n}\n\nconst UserList: React.FC<UserListProps> = ({ profiles, onEdit, onDelete }) => {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n      {profiles.map((user) => (\n        <UserCard\n          key={user.id}\n          user={user}\n          onEdit={onEdit}\n          onDelete={onDelete}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default UserList;\n","\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { EditableTable } from '@/components/ui/editable-table';\nimport type { UserProfile } from '@/hooks/useUserProfiles';\n\ninterface UserTableProps {\n  profiles: UserProfile[];\n  onEdit: (user: UserProfile) => void;\n  onDelete: (userId: string) => void;\n  onUpdate: (id: string, updates: Partial<UserProfile>) => Promise<{ success: boolean; error?: string }>;\n  onCreate?: (data: Partial<UserProfile>) => Promise<{ success: boolean; error?: string }>;\n}\n\nconst UserTable: React.FC<UserTableProps> = ({ \n  profiles, \n  onUpdate,\n  onDelete,\n  onCreate \n}) => {\n  const navigate = useNavigate();\n\n  const columns = [\n    { \n      key: 'full_name', \n      header: 'Full Name', \n      type: 'text' as const, \n      editable: true, \n      required: true,\n      sortable: true,\n      width: '300px'\n    },\n    { \n      key: 'username', \n      header: 'Username', \n      type: 'text' as const, \n      editable: true,\n      sortable: true,\n      width: '200px'\n    },\n    { \n      key: 'phone', \n      header: 'Phone', \n      type: 'text' as const, \n      editable: true,\n      sortable: false,\n      width: '150px'\n    },\n    { \n      key: 'location', \n      header: 'Location', \n      type: 'text' as const, \n      editable: true,\n      sortable: true,\n      width: '150px'\n    },\n    { \n      key: 'status', \n      header: 'Status', \n      type: 'badge' as const, \n      editable: true,\n      sortable: true,\n      options: ['Active', 'Inactive', 'OnLeave'],\n      width: '120px'\n    }\n  ];\n\n  const handleDelete = async (id: string) => {\n    return new Promise<{ success: boolean; error?: string }>((resolve) => {\n      onDelete(id);\n      resolve({ success: true });\n    });\n  };\n\n  const handleViewUser = (user: UserProfile) => {\n    navigate(`/admin/users/${user.id}`);\n  };\n\n  return (\n    <div className=\"w-full\">\n      <EditableTable\n        data={profiles}\n        columns={columns}\n        onUpdate={onUpdate}\n        onDelete={handleDelete}\n        onCreate={onCreate}\n        onViewUser={handleViewUser}\n        allowAdd={true}\n        allowDelete={true}\n        allowView={true}\n        className=\"w-full\"\n      />\n    </div>\n  );\n};\n\nexport default UserTable;\n","import React from 'react';\nimport { useState } from 'react';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Plus } from 'lucide-react';\nimport { useQuery } from '@tanstack/react-query';\nimport { useOrganisationContext } from '../../context/OrganisationContext';\nimport type { NewUser } from '../../types';\nimport EditableField from '@/modules/organisation/components/profile/EditableField';\n\ninterface CreateUserDialogProps {\n  isOpen: boolean;\n  onOpenChange: (open: boolean) => void;\n  newUser: NewUser;\n  onUserChange: (user: NewUser) => void;\n  onSubmit: (e: React.FormEvent) => void;\n  loading?: boolean;\n}\n\n\nconst CreateUserDialog: React.FC<CreateUserDialogProps> = ({\n  isOpen,\n  onOpenChange,\n  newUser,\n  onUserChange,\n  onSubmit,\n  loading = false\n}) => {\nconst [editingField, setEditingField] = useState<string | null>(null);\nconst [saving, setSaving] = useState(false);\nconst { supabaseClient } = useOrganisationContext();\nconst [isFullNameManuallyEdited, setIsFullNameManuallyEdited] = useState(false);\n\n  // Form validation\n  const isFormValid = () => {\n    const requiredFields = [\n      newUser.first_name?.trim(),\n      newUser.last_name?.trim(),\n      newUser.email?.trim(),\n      newUser.location_id\n    ];\n    \n    // Check if all required fields have values\n    const allFieldsFilled = requiredFields.every(field => field && field.length > 0);\n    \n    // Check email format\n    const emailValid = newUser.email?.trim() && /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(newUser.email.trim());\n    \n    return allFieldsFilled && emailValid;\n  };\n\n  // Fetch locations for dropdown\n  const { data: locations } = useQuery({\n    queryKey: ['locations'],\n    queryFn: async () => {\n      const { data } = await supabaseClient\n        .from('locations')\n        .select('id, name')\n        .eq('status', 'Active')\n        .order('name');\n      return data || [];\n    },\n  });\n\n  // Phone validation function\n  const validatePhoneInput = (input: string): string => {\n    return input.replace(/[^0-9+\\s\\-\\(\\)]/g, '');\n  };\n\n  const updateField = (field: string, value: string) => {\n    // Apply phone validation for phone field\n    if (field === 'phone') {\n      const validatedValue = validatePhoneInput(value);\n      onUserChange({ ...newUser, [field]: validatedValue });\n    } else {\n      onUserChange({ ...newUser, [field]: value });\n    }\n  };\n\n  const handleLocationChange = (locationId: string) => {\n    const selectedLocation = locations?.find(loc => loc.id === locationId);\n    if (selectedLocation) {\n      onUserChange({ \n        ...newUser, \n        location_id: locationId,\n        location: selectedLocation.name \n      });\n    }\n  };\n\n  const handleNameChange = (field: 'first_name' | 'last_name', value: string) => {\n  //console.log('handleNameChange called:', { field, value, currentFullName: newUser.full_name, isManuallyEdited: isFullNameManuallyEdited });\n  const updatedUser = { ...newUser, [field]: value };\n  \n  // Only auto-update full_name if it has NOT been manually edited by the user\n  if (!isFullNameManuallyEdited) {\n    const firstName = field === 'first_name' ? value : updatedUser.first_name || '';\n    const lastName = field === 'last_name' ? value : updatedUser.last_name || '';\n    updatedUser.full_name = `${firstName} ${lastName}`.trim();\n    //console.log('Auto-generating full_name:', { firstName, lastName, fullName: updatedUser.full_name });\n  }\n  \n  console.log('Final updatedUser:', updatedUser);\n  onUserChange(updatedUser);\n};\n\nconst handleFullNameChange = (value: string) => {\n  // Mark that user has manually edited the full name\n  setIsFullNameManuallyEdited(true);\n  onUserChange({ ...newUser, full_name: value });\n};\n\n  const handleFieldEdit = (field: string) => {\n    setEditingField(field);\n  };\n  const handleFieldCancel = () => {\n    setEditingField(null);\n  };\n\n  const handleDialogClose = (open: boolean) => {\n    if (!open) {\n      const resetUser: NewUser = {\n        first_name: '',\n        last_name: '',\n        full_name: '',\n        email: '',\n        password: '',\n        username: '',\n        phone: '',\n        employee_id: '',\n        status: 'Active',\n        access_level: 'User',\n        location_id: '',\n        location: '',\n        bio: ''\n      };\n      onUserChange(resetUser);\n      setIsFullNameManuallyEdited(false); \n      setEditingField(null);\n      setSaving(false);\n    }\n    onOpenChange(open);\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleDialogClose}>\n      <DialogTrigger asChild>\n        <Button>\n          <Plus className=\"h-4 w-4 mr-2\" />\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Create New User</DialogTitle>\n          <DialogDescription>\n            Add a new user to your organization. The user will receive an activation email to set their password.\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={onSubmit} className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"first_name\">First Name <span className=\"text-red-500\">*</span></Label>\n              <Input\n                id=\"first_name\"\n                value={newUser.first_name}\n                onChange={(e) => handleNameChange('first_name', e.target.value)}\n                placeholder=\"Enter first name\"\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"last_name\">Last Name <span className=\"text-red-500\">*</span></Label>\n              <Input\n                id=\"last_name\"\n                value={newUser.last_name}\n                onChange={(e) => handleNameChange('last_name', e.target.value)}\n                placeholder=\"Enter last name\"\n                required\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"full_name\">Full Name (Auto-generated, editable)</Label>\n            <Input\n              id=\"full_name\"\n              value={newUser.full_name || `${newUser.first_name} ${newUser.last_name}`.trim()}\n              onChange={(e) => handleFullNameChange(e.target.value)}\n              placeholder=\"Enter full name\"\n              className=\"flex-1\"\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"email\">Email Address <span className=\"text-red-500\">*</span></Label>\n            <Input\n              id=\"email\"\n              type=\"email\"\n              value={newUser.email}\n              onChange={(e) => updateField('email', e.target.value)}\n              placeholder=\"Enter email address\"\n              required\n            />\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"phone\">Phone</Label>\n            <Input\n              id=\"phone\"\n              value={newUser.phone}\n              onChange={(e) => updateField('phone', e.target.value)}\n              placeholder=\"Enter phone number\"\n            />\n          </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"employee_id\">Employee ID</Label>\n              <Input\n                id=\"employee_id\"\n                value={newUser.employee_id}\n                onChange={(e) => updateField('employee_id', e.target.value)}\n                placeholder=\"Enter employee ID\"\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"status\">Status</Label>\n              <Select value={newUser.status} onValueChange={(value) => updateField('status', value)}>\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"Active\">Active</SelectItem>\n                  <SelectItem value=\"Inactive\">Inactive</SelectItem>\n                  <SelectItem value=\"Pending\">Pending</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"access_level\">Access Level</Label>\n              <Select value={newUser.access_level} onValueChange={(value) => updateField('access_level', value)}>\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"User\">User</SelectItem>\n                  <SelectItem value=\"Manager\">Manager</SelectItem>\n                  <SelectItem value=\"Admin\">Admin</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"location\">Location <span className=\"text-red-500\">*</span></Label>\n            <Select value={newUser.location_id || ''} onValueChange={handleLocationChange}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select a location\" />\n              </SelectTrigger>\n              <SelectContent>\n                {locations?.map((location) => (\n                  <SelectItem key={location.id} value={location.id}>\n                    {location.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"bio\">Bio</Label>\n            <Textarea\n              id=\"bio\"\n              value={newUser.bio}\n              onChange={(e) => updateField('bio', e.target.value)}\n              placeholder=\"Enter bio (optional)\"\n              rows={3}\n            />\n          </div>\n\n          <div className=\"text-sm text-muted-foreground\">\n            <span className=\"text-red-500\">*</span> Required fields\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => handleDialogClose(false)} disabled={loading}>\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={loading || !isFormValid()}>\n              {loading ? (\n                <>\n                  <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\" />\n                  Creating...\n                </>\n              ) : (\n                \"Create User\"\n              )}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}; \nexport default CreateUserDialog;","import React from 'react';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useQuery } from '@tanstack/react-query';\nimport { useOrganisationContext } from '../../context/OrganisationContext';\nimport type { UserProfile } from '../../types';\n\ninterface EditUserDialogProps {\n  isOpen: boolean;\n  onOpenChange: (open: boolean) => void;\n  editingUser: UserProfile | null;\n  onUserChange: (user: UserProfile | null) => void;\n  onSubmit: (e: React.FormEvent) => void;\n}\n\nconst EditUserDialog: React.FC<EditUserDialogProps> = ({\n  isOpen,\n  onOpenChange,\n  editingUser,\n  onUserChange,\n  onSubmit\n}) => {\n  const { supabaseClient } = useOrganisationContext();\n\n  // Fetch locations for dropdown\n  const { data: locations } = useQuery({\n    queryKey: ['locations'],\n    queryFn: async () => {\n      const { data } = await supabaseClient\n        .from('locations')\n        .select('id, name')\n        .eq('status', 'Active')\n        .order('name');\n      return data || [];\n    },\n  });\n\n  if (!editingUser) return null;\n\n  const updateField = (field: keyof UserProfile, value: string) => {\n    onUserChange({ ...editingUser, [field]: value });\n  };\n\n  const handleLocationChange = (locationId: string) => {\n    const selectedLocation = locations?.find(loc => loc.id === locationId);\n    if (selectedLocation) {\n      onUserChange({ \n        ...editingUser, \n        location_id: locationId,\n        location: selectedLocation.name \n      });\n    }\n  };\n\n  // Find the correct location_id if it's missing but location name exists\n  const getLocationId = () => {\n    if (editingUser.location_id) {\n      return editingUser.location_id;\n    }\n    if (editingUser.location && locations) {\n      const foundLocation = locations.find(loc => loc.name === editingUser.location);\n      return foundLocation?.id || '';\n    }\n    return '';\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Edit User</DialogTitle>\n          <DialogDescription>\n            Update user information\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={onSubmit} className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_full_name\">Full Name</Label>\n              <Input\n                id=\"edit_full_name\"\n                value={editingUser.full_name || ''}\n                onChange={(e) => updateField('full_name', e.target.value)}\n                placeholder=\"Enter full name\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_username\">Username</Label>\n              <Input\n                id=\"edit_username\"\n                value={editingUser.username || ''}\n                onChange={(e) => updateField('username', e.target.value)}\n                placeholder=\"Enter username\"\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_email\">Email</Label>\n              <Input\n                id=\"edit_email\"\n                type=\"email\"\n                value={editingUser.email || ''}\n                onChange={(e) => updateField('email', e.target.value)}\n                placeholder=\"Enter email address\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_phone\">Phone</Label>\n              <Input\n                id=\"edit_phone\"\n                value={editingUser.phone || ''}\n                onChange={(e) => updateField('phone', e.target.value)}\n                placeholder=\"Enter phone number\"\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_role\">Role</Label>\n              <Input\n                id=\"edit_role\"\n                value={editingUser.role || ''}\n                onChange={(e) => updateField('role', e.target.value)}\n                placeholder=\"Enter user role\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_department\">Department</Label>\n              <Input\n                id=\"edit_department\"\n                value={editingUser.department || ''}\n                onChange={(e) => updateField('department', e.target.value)}\n                placeholder=\"Enter department\"\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_employee_id\">Employee ID</Label>\n              <Input\n                id=\"edit_employee_id\"\n                value={editingUser.employee_id || ''}\n                onChange={(e) => updateField('employee_id', e.target.value)}\n                placeholder=\"Enter employee ID\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_location\">Location</Label>\n              <Select value={getLocationId()} onValueChange={handleLocationChange}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select a location\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {locations?.map((location) => (\n                    <SelectItem key={location.id} value={location.id}>\n                      {location.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_status\">Status</Label>\n              <Select \n                value={editingUser.status || 'Active'} \n                onValueChange={(value) => updateField('status', value)}\n              >\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"Active\">Active</SelectItem>\n                  <SelectItem value=\"Inactive\">Inactive</SelectItem>\n                  <SelectItem value=\"Pending\">Pending</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_access_level\">Access Level</Label>\n              <Select \n                value={editingUser.access_level || 'User'} \n                onValueChange={(value) => updateField('access_level', value)}\n              >\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"User\">User</SelectItem>\n                  <SelectItem value=\"Manager\">Manager</SelectItem>\n                  <SelectItem value=\"Admin\">Admin</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"edit_bio\">Bio</Label>\n            <Textarea\n              id=\"edit_bio\"\n              value={editingUser.bio || ''}\n              onChange={(e) => updateField('bio', e.target.value)}\n              placeholder=\"Enter bio (optional)\"\n              rows={3}\n            />\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Cancel\n            </Button>\n            <Button type=\"submit\">Update User</Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\nexport default EditUserDialog;","import React, { useState, useCallback } from 'react';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { useDropzone } from 'react-dropzone';\nimport { Upload, FileText } from 'lucide-react';\nimport { toast } from '@/hooks/use-toast';\nimport { useUserProfiles } from '@/hooks/useUserProfiles';\nimport { supabase } from '@/integrations/supabase/client';\nimport Papa from 'papaparse';\nimport { ImportError } from '@/components/import/ImportErrorReport';\nimport { useQuery } from '@tanstack/react-query';\n\ninterface ImportUsersDialogProps {\n  onImportComplete?: () => Promise<void>;\n  onImportError?: (errors: ImportError[], warnings: ImportError[], stats: { success: number; total: number }) => void;\n}\n\ninterface LocationWarning extends ImportError {\n  type: 'warning';\n}\n\nconst ImportUsersDialog: React.FC<ImportUsersDialogProps> = ({ onImportComplete, onImportError }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [uploadedFile, setUploadedFile] = useState<File | null>(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const { createProfile } = useUserProfiles();\n\n  // Fetch valid locations for validation\n  const { data: validLocations } = useQuery({\n    queryKey: ['locations'],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('locations')\n        .select('id, name')\n        .eq('status', 'Active')\n        .order('name');\n      if (error) throw error;\n      return data || [];\n    },\n  });\n\n  const onDrop = useCallback((acceptedFiles: File[]) => {\n    const file = acceptedFiles[0];\n    if (file) {\n      const validTypes = [\n        'text/csv',\n        'application/vnd.ms-excel',\n        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n      ];\n      \n      if (!validTypes.includes(file.type) && !file.name.endsWith('.csv') && !file.name.endsWith('.xlsx') && !file.name.endsWith('.xls')) {\n        toast({\n          title: \"Invalid file type\",\n          description: \"Please upload a CSV or Excel file (.csv, .xlsx, .xls)\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      \n      setUploadedFile(file);\n      toast({\n        title: \"File uploaded\",\n        description: `${file.name} is ready for import`,\n      });\n    }\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'text/csv': ['.csv'],\n      'application/vnd.ms-excel': ['.xls'],\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': ['.xlsx']\n    },\n    multiple: false\n  });\n\n  const generateSampleCSV = () => {\n    const headers = ['Email', 'Full Name', 'First Name', 'Last Name', 'Phone', 'Location', 'Bio', 'Employee ID'];\n    const sampleData = [\n      ['john.doe@company.com', 'John Doe', 'John', 'Doe', '+1-555-0123', 'New York Office', 'Software Engineer with 5 years experience', 'EMP-2024-001'],\n      ['jane.smith@company.com', 'Jane Smith', 'Jane', 'Smith', '+1-555-0124', 'London Office', 'Marketing Manager', 'EMP-2024-002']\n    ];\n    \n    const csvContent = [headers, ...sampleData]\n      .map(row => row.map(field => `\"${field}\"`).join(','))\n      .join('\\n');\n    \n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', 'user_import_template.csv');\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const generateSampleXLSX = () => {\n    // For now, just download the CSV version with .xlsx extension\n    // In a full implementation, you'd use a library like xlsx\n    generateSampleCSV();\n  };\n\n  // Helper function to validate location\n  const validateLocation = (locationName: string): { isValid: boolean; locationId?: string } => {\n    if (!locationName || !validLocations) {\n      console.log('Location validation: No location name or validLocations not loaded', { locationName, validLocations });\n      return { isValid: false };\n    }\n\n    const trimmedLocation = locationName.trim();\n    console.log('Location validation: Checking location', { \n      providedLocation: trimmedLocation, \n      availableLocations: validLocations.map(l => l.name) \n    });\n    \n    const validLocation = validLocations.find(\n      loc => loc.name.toLowerCase() === trimmedLocation.toLowerCase()\n    );\n\n    console.log('Location validation result:', { \n      location: trimmedLocation, \n      found: !!validLocation, \n      validLocation \n    });\n\n    return {\n      isValid: !!validLocation,\n      locationId: validLocation?.id\n    };\n  };\n\n  // Helper function to translate technical errors to user-friendly messages\n  const translateError = (error: any): string => {\n    const errorMessage = error?.message || error?.error || 'Unknown error';\n    \n    console.log('Translating error:', { originalError: error, errorMessage });\n    \n    // Handle specific Supabase/Edge Function errors\n    if (errorMessage.includes('Edge Function returned a non-2xx status code')) {\n      return 'Server error occurred while creating user. Please try again or contact support.';\n    }\n    \n    // Check for \"already registered\" patterns first (most common case)\n    if (errorMessage.includes('already registered') || errorMessage.includes('User already registered') || \n        errorMessage.includes('has already been registered')) {\n      return 'A user with this email address already exists.';\n    }\n    \n    if (errorMessage.includes('Failed to create user:')) {\n      if (errorMessage.includes('User already registered') || errorMessage.includes('already registered')) {\n        return 'A user with this email address already exists.';\n      }\n      if (errorMessage.includes('Invalid email')) {\n        return 'The email address format is invalid.';\n      }\n      if (errorMessage.includes('Password should be at least')) {\n        return 'Password does not meet security requirements.';\n      }\n      return 'Failed to create user account. Please check the email address and try again.';\n    }\n    \n    // Handle Supabase Auth specific errors - check the original error object too\n    const fullErrorMessage = JSON.stringify(error);\n    if (fullErrorMessage.includes('already registered') || fullErrorMessage.includes('User already registered') || \n        fullErrorMessage.includes('has already been registered')) {\n      return 'A user with this email address already exists.';\n    }\n    \n    if (fullErrorMessage.includes('Invalid email') || fullErrorMessage.includes('invalid email') ||\n        errorMessage.includes('Invalid email') || errorMessage.includes('invalid email')) {\n      return 'The email address format is invalid.';\n    }\n    \n    if (errorMessage.includes('Profile creation failed')) {\n      return 'User account was created but profile setup failed. Please contact support.';\n    }\n    \n    if (errorMessage.includes('Database error')) {\n      return 'Database error occurred. Please try again or contact support.';\n    }\n    \n    if (errorMessage.includes('Missing email')) {\n      return 'Email address is required for all users.';\n    }\n    \n    // Handle network/connection errors\n    if (errorMessage.includes('fetch')) {\n      return 'Network error occurred. Please check your connection and try again.';\n    }\n    \n    // Handle timeout errors\n    if (errorMessage.includes('timeout')) {\n      return 'Request timed out. Please try again.';\n    }\n    \n    // Handle FunctionsHttpError specifically\n    if (errorMessage === 'Unknown error' && fullErrorMessage.includes('FunctionsHttpError')) {\n      // This is likely a user already exists error that's not being properly translated\n      // Check if we can extract more info from the error object\n      if (error?.context || error?.hint) {\n        const context = error.context || '';\n        const hint = error.hint || '';\n        if (context.includes('already') || hint.includes('already')) {\n          return 'A user with this email address already exists.';\n        }\n      }\n      return 'Server error occurred while creating user. Please try again or contact support.';\n    }\n    \n    // Default fallback - return a more user-friendly version of the original error\n    return errorMessage.length > 100 \n      ? 'An unexpected error occurred while creating the user. Please try again.'\n      : errorMessage;\n  };\n\n  const processUserImport = async (row: any) => {\n    const email = row['Email'] || row['email'];\n    \n    if (!email) {\n      console.error('Missing email for row:', row);\n      throw new Error('Email address is required for all users.');\n    }\n\n    console.log('Processing user:', email);\n\n    const locationName = row['Location'] || row['location'] || '';\n    const locationValidation = validateLocation(locationName);\n\n    // Use our create-user edge function instead of direct signUp\n    const { data: authData, error: authError } = await supabase.functions.invoke('create-user', {\n      body: {\n        email: email,\n        full_name: row['Full Name'] || row['full_name'] || 'Unknown User',\n        first_name: row['First Name'] || row['first_name'] || '',\n        last_name: row['Last Name'] || row['last_name'] || '',\n        username: row['Username'] || row['username'] || '',\n        phone: row['Phone'] || row['phone'] || '',\n        location: locationValidation.isValid ? locationName : '',\n        location_id: locationValidation.locationId || null,\n        status: 'Pending',\n        bio: row['Bio'] || row['bio'] || '',\n        employee_id: row['Employee ID'] || row['employee_id'] || '',\n        access_level: 'User'\n      }\n    });\n\n    if (authError) {\n      console.error('Auth error for user:', email, authError);\n      const friendlyError = translateError(authError);\n      throw new Error(friendlyError);\n    }\n\n    if (authData && authData.user) {\n      console.log('User created successfully:', email);\n    } else if (authData && authData.error) {\n      console.error('Create user error:', authData.error);\n      const friendlyError = translateError(authData.error);\n      throw new Error(friendlyError);\n    }\n\n    return { \n      email, \n      success: true, \n      locationWarning: !locationValidation.isValid && locationName ? {\n        location: locationName,\n        message: `Location \"${locationName}\" not found in system - user created without location assignment`\n      } : null\n    };\n  };\n\n  const handleImport = async () => {\n    if (!uploadedFile) {\n      toast({\n        title: \"No file selected\",\n        description: \"Please upload a file first\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsProcessing(true);\n\n    try {\n      const text = await uploadedFile.text();\n      \n      Papa.parse(text, {\n        header: true,\n        complete: async (results) => {\n          const data = results.data as any[];\n          \n          if (data.length === 0) {\n            toast({\n              title: \"Empty file\",\n              description: \"The uploaded file contains no data\",\n              variant: \"destructive\",\n            });\n            setIsProcessing(false);\n            return;\n          }\n\n          console.log('Processing', data.length, 'rows');\n          let successCount = 0;\n          const errors: ImportError[] = [];\n          const locationWarnings: ImportError[] = [];\n\n          // Process users sequentially to avoid overwhelming the system\n          for (let i = 0; i < data.length; i++) {\n            const row = data[i];\n            \n            // Skip empty rows\n            if (!row['Email'] && !row['email'] && !row['Full Name'] && !row['full_name']) {\n              console.log('Skipping empty row at index', i);\n              continue;\n            }\n\n            const email = row['Email'] || row['email'] || 'Unknown';\n            \n            try {\n              console.log(`Processing user ${i + 1} of ${data.length}:`, email);\n              const result = await processUserImport(row);\n              successCount++;\n              console.log(`Successfully processed user ${i + 1}`);\n              \n              // Collect location warnings\n              if (result.locationWarning) {\n                console.log('Adding location warning:', result.locationWarning);\n                locationWarnings.push({\n                  rowNumber: i + 2, // +2 because row 1 is headers, and i is 0-indexed\n                  identifier: email,\n                  field: 'Location',\n                  error: result.locationWarning.message,\n                  rawData: row\n                });\n              } else {\n                const locationName = row['Location'] || row['location'] || '';\n                console.log('No location warning for user:', email, 'location:', locationName);\n              }\n            } catch (error: any) {\n              console.error(`Error importing user ${i + 1}:`, error);\n              const friendlyError = translateError(error);\n              errors.push({\n                rowNumber: i + 2, // +2 because row 1 is headers, and i is 0-indexed\n                identifier: email,\n                field: !row['Email'] && !row['email'] ? 'Email' : undefined,\n                error: friendlyError,\n                rawData: row\n              });\n            }\n\n            // Add a small delay between users to prevent rate limiting\n            if (i < data.length - 1) {\n              await new Promise(resolve => setTimeout(resolve, 500));\n            }\n          }\n\n          console.log('Import completed. Success:', successCount, 'Errors:', errors.length, 'Location Warnings:', locationWarnings.length);\n\n          setUploadedFile(null);\n          setIsProcessing(false);\n          setIsOpen(false);\n\n          // Show combined error and warning report through parent component\n          if ((errors.length > 0 || locationWarnings.length > 0) && onImportError) {\n            setTimeout(() => {\n              onImportError(errors, locationWarnings, { success: successCount, total: data.length });\n            }, 300);\n            \n            if (errors.length > 0 && locationWarnings.length > 0) {\n              toast({\n                title: \"Import completed with errors and warnings\",\n                description: `${successCount} users imported successfully. ${errors.length} failed, ${locationWarnings.length} have location warnings.`,\n                variant: \"destructive\",\n              });\n            } else if (errors.length > 0) {\n              toast({\n                title: \"Import completed with errors\",\n                description: `${successCount} users imported successfully. ${errors.length} failed. Opening error report...`,\n                variant: \"destructive\",\n              });\n            } else if (locationWarnings.length > 0) {\n              toast({\n                title: \"Import completed with location warnings\",\n                description: `${successCount} users imported successfully. ${locationWarnings.length} users have invalid locations. Opening warning report...`,\n                variant: \"default\",\n              });\n            }\n          } else {\n            toast({\n              title: \"Import completed successfully\",\n              description: `All ${successCount} users imported successfully. Users will need to activate their accounts via email.`,\n            });\n          }\n          \n          // Refresh the user list after successful import\n          if (onImportComplete) {\n            await onImportComplete();\n          }\n        },\n        error: (error) => {\n          console.error('Parse error:', error);\n          toast({\n            title: \"Parse error\",\n            description: \"Failed to parse the CSV file\",\n            variant: \"destructive\",\n          });\n          setIsProcessing(false);\n        }\n      });\n    } catch (error) {\n      console.error('Import error:', error);\n      toast({\n        title: \"Import failed\",\n        description: \"An error occurred while importing the file\",\n        variant: \"destructive\",\n      });\n      setIsProcessing(false);\n    }\n  };\n\n  const handleDialogClose = (open: boolean) => {\n    if (!open && !isProcessing) {\n      setUploadedFile(null);\n    }\n    setIsOpen(open);\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleDialogClose}>\n      <DialogTrigger asChild>\n        <Button variant=\"outline\">\n          <Upload className=\"h-4 w-4 mr-2\" />\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Import Users</DialogTitle>\n          <DialogDescription>\n            Upload a CSV or Excel file to import users in bulk. Users will be created with authentication accounts and will need to activate via email. Roles and departments can be assigned after import.\n          </DialogDescription>\n        </DialogHeader>\n        \n        <div className=\"space-y-6\">\n          <div className=\"space-y-4\">\n            <div\n              {...getRootProps()}\n              className={`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ${\n                isDragActive\n                  ? 'border-blue-400 bg-blue-50'\n                  : uploadedFile\n                  ? 'border-green-400 bg-green-50'\n                  : 'border-gray-300 hover:border-gray-400'\n              }`}\n            >\n              <input {...getInputProps()} />\n              <Upload className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n              \n              {uploadedFile ? (\n                <div>\n                  <p className=\"text-lg font-medium text-green-700\">File Ready for Import</p>\n                  <p className=\"text-sm text-green-600 mt-1\">{uploadedFile.name}</p>\n                  <p className=\"text-xs text-gray-500 mt-2\">\n                    Click to select a different file or drop a new one here\n                  </p>\n                </div>\n              ) : isDragActive ? (\n                <p className=\"text-lg font-medium text-blue-700\">Drop your user file here</p>\n              ) : (\n                <div>\n                  <p className=\"text-lg font-medium\">Drag and drop your user file here, or browse</p>\n                  <p className=\"text-sm text-gray-500 mt-1\">Supports CSV and Excel files (.xlsx, .xls)</p>\n                </div>\n              )}\n            </div>\n\n            {uploadedFile && (\n              <div className=\"flex gap-3\">\n                <Button\n                  onClick={handleImport}\n                  disabled={isProcessing}\n                  className=\"flex items-center gap-2\"\n                >\n                  {isProcessing ? (\n                    <>\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                    </>\n                  ) : (\n                    <>\n                      <Upload className=\"h-4 w-4\" />\n                    </>\n                  )}\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setUploadedFile(null)}\n                  disabled={isProcessing}\n                >\n                  X\n                </Button>\n              </div>\n            )}\n          </div>\n\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n            <h4 className=\"text-sm font-medium text-yellow-800 mb-2\">User Import Template</h4>\n            <p className=\"text-sm text-yellow-700 mb-3\">Download a template for importing users with sample data.</p>\n            \n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between p-2 bg-white rounded border\">\n                <div className=\"flex items-center gap-2\">\n                  <FileText className=\"h-4 w-4\" />\n                  <span className=\"text-sm font-medium\">Users Template (CSV)</span>\n                  <Badge variant=\"secondary\" className=\"text-xs\">Ready to use template</Badge>\n                </div>\n                <Button size=\"sm\" variant=\"outline\" onClick={generateSampleCSV}>Download</Button>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <h4 className=\"font-semibold text-blue-900 mb-2\">Required Columns</h4>\n            <div className=\"flex flex-wrap gap-2 mb-4\">\n              {[\n                'Email', 'Full Name', 'First Name', 'Last Name', \n                'Phone', 'Location', 'Bio', 'Employee ID'\n              ].map((column) => (\n                <Badge key={column} variant=\"outline\" className=\"text-xs\">\n                  {column}\n                </Badge>\n              ))}\n            </div>\n            <div className=\"text-sm text-blue-800 space-y-1\">\n              <p>• <strong>Email</strong> is required for each user</p>\n              <p>• Users will be created with 'Pending' status and must activate via email</p>\n              <p>• Roles and departments can be assigned after bulk import</p>\n              <p>• All other fields are optional and will use default values if not provided</p>\n            </div>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default ImportUsersDialog;","import React, { useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useUserProfiles } from '@/hooks/useUserProfiles';\nimport { useUserManagement } from '@/hooks/useUserManagement';\nimport { useViewPreference } from '@/hooks/useViewPreference';\nimport { handleSaveUser, handleCreateUser, handleDeleteUser } from '../../utils/userManagementActions';\nimport { Button } from '@/components/ui/button';\nimport { ToggleGroup, ToggleGroupItem } from '@/components/ui/toggle-group';\nimport { LayoutGrid, List } from 'lucide-react';\nimport { useOrganisationContext } from '../../context/OrganisationContext';\nimport { DeleteUserDialog } from '@/components/ui/delete-user-dialog';\nimport { useToast } from '@/hooks/use-toast';\nimport UserList from './UserList';\nimport UserTable from './UserTable';\nimport CreateUserDialog from './CreateUserDialog';\nimport EditUserDialog from './EditUserDialog';\nimport ImportUsersDialog from './ImportUsersDialog';\nimport { ImportErrorReport, ImportError } from '@/components/import/ImportErrorReport';\n\n\nconst UserManagement: React.FC = () => {\n  const { hasPermission, onUserAction } = useOrganisationContext();\n  const { profiles, loading, updateProfile, refetch } = useUserProfiles();\n  const { toast } = useToast();\n  const [viewMode, setViewMode] = useViewPreference('userManagement', 'cards');\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n  const [userToDelete, setUserToDelete] = useState<{ id: string; name: string } | null>(null);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [showImportErrorReport, setShowImportErrorReport] = useState(false);\n  const [importErrors, setImportErrors] = useState<ImportError[]>([]);\n  const [importWarnings, setImportWarnings] = useState<ImportError[]>([]);\n  const [importStats, setImportStats] = useState({ success: 0, total: 0 });\n  const [isCreatingUser, setIsCreatingUser] = useState(false);\n  \n  const {\n    editingUser,\n    setEditingUser,\n    isEditDialogOpen,\n    setIsEditDialogOpen,\n    isCreateDialogOpen,\n    setIsCreateDialogOpen,\n    newUser,\n    setNewUser,\n    openEditDialog,\n    closeEditDialog,\n    resetNewUser\n  } = useUserManagement();\n\n  const onSaveUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!editingUser) return;\n\n    await handleSaveUser(editingUser, async (id, updates) => {\n      await updateProfile(id, updates);\n    }, closeEditDialog);\n  };\n\n  const onCreateUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    setIsCreatingUser(true);\n    \n    try {\n      await handleCreateUser(newUser, async (id, updates) => {\n        await updateProfile(id, updates);\n      }, async () => {\n        // Refresh the user list after successful creation\n        await refetch();\n      });\n      \n      // Close dialog and reset form only after successful creation\n      setIsCreateDialogOpen(false);\n      resetNewUser();\n    } catch (error) {\n      // Keep dialog open on error so user can see the error and retry\n      console.error('Error creating user:', error);\n    } finally {\n      setIsCreatingUser(false);\n    }\n  };\n\n  const onDeleteUser = (userId: string) => {\n    const user = profiles.find(p => p.id === userId);\n    setUserToDelete({ id: userId, name: user?.full_name || 'Unknown User' });\n    setIsDeleteDialogOpen(true);\n  };\n\n  const handleDeleteConfirm = async (reason: string) => {\n    if (!userToDelete) return;\n    setIsDeleting(true);\n    try {\n      const result = await handleDeleteUser(userToDelete.id, userToDelete.name, reason);\n      if (result.success) {\n        // Close dialog first\n        setIsDeleteDialogOpen(false);\n        setUserToDelete(null);\n        \n        // Show success toast after dialog is closed\n        toast({\n          title: \"Success\",\n          description: `User ${result.deletedUser?.name || userToDelete.name} has been successfully deleted`,\n        });\n        \n        // Refresh the user list after successful deletion\n        await refetch();\n      }\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  const onUpdateProfile = async (id: string, updates: any) => {\n    const result = await updateProfile(id, updates);\n    return { success: result.success, error: result.error };\n  };\n\n  if (loading) {\n    return <div>Loading users...</div>;\n  }\n\n  return (\n    <>\n      <ImportErrorReport\n        errors={importErrors}\n        warnings={importWarnings}\n        successCount={importStats.success}\n        totalCount={importStats.total}\n        isOpen={showImportErrorReport}\n        onClose={() => setShowImportErrorReport(false)}\n        importType=\"Users\"\n      />\n      \n      <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-xl font-semibold\">User Management</h2>\n          <div className=\"flex items-center gap-4\">\n            <ToggleGroup \n              type=\"single\" \n              value={viewMode} \n              onValueChange={(value) => value && setViewMode(value as 'cards' | 'list')}\n            >\n              <ToggleGroupItem value=\"cards\" aria-label=\"Card view\">\n                <LayoutGrid className=\"h-4 w-4\" />\n              </ToggleGroupItem>\n              <ToggleGroupItem value=\"list\" aria-label=\"List view\">\n                <List className=\"h-4 w-4\" />\n              </ToggleGroupItem>\n            </ToggleGroup>\n            <ImportUsersDialog \n              onImportComplete={refetch}\n              onImportError={(errors, warnings, stats) => {\n                setImportErrors(errors);\n                setImportWarnings(warnings);\n                setImportStats(stats);\n                setShowImportErrorReport(true);\n              }}\n            />\n            <CreateUserDialog\n              isOpen={isCreateDialogOpen}\n              onOpenChange={setIsCreateDialogOpen}\n              newUser={newUser}\n              onUserChange={setNewUser}\n              onSubmit={onCreateUser}\n              loading={isCreatingUser}\n            />\n          </div>\n        </div>\n\n      {viewMode === 'cards' ? (\n        <UserList\n          profiles={profiles}\n          onEdit={openEditDialog}\n          onDelete={onDeleteUser}\n        />\n      ) : (\n        <UserTable\n          profiles={profiles}\n          onEdit={openEditDialog}\n          onDelete={onDeleteUser}\n          onUpdate={onUpdateProfile}\n        />\n      )}\n\n      <EditUserDialog\n        isOpen={isEditDialogOpen}\n        onOpenChange={setIsEditDialogOpen}\n        editingUser={editingUser}\n        onUserChange={setEditingUser}\n        onSubmit={onSaveUser}\n      />\n\n        <DeleteUserDialog\n          open={isDeleteDialogOpen}\n          onOpenChange={setIsDeleteDialogOpen}\n          userName={userToDelete?.name || ''}\n          onConfirm={handleDeleteConfirm}\n          loading={isDeleting}\n        />\n      </div>\n    </>\n  );\n};\nexport default UserManagement;","import React, { useState } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Switch } from '@/components/ui/switch';\nimport { UserCheck, Plus, Edit, Trash2 } from 'lucide-react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { toast } from '@/components/ui/use-toast';\nimport { useOrganisationContext } from '../../context/OrganisationContext';\nimport type { Role, Department } from '../../types';\n\nexport const RoleManagement: React.FC = () => {\n  const { supabaseClient, hasPermission } = useOrganisationContext();\n  const queryClient = useQueryClient();\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [editingRole, setEditingRole] = useState<Role | null>(null);\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    department_id: 'none',\n    is_active: true,\n  });\n\n  const { data: roles, isLoading: rolesLoading } = useQuery({\n    queryKey: ['roles'],\n    queryFn: async () => {\n      const { data, error } = await supabaseClient\n        .from('roles')\n        .select('*')\n        .order('name');\n      \n      if (error) throw error;\n      return data as Role[];\n    },\n  });\n\n  const { data: departments } = useQuery({\n    queryKey: ['departments-for-roles'],\n    queryFn: async () => {\n      const { data, error } = await supabaseClient\n        .from('departments')\n        .select('id, name')\n        .order('name');\n      \n      if (error) throw error;\n      return data as Department[];\n    },\n  });\n\n  const createRoleMutation = useMutation({\n    mutationFn: async (roleData: typeof formData) => {\n      const { error } = await supabaseClient\n        .from('roles')\n        .insert([{\n          name: roleData.name,\n          description: roleData.description || null,\n          department_id: roleData.department_id === 'none' ? null : roleData.department_id || null,\n          is_active: roleData.is_active,\n        }]);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['roles'] });\n      toast({\n        title: \"Success\",\n        description: \"Role created successfully\",\n      });\n      setIsCreateDialogOpen(false);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateRoleMutation = useMutation({\n    mutationFn: async ({ role_id, ...roleData }: Role & typeof formData) => {\n      const { error } = await supabaseClient\n        .from('roles')\n        .update({\n          name: roleData.name,\n          description: roleData.description || null,\n          department_id: roleData.department_id === 'none' ? null : roleData.department_id || null,\n          is_active: roleData.is_active,\n        })\n        .eq('role_id', role_id);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['roles'] });\n      toast({\n        title: \"Success\",\n        description: \"Role updated successfully\",\n      });\n      setEditingRole(null);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteRoleMutation = useMutation({\n    mutationFn: async (roleId: string) => {\n      const { error } = await supabaseClient\n        .from('roles')\n        .delete()\n        .eq('role_id', roleId);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['roles'] });\n      toast({\n        title: \"Success\",\n        description: \"Role deleted successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      description: '',\n      department_id: 'none',\n      is_active: true,\n    });\n  };\n\n  const handleEdit = (role: Role) => {\n    setEditingRole(role);\n    setFormData({\n      name: role.name,\n      description: role.description || '',\n      department_id: role.department_id || 'none',\n      is_active: role.is_active,\n    });\n  };\n\n  const handleSubmit = () => {\n    if (editingRole) {\n      updateRoleMutation.mutate({ \n        ...editingRole,\n        ...formData \n      });\n    } else {\n      createRoleMutation.mutate(formData);\n    }\n  };\n\n  const getDepartmentName = (departmentId?: string) => {\n    if (!departmentId || departmentId === 'none') return 'No department';\n    const department = departments?.find(d => d.id === departmentId);\n    return department?.name || 'Unknown department';\n  };\n\n  if (rolesLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"flex items-center gap-2\">\n                <UserCheck className=\"h-5 w-5\" />\n                Roles\n              </CardTitle>\n              <CardDescription>\n                Manage organizational roles and their department associations\n              </CardDescription>\n            </div>\n            {hasPermission('canManageRoles') && (\n              <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n                <DialogTrigger asChild>\n                  <Button>\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Role\n                  </Button>\n                </DialogTrigger>\n                <DialogContent>\n                  <DialogHeader>\n                    <DialogTitle>Create Role</DialogTitle>\n                    <DialogDescription>\n                      Add a new role to your organization\n                    </DialogDescription>\n                  </DialogHeader>\n                  <div className=\"grid gap-4 py-4\">\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"name\">Role Name</Label>\n                      <Input\n                        id=\"name\"\n                        value={formData.name}\n                        onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                        placeholder=\"Enter role name\"\n                      />\n                    </div>\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"description\">Description</Label>\n                      <Textarea\n                        id=\"description\"\n                        value={formData.description}\n                        onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                        placeholder=\"Enter role description (optional)\"\n                      />\n                    </div>\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"department\">Department</Label>\n                      <Select\n                        value={formData.department_id}\n                        onValueChange={(value) => setFormData(prev => ({ ...prev, department_id: value }))}\n                      >\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select department (optional)\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"none\">No department</SelectItem>\n                          {departments?.map((department) => (\n                            <SelectItem key={department.id} value={department.id}>\n                              {department.name}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <Switch\n                        id=\"is_active\"\n                        checked={formData.is_active}\n                        onCheckedChange={(checked) => setFormData(prev => ({ ...prev, is_active: checked }))}\n                      />\n                      <Label htmlFor=\"is_active\">Active Role</Label>\n                    </div>\n                  </div>\n                  <DialogFooter>\n                    <Button variant=\"outline\" onClick={() => setIsCreateDialogOpen(false)}>\n                      Cancel\n                    </Button>\n                    <Button onClick={handleSubmit} disabled={!formData.name.trim()}>\n                      Create Role\n                    </Button>\n                  </DialogFooter>\n                </DialogContent>\n              </Dialog>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Name</TableHead>\n                <TableHead>Description</TableHead>\n                <TableHead>Department</TableHead>\n                <TableHead>Status</TableHead>\n                <TableHead>Created</TableHead>\n                {hasPermission('canManageRoles') && (\n                  <TableHead className=\"text-right\">Actions</TableHead>\n                )}\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {roles?.map((role) => (\n                <TableRow key={role.role_id}>\n                  <TableCell className=\"font-medium\">\n                    {role.name}\n                  </TableCell>\n                  <TableCell>\n                    {role.description || <span className=\"text-muted-foreground\">No description</span>}\n                  </TableCell>\n                  <TableCell>\n                    {getDepartmentName(role.department_id)}\n                  </TableCell>\n                  <TableCell>\n                    <Badge variant={role.is_active ? \"default\" : \"secondary\"}>\n                      {role.is_active ? \"Active\" : \"Inactive\"}\n                    </Badge>\n                  </TableCell>\n                  <TableCell>\n                    {new Date(role.created_at).toLocaleDateString()}\n                  </TableCell>\n                  {hasPermission('canManageRoles') && (\n                    <TableCell className=\"text-right\">\n                      <div className=\"flex items-center justify-end gap-2\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => handleEdit(role)}\n                        >\n                          <Edit className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => deleteRoleMutation.mutate(role.role_id)}\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  )}\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          \n          {roles?.length === 0 && (\n            <div className=\"text-center py-8\">\n              <UserCheck className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n              <p className=\"text-muted-foreground\">No roles found</p>\n              <p className=\"text-sm text-muted-foreground\">Create your first role to get started</p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Edit Dialog */}\n      {hasPermission('canManageRoles') && (\n        <Dialog open={!!editingRole} onOpenChange={(open) => !open && setEditingRole(null)}>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Edit Role</DialogTitle>\n              <DialogDescription>\n                Update role information\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"grid gap-4 py-4\">\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-name\">Role Name</Label>\n                <Input\n                  id=\"edit-name\"\n                  value={formData.name}\n                  onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                  placeholder=\"Enter role name\"\n                />\n              </div>\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-description\">Description</Label>\n                <Textarea\n                  id=\"edit-description\"\n                  value={formData.description}\n                  onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                  placeholder=\"Enter role description (optional)\"\n                />\n              </div>\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-department\">Department</Label>\n                <Select\n                  value={formData.department_id}\n                  onValueChange={(value) => setFormData(prev => ({ ...prev, department_id: value }))}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select department (optional)\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"none\">No department</SelectItem>\n                    {departments?.map((department) => (\n                      <SelectItem key={department.id} value={department.id}>\n                        {department.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Switch\n                  id=\"edit-is_active\"\n                  checked={formData.is_active}\n                  onCheckedChange={(checked) => setFormData(prev => ({ ...prev, is_active: checked }))}\n                />\n                <Label htmlFor=\"edit-is_active\">Active Role</Label>\n              </div>\n            </div>\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setEditingRole(null)}>\n                Cancel\n              </Button>\n              <Button onClick={handleSubmit} disabled={!formData.name.trim()}>\n                Update Role\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  );\n};","import React, { useState } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Building2, Plus, Edit, Trash2 } from 'lucide-react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { toast } from '@/components/ui/use-toast';\nimport { useOrganisationContext } from '../../context/OrganisationContext';\nimport type { Department } from '../../types';\n\ninterface Profile {\n  id: string;\n  full_name: string;\n}\n\nexport const DepartmentManagement: React.FC = () => {\n  const { supabaseClient, hasPermission } = useOrganisationContext();\n  const queryClient = useQueryClient();\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [editingDepartment, setEditingDepartment] = useState<Department | null>(null);\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    manager_id: 'none',\n  });\n\n  const { data: departments, isLoading: departmentsLoading } = useQuery({\n    queryKey: ['departments'],\n    queryFn: async () => {\n      const { data, error } = await supabaseClient\n        .from('departments')\n        .select('*')\n        .order('name');\n      \n      if (error) throw error;\n      return data as Department[];\n    },\n  });\n\n  const { data: profiles } = useQuery({\n    queryKey: ['profiles-for-managers'],\n    queryFn: async () => {\n      const { data, error } = await supabaseClient\n        .from('profiles')\n        .select('id, full_name')\n        .not('full_name', 'is', null)\n        .order('full_name');\n      \n      if (error) throw error;\n      return data as Profile[];\n    },\n  });\n\n  const createDepartmentMutation = useMutation({\n    mutationFn: async (departmentData: typeof formData) => {\n      const { error } = await supabaseClient\n        .from('departments')\n        .insert([{\n          name: departmentData.name,\n          description: departmentData.description || null,\n          manager_id: departmentData.manager_id === 'none' ? null : departmentData.manager_id || null,\n        }]);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['departments'] });\n      toast({\n        title: \"Success\",\n        description: \"Department created successfully\",\n      });\n      setIsCreateDialogOpen(false);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateDepartmentMutation = useMutation({\n    mutationFn: async ({ id, ...departmentData }: Department & typeof formData) => {\n      const { error } = await supabaseClient\n        .from('departments')\n        .update({\n          name: departmentData.name,\n          description: departmentData.description || null,\n          manager_id: departmentData.manager_id === 'none' ? null : departmentData.manager_id || null,\n        })\n        .eq('id', id);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['departments'] });\n      toast({\n        title: \"Success\",\n        description: \"Department updated successfully\",\n      });\n      setEditingDepartment(null);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteDepartmentMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const { error } = await supabaseClient\n        .from('departments')\n        .delete()\n        .eq('id', id);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['departments'] });\n      toast({\n        title: \"Success\",\n        description: \"Department deleted successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      description: '',\n      manager_id: 'none',\n    });\n  };\n\n  const handleEdit = (department: Department) => {\n    setEditingDepartment(department);\n    setFormData({\n      name: department.name,\n      description: department.description || '',\n      manager_id: department.manager_id || 'none',\n    });\n  };\n\n  const handleSubmit = () => {\n    if (editingDepartment) {\n      updateDepartmentMutation.mutate({ \n        ...editingDepartment,\n        ...formData \n      });\n    } else {\n      createDepartmentMutation.mutate(formData);\n    }\n  };\n\n  const getManagerName = (managerId?: string) => {\n    if (!managerId || managerId === 'none') return 'No manager assigned';\n    const manager = profiles?.find(p => p.id === managerId);\n    return manager?.full_name || 'Unknown manager';\n  };\n\n  if (departmentsLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Building2 className=\"h-5 w-5\" />\n                Departments\n              </CardTitle>\n              <CardDescription>\n                Manage organizational departments and assign managers\n              </CardDescription>\n            </div>\n            {hasPermission('canManageDepartments') && (\n              <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n                <DialogTrigger asChild>\n                  <Button>\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Department\n                  </Button>\n                </DialogTrigger>\n                <DialogContent>\n                  <DialogHeader>\n                    <DialogTitle>Create Department</DialogTitle>\n                    <DialogDescription>\n                      Add a new department to your organization\n                    </DialogDescription>\n                  </DialogHeader>\n                  <div className=\"grid gap-4 py-4\">\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"name\">Department Name</Label>\n                      <Input\n                        id=\"name\"\n                        value={formData.name}\n                        onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                        placeholder=\"Enter department name\"\n                      />\n                    </div>\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"description\">Description</Label>\n                      <Textarea\n                        id=\"description\"\n                        value={formData.description}\n                        onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                        placeholder=\"Enter department description (optional)\"\n                      />\n                    </div>\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"manager\">Manager</Label>\n                      <Select\n                        value={formData.manager_id}\n                        onValueChange={(value) => setFormData(prev => ({ ...prev, manager_id: value }))}\n                      >\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select manager (optional)\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"none\">No manager</SelectItem>\n                          {profiles?.map((profile) => (\n                            <SelectItem key={profile.id} value={profile.id}>\n                              {profile.full_name}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n                  <DialogFooter>\n                    <Button variant=\"outline\" onClick={() => setIsCreateDialogOpen(false)}>\n                      Cancel\n                    </Button>\n                    <Button onClick={handleSubmit} disabled={!formData.name.trim()}>\n                      Create Department\n                    </Button>\n                  </DialogFooter>\n                </DialogContent>\n              </Dialog>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Name</TableHead>\n                <TableHead>Description</TableHead>\n                <TableHead>Manager</TableHead>\n                <TableHead>Created</TableHead>\n                {hasPermission('canManageDepartments') && (\n                  <TableHead className=\"text-right\">Actions</TableHead>\n                )}\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {departments?.map((department) => (\n                <TableRow key={department.id}>\n                  <TableCell className=\"font-medium\">\n                    {department.name}\n                  </TableCell>\n                  <TableCell>\n                    {department.description || <span className=\"text-muted-foreground\">No description</span>}\n                  </TableCell>\n                  <TableCell>\n                    {getManagerName(department.manager_id)}\n                  </TableCell>\n                  <TableCell>\n                    {new Date(department.created_at).toLocaleDateString()}\n                  </TableCell>\n                  {hasPermission('canManageDepartments') && (\n                    <TableCell className=\"text-right\">\n                      <div className=\"flex items-center justify-end gap-2\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => handleEdit(department)}\n                        >\n                          <Edit className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => deleteDepartmentMutation.mutate(department.id)}\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  )}\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          \n          {departments?.length === 0 && (\n            <div className=\"text-center py-8\">\n              <Building2 className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n              <p className=\"text-muted-foreground\">No departments found</p>\n              <p className=\"text-sm text-muted-foreground\">Create your first department to get started</p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Edit Dialog */}\n      {hasPermission('canManageDepartments') && (\n        <Dialog open={!!editingDepartment} onOpenChange={(open) => !open && setEditingDepartment(null)}>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Edit Department</DialogTitle>\n              <DialogDescription>\n                Update department information\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"grid gap-4 py-4\">\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-name\">Department Name</Label>\n                <Input\n                  id=\"edit-name\"\n                  value={formData.name}\n                  onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                  placeholder=\"Enter department name\"\n                />\n              </div>\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-description\">Description</Label>\n                <Textarea\n                  id=\"edit-description\"\n                  value={formData.description}\n                  onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                  placeholder=\"Enter department description (optional)\"\n                />\n              </div>\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-manager\">Manager</Label>\n                <Select\n                  value={formData.manager_id}\n                  onValueChange={(value) => setFormData(prev => ({ ...prev, manager_id: value }))}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select manager (optional)\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"none\">No manager</SelectItem>\n                    {profiles?.map((profile) => (\n                      <SelectItem key={profile.id} value={profile.id}>\n                        {profile.full_name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setEditingDepartment(null)}>\n                Cancel\n              </Button>\n              <Button onClick={handleSubmit} disabled={!formData.name.trim()}>\n                Update Department\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  );\n};","import React, { useState } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Switch } from '@/components/ui/switch';\nimport { MapPin, Plus, Edit, Trash2 } from 'lucide-react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { toast } from '@/components/ui/use-toast';\nimport { useOrganisationContext } from '../../context/OrganisationContext';\nimport type { Location } from '../../types';\n\nexport const LocationManagement: React.FC = () => {\n  const { supabaseClient, hasPermission } = useOrganisationContext();\n  const queryClient = useQueryClient();\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [editingLocation, setEditingLocation] = useState<Location | null>(null);\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    building: '',\n    floor: '',\n    room: '',\n    status: 'Active',\n  });\n\n  const { data: locations, isLoading: locationsLoading } = useQuery({\n    queryKey: ['locations'],\n    queryFn: async () => {\n      const { data, error } = await supabaseClient\n        .from('locations')\n        .select('*')\n        .order('name');\n      \n      if (error) throw error;\n      return data as Location[];\n    },\n  });\n\n  const createLocationMutation = useMutation({\n    mutationFn: async (locationData: typeof formData) => {\n      const { error } = await supabaseClient\n        .from('locations')\n        .insert([{\n          name: locationData.name,\n          description: locationData.description || null,\n          building: locationData.building || null,\n          floor: locationData.floor || null,\n          room: locationData.room || null,\n          status: locationData.status,\n        }]);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['locations'] });\n      toast({\n        title: \"Success\",\n        description: \"Location created successfully\",\n      });\n      setIsCreateDialogOpen(false);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateLocationMutation = useMutation({\n    mutationFn: async ({ id, ...locationData }: Location & typeof formData) => {\n      const { error } = await supabaseClient\n        .from('locations')\n        .update({\n          name: locationData.name,\n          description: locationData.description || null,\n          building: locationData.building || null,\n          floor: locationData.floor || null,\n          room: locationData.room || null,\n          status: locationData.status,\n        })\n        .eq('id', id);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['locations'] });\n      toast({\n        title: \"Success\",\n        description: \"Location updated successfully\",\n      });\n      setEditingLocation(null);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteLocationMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const { error } = await supabaseClient\n        .from('locations')\n        .delete()\n        .eq('id', id);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['locations'] });\n      toast({\n        title: \"Success\",\n        description: \"Location deleted successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      description: '',\n      building: '',\n      floor: '',\n      room: '',\n      status: 'Active',\n    });\n  };\n\n  const handleEdit = (location: Location) => {\n    setEditingLocation(location);\n    setFormData({\n      name: location.name,\n      description: location.description || '',\n      building: location.building || '',\n      floor: location.floor || '',\n      room: location.room || '',\n      status: location.status,\n    });\n  };\n\n  const handleSubmit = () => {\n    if (editingLocation) {\n      updateLocationMutation.mutate({ \n        ...editingLocation,\n        ...formData \n      });\n    } else {\n      createLocationMutation.mutate(formData);\n    }\n  };\n\n  if (locationsLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"flex items-center gap-2\">\n                <MapPin className=\"h-5 w-5\" />\n                Locations\n              </CardTitle>\n              <CardDescription>\n                Manage organizational locations and facilities\n              </CardDescription>\n            </div>\n            {hasPermission('canManageLocations') && (\n              <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n                <DialogTrigger asChild>\n                  <Button>\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Location\n                  </Button>\n                </DialogTrigger>\n                <DialogContent>\n                  <DialogHeader>\n                    <DialogTitle>Create Location</DialogTitle>\n                    <DialogDescription>\n                      Add a new location to your organization\n                    </DialogDescription>\n                  </DialogHeader>\n                  <div className=\"grid gap-4 py-4\">\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"name\">Location Name</Label>\n                      <Input\n                        id=\"name\"\n                        value={formData.name}\n                        onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                        placeholder=\"Enter location name\"\n                      />\n                    </div>\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"description\">Description</Label>\n                      <Textarea\n                        id=\"description\"\n                        value={formData.description}\n                        onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                        placeholder=\"Enter location description (optional)\"\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div className=\"grid gap-2\">\n                        <Label htmlFor=\"building\">Building</Label>\n                        <Input\n                          id=\"building\"\n                          value={formData.building}\n                          onChange={(e) => setFormData(prev => ({ ...prev, building: e.target.value }))}\n                          placeholder=\"Building name\"\n                        />\n                      </div>\n                      <div className=\"grid gap-2\">\n                        <Label htmlFor=\"floor\">Floor</Label>\n                        <Input\n                          id=\"floor\"\n                          value={formData.floor}\n                          onChange={(e) => setFormData(prev => ({ ...prev, floor: e.target.value }))}\n                          placeholder=\"Floor number\"\n                        />\n                      </div>\n                    </div>\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"room\">Room</Label>\n                      <Input\n                        id=\"room\"\n                        value={formData.room}\n                        onChange={(e) => setFormData(prev => ({ ...prev, room: e.target.value }))}\n                        placeholder=\"Room number/name\"\n                      />\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <Switch\n                        id=\"status\"\n                        checked={formData.status === 'Active'}\n                        onCheckedChange={(checked) => setFormData(prev => ({ ...prev, status: checked ? 'Active' : 'Inactive' }))}\n                      />\n                      <Label htmlFor=\"status\">Active Location</Label>\n                    </div>\n                  </div>\n                  <DialogFooter>\n                    <Button variant=\"outline\" onClick={() => setIsCreateDialogOpen(false)}>\n                      Cancel\n                    </Button>\n                    <Button onClick={handleSubmit} disabled={!formData.name.trim()}>\n                      Create Location\n                    </Button>\n                  </DialogFooter>\n                </DialogContent>\n              </Dialog>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Name</TableHead>\n                <TableHead>Building</TableHead>\n                <TableHead>Floor</TableHead>\n                <TableHead>Room</TableHead>\n                <TableHead>Status</TableHead>\n                <TableHead>Created</TableHead>\n                {hasPermission('canManageLocations') && (\n                  <TableHead className=\"text-right\">Actions</TableHead>\n                )}\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {locations?.map((location) => (\n                <TableRow key={location.id}>\n                  <TableCell className=\"font-medium\">\n                    <div>\n                      <div>{location.name}</div>\n                      {location.description && (\n                        <div className=\"text-sm text-muted-foreground\">{location.description}</div>\n                      )}\n                    </div>\n                  </TableCell>\n                  <TableCell>{location.building || '-'}</TableCell>\n                  <TableCell>{location.floor || '-'}</TableCell>\n                  <TableCell>{location.room || '-'}</TableCell>\n                  <TableCell>\n                    <span className={`px-2 py-1 rounded text-xs ${\n                      location.status === 'Active' \n                        ? 'bg-green-100 text-green-800' \n                        : 'bg-gray-100 text-gray-800'\n                    }`}>\n                      {location.status}\n                    </span>\n                  </TableCell>\n                  <TableCell>\n                    {new Date(location.created_at).toLocaleDateString()}\n                  </TableCell>\n                  {hasPermission('canManageLocations') && (\n                    <TableCell className=\"text-right\">\n                      <div className=\"flex items-center justify-end gap-2\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => handleEdit(location)}\n                        >\n                          <Edit className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => deleteLocationMutation.mutate(location.id)}\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  )}\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          \n          {locations?.length === 0 && (\n            <div className=\"text-center py-8\">\n              <MapPin className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n              <p className=\"text-muted-foreground\">No locations found</p>\n              <p className=\"text-sm text-muted-foreground\">Create your first location to get started</p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Edit Dialog */}\n      {hasPermission('canManageLocations') && (\n        <Dialog open={!!editingLocation} onOpenChange={(open) => !open && setEditingLocation(null)}>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Edit Location</DialogTitle>\n              <DialogDescription>\n                Update location information\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"grid gap-4 py-4\">\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-name\">Location Name</Label>\n                <Input\n                  id=\"edit-name\"\n                  value={formData.name}\n                  onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                  placeholder=\"Enter location name\"\n                />\n              </div>\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-description\">Description</Label>\n                <Textarea\n                  id=\"edit-description\"\n                  value={formData.description}\n                  onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                  placeholder=\"Enter location description (optional)\"\n                />\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"grid gap-2\">\n                  <Label htmlFor=\"edit-building\">Building</Label>\n                  <Input\n                    id=\"edit-building\"\n                    value={formData.building}\n                    onChange={(e) => setFormData(prev => ({ ...prev, building: e.target.value }))}\n                    placeholder=\"Building name\"\n                  />\n                </div>\n                <div className=\"grid gap-2\">\n                  <Label htmlFor=\"edit-floor\">Floor</Label>\n                  <Input\n                    id=\"edit-floor\"\n                    value={formData.floor}\n                    onChange={(e) => setFormData(prev => ({ ...prev, floor: e.target.value }))}\n                    placeholder=\"Floor number\"\n                  />\n                </div>\n              </div>\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-room\">Room</Label>\n                <Input\n                  id=\"edit-room\"\n                  value={formData.room}\n                  onChange={(e) => setFormData(prev => ({ ...prev, room: e.target.value }))}\n                  placeholder=\"Room number/name\"\n                />\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Switch\n                  id=\"edit-status\"\n                  checked={formData.status === 'Active'}\n                  onCheckedChange={(checked) => setFormData(prev => ({ ...prev, status: checked ? 'Active' : 'Inactive' }))}\n                />\n                <Label htmlFor=\"edit-status\">Active Location</Label>\n              </div>\n            </div>\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setEditingLocation(null)}>\n                Cancel\n              </Button>\n              <Button onClick={handleSubmit} disabled={!formData.name.trim()}>\n                Update Location\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  );\n};","import React, { useState } from 'react';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { toast } from '@/hooks/use-toast';\nimport { Loader2 } from 'lucide-react';\n\ninterface AddOrganisationCertificateDialogProps {\n  isOpen: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSuccess?: () => void;\n}\n\nconst AddOrganisationCertificateDialog: React.FC<AddOrganisationCertificateDialogProps> = ({\n  isOpen,\n  onOpenChange,\n  onSuccess,\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    type: 'Certificate',\n    name: '',\n    issued_by: '',\n    date_acquired: '',\n    expiry_date: '',\n    credential_id: '',\n    status: 'Valid',\n  });\n\n  const resetForm = () => {\n    setFormData({\n      type: 'Certificate',\n      name: '',\n      issued_by: '',\n      date_acquired: '',\n      expiry_date: '',\n      credential_id: '',\n      status: 'Valid',\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    setLoading(true);\n    \n    try {\n      // Get current user\n      const { data: { user }, error: userError } = await supabase.auth.getUser();\n      \n      if (userError || !user) {\n        throw new Error('User not authenticated');\n      }\n\n      const certificateData = {\n        user_id: user.id,\n        type: formData.type,\n        name: formData.name,\n        issued_by: formData.issued_by,\n        date_acquired: formData.date_acquired,\n        expiry_date: formData.expiry_date || null,\n        credential_id: formData.credential_id || null,\n        status: formData.status,\n        org_cert: true, // This is an organisation certificate\n      };\n      \n      const { error } = await supabase\n        .from('certificates')\n        .insert([certificateData]);\n      \n      if (error) throw error;\n      \n      toast({\n        title: \"Organisation certificate added\",\n        description: \"Certificate has been successfully added to the organisation.\",\n      });\n      \n      onOpenChange(false);\n      resetForm();\n      onSuccess?.();\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Add Organisation Certificate</DialogTitle>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"type\">Type *</Label>\n            <Select value={formData.type} onValueChange={(value) => setFormData({ ...formData, type: value })}>\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"Certificate\">Certificate</SelectItem>\n                <SelectItem value=\"Document\">Document</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div>\n            <Label htmlFor=\"name\">Name *</Label>\n            <Input\n              id=\"name\"\n              value={formData.name}\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n              placeholder=\"e.g., ISO 27001, SOC 2, GDPR Compliance\"\n              required\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"issued_by\">Issued By *</Label>\n            <Input\n              id=\"issued_by\"\n              value={formData.issued_by}\n              onChange={(e) => setFormData({ ...formData, issued_by: e.target.value })}\n              placeholder=\"e.g., BSI, AICPA, TÜV SÜD\"\n              required\n            />\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"date_acquired\">Date Acquired *</Label>\n              <Input\n                id=\"date_acquired\"\n                type=\"date\"\n                value={formData.date_acquired}\n                onChange={(e) => setFormData({ ...formData, date_acquired: e.target.value })}\n                required\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"expiry_date\">Expiry Date</Label>\n              <Input\n                id=\"expiry_date\"\n                type=\"date\"\n                value={formData.expiry_date}\n                onChange={(e) => setFormData({ ...formData, expiry_date: e.target.value })}\n              />\n            </div>\n          </div>\n\n          <div>\n            <Label htmlFor=\"credential_id\">Credential ID</Label>\n            <Input\n              id=\"credential_id\"\n              value={formData.credential_id}\n              onChange={(e) => setFormData({ ...formData, credential_id: e.target.value })}\n              placeholder=\"Certificate or credential identifier\"\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"status\">Status</Label>\n            <Select value={formData.status} onValueChange={(value) => setFormData({ ...formData, status: value })}>\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"Valid\">Valid</SelectItem>\n                <SelectItem value=\"Expired\">Expired</SelectItem>\n                <SelectItem value=\"Pending\">Pending</SelectItem>\n                <SelectItem value=\"Revoked\">Revoked</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"flex gap-2 justify-end\">\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={loading || !formData.name || !formData.issued_by || !formData.date_acquired}>\n              {loading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : \"Add Certificate\"}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AddOrganisationCertificateDialog;","import React, { useState, useEffect } from \"react\";\nimport { Award, Calendar, Building, FileText, User, Plus } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport AddOrganisationCertificateDialog from \"./admin/AddOrganisationCertificateDialog\";\n\ninterface OrgCertificate {\n  id: string;\n  type?: string;\n  name: string;\n  issued_by: string;\n  date_acquired: string;\n  expiry_date: string | null;\n  credential_id: string | null;\n  status: string;\n  org_cert?: boolean;\n  user_id: string;\n  created_at: string;\n  created_by?: string;\n}\n\ninterface UserProfile {\n  id: string;\n  full_name: string;\n  username: string;\n}\n\nconst OrganisationCertificates: React.FC = () => {\n  const [certificates, setCertificates] = useState<OrgCertificate[]>([]);\n  const [userProfiles, setUserProfiles] = useState<{ [key: string]: UserProfile }>({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);\n\n  const formatDate = (dateString: string | null) => {\n    if (!dateString) return \"No expiry\";\n    return new Date(dateString).toLocaleDateString();\n  };\n\n  const getTypeIcon = (type?: string) => {\n    return type === 'Document' ? <FileText className=\"h-5 w-5 text-primary flex-shrink-0\" /> : <Award className=\"h-5 w-5 text-primary flex-shrink-0\" />;\n  };\n\n  const getTypeColor = (type?: string) => {\n    return type === 'Document' ? 'bg-blue-500' : 'bg-purple-500';\n  };\n\n  const getValidityStatus = (expiryDate: string | null) => {\n    if (!expiryDate) return 'Valid';\n    \n    const expiry = new Date(expiryDate);\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    \n    if (expiry < today) {\n      return 'Expired';\n    } else if (expiry <= new Date(today.getTime() + 30 * 24 * 60 * 60 * 1000)) {\n      return 'Expiring Soon';\n    } else {\n      return 'Valid';\n    }\n  };\n\n  const getValidityStatusColor = (status: string) => {\n    switch (status) {\n      case 'Valid': return 'bg-green-500';\n      case 'Expired': return 'bg-red-500';\n      case 'Expiring Soon': return 'bg-yellow-500';\n      default: return 'bg-blue-500';\n    }\n  };\n\n  const getUserDisplayName = (userId: string) => {\n    const profile = userProfiles[userId];\n    return profile?.full_name || profile?.username || 'Unknown User';\n  };\n\n  const fetchOrganisationCertificates = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      // Fetch certificates where org_cert is TRUE\n      const { data: certificatesData, error: certificatesError } = await supabase\n        .from('certificates')\n        .select('*')\n        .eq('org_cert', true)\n        .order('created_at', { ascending: false });\n\n      if (certificatesError) throw certificatesError;\n\n      // Get unique user IDs to fetch profile information\n      const userIds = [...new Set(certificatesData?.map(cert => cert.user_id) || [])];\n      \n      if (userIds.length > 0) {\n        const { data: profilesData, error: profilesError } = await supabase\n          .from('profiles')\n          .select('id, full_name, username')\n          .in('id', userIds);\n\n        if (profilesError) throw profilesError;\n\n        // Create a map of user profiles\n        const profilesMap = (profilesData || []).reduce((acc, profile) => {\n          acc[profile.id] = profile;\n          return acc;\n        }, {} as { [key: string]: UserProfile });\n\n        setUserProfiles(profilesMap);\n      }\n\n      setCertificates(certificatesData || []);\n    } catch (error: any) {\n      setError(error.message);\n      console.error('Error fetching organisation certificates:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchOrganisationCertificates();\n  }, []);\n\n  if (loading) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Award className=\"h-5 w-5\" />\n            Organisation Certificates\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex items-center justify-center py-8\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (error) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Award className=\"h-5 w-5\" />\n            Organisation Certificates\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-red-500\">Error loading certificates: {error}</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-2\">\n            <Award className=\"h-5 w-5\" />\n            Organisation Certificates\n          </CardTitle>\n          <Button onClick={() => setIsAddDialogOpen(true)} size=\"sm\">\n            <Plus className=\"h-4 w-4 mr-2\" />\n            Add Certificate\n          </Button>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-4\">\n          {certificates.length === 0 ? (\n            <p className=\"text-muted-foreground text-center py-8\">No organisation certificates found</p>\n          ) : (\n            certificates.map((cert) => {\n              const validityStatus = getValidityStatus(cert.expiry_date);\n              \n              return (\n                <div key={cert.id} className=\"border rounded-lg p-4\">\n                  {/* Top line with name and type badge */}\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <div className=\"flex items-center gap-3 min-w-0 flex-1\">\n                      {getTypeIcon(cert.type)}\n                      <h3 className=\"font-semibold text-lg truncate\">{cert.name}</h3>\n                    </div>\n                    \n                    <div className=\"flex items-center flex-shrink-0\">\n                      <Badge className={`${getTypeColor(cert.type)} text-white text-sm px-2 py-1`}>\n                        {cert.type || 'Certificate'}\n                      </Badge>\n                    </div>\n                  </div>\n                  \n                  {/* Main information row - Issuer, ID, Issued, Expires */}\n                  <div className=\"grid grid-cols-4 gap-4 text-sm ml-8\">\n                    <div className=\"flex items-center gap-2\">\n                      <Building className=\"h-4 w-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">Issuer:</span>\n                      <span className=\"font-medium text-foreground\">{cert.issued_by}</span>\n                    </div>\n                    \n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-muted-foreground\">ID:</span>\n                      <span className=\"font-medium\">{cert.credential_id || 'N/A'}</span>\n                    </div>\n                    \n                    <div className=\"flex items-center gap-2\">\n                      <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">Issued:</span>\n                      <span className=\"font-medium\">{formatDate(cert.date_acquired)}</span>\n                    </div>\n                    \n                    <div className=\"flex items-center gap-2\">\n                      <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">Expires:</span>\n                      <span className=\"font-medium\">{formatDate(cert.expiry_date)}</span>\n                    </div>\n                  </div>\n                  \n                  {/* Second row with Added by and Status */}\n                  <div className=\"flex items-center justify-between ml-8 mt-2\">\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <User className=\"h-4 w-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">Added by:</span>\n                      <span className=\"font-medium\">{getUserDisplayName(cert.user_id)}</span>\n                    </div>\n                    \n                    <div className=\"flex items-center\">\n                      <Badge className={`${getValidityStatusColor(validityStatus)} text-white`}>\n                        {validityStatus}\n                      </Badge>\n                    </div>\n                  </div>\n                </div>\n              );\n            })\n          )}\n        </div>\n        \n        <AddOrganisationCertificateDialog\n          isOpen={isAddDialogOpen}\n          onOpenChange={setIsAddDialogOpen}\n          onSuccess={() => {\n            fetchOrganisationCertificates();\n          }}\n        />\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default OrganisationCertificates;","\"use client\";import o,{forwardRef as fe,isValidElement as xt}from\"react\";import vt from\"react-dom\";import E from\"react\";var jt=n=>{switch(n){case\"success\":return ee;case\"info\":return ae;case\"warning\":return oe;case\"error\":return se;default:return null}},te=Array(12).fill(0),Yt=({visible:n,className:e})=>E.createElement(\"div\",{className:[\"sonner-loading-wrapper\",e].filter(Boolean).join(\" \"),\"data-visible\":n},E.createElement(\"div\",{className:\"sonner-spinner\"},te.map((t,a)=>E.createElement(\"div\",{className:\"sonner-loading-bar\",key:`spinner-bar-${a}`})))),ee=E.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",fill:\"currentColor\",height:\"20\",width:\"20\"},E.createElement(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z\",clipRule:\"evenodd\"})),oe=E.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",fill:\"currentColor\",height:\"20\",width:\"20\"},E.createElement(\"path\",{fillRule:\"evenodd\",d:\"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z\",clipRule:\"evenodd\"})),ae=E.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",fill:\"currentColor\",height:\"20\",width:\"20\"},E.createElement(\"path\",{fillRule:\"evenodd\",d:\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z\",clipRule:\"evenodd\"})),se=E.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",fill:\"currentColor\",height:\"20\",width:\"20\"},E.createElement(\"path\",{fillRule:\"evenodd\",d:\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z\",clipRule:\"evenodd\"})),Ot=E.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"12\",height:\"12\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"1.5\",strokeLinecap:\"round\",strokeLinejoin:\"round\"},E.createElement(\"line\",{x1:\"18\",y1:\"6\",x2:\"6\",y2:\"18\"}),E.createElement(\"line\",{x1:\"6\",y1:\"6\",x2:\"18\",y2:\"18\"}));import $t from\"react\";var Ft=()=>{let[n,e]=$t.useState(document.hidden);return $t.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener(\"visibilitychange\",t),()=>window.removeEventListener(\"visibilitychange\",t)},[]),n};import re from\"react\";var bt=1,yt=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)});this.publish=e=>{this.subscribers.forEach(t=>t(e))};this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]};this.create=e=>{var S;let{message:t,...a}=e,u=typeof(e==null?void 0:e.id)==\"number\"||((S=e.id)==null?void 0:S.length)>0?e.id:bt++,f=this.toasts.find(g=>g.id===u),w=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(u)&&this.dismissedToasts.delete(u),f?this.toasts=this.toasts.map(g=>g.id===u?(this.publish({...g,...e,id:u,title:t}),{...g,...e,id:u,dismissible:w,title:t}):g):this.addToast({title:t,...a,dismissible:w,id:u}),u};this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(a=>a({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e);this.message=(e,t)=>this.create({...t,message:e});this.error=(e,t)=>this.create({...t,message:e,type:\"error\"});this.success=(e,t)=>this.create({...t,type:\"success\",message:e});this.info=(e,t)=>this.create({...t,type:\"info\",message:e});this.warning=(e,t)=>this.create({...t,type:\"warning\",message:e});this.loading=(e,t)=>this.create({...t,type:\"loading\",message:e});this.promise=(e,t)=>{if(!t)return;let a;t.loading!==void 0&&(a=this.create({...t,promise:e,type:\"loading\",message:t.loading,description:typeof t.description!=\"function\"?t.description:void 0}));let u=e instanceof Promise?e:e(),f=a!==void 0,w,S=u.then(async i=>{if(w=[\"resolve\",i],re.isValidElement(i))f=!1,this.create({id:a,type:\"default\",message:i});else if(ie(i)&&!i.ok){f=!1;let T=typeof t.error==\"function\"?await t.error(`HTTP error! status: ${i.status}`):t.error,F=typeof t.description==\"function\"?await t.description(`HTTP error! status: ${i.status}`):t.description;this.create({id:a,type:\"error\",message:T,description:F})}else if(t.success!==void 0){f=!1;let T=typeof t.success==\"function\"?await t.success(i):t.success,F=typeof t.description==\"function\"?await t.description(i):t.description;this.create({id:a,type:\"success\",message:T,description:F})}}).catch(async i=>{if(w=[\"reject\",i],t.error!==void 0){f=!1;let D=typeof t.error==\"function\"?await t.error(i):t.error,T=typeof t.description==\"function\"?await t.description(i):t.description;this.create({id:a,type:\"error\",message:D,description:T})}}).finally(()=>{var i;f&&(this.dismiss(a),a=void 0),(i=t.finally)==null||i.call(t)}),g=()=>new Promise((i,D)=>S.then(()=>w[0]===\"reject\"?D(w[1]):i(w[1])).catch(D));return typeof a!=\"string\"&&typeof a!=\"number\"?{unwrap:g}:Object.assign(a,{unwrap:g})};this.custom=(e,t)=>{let a=(t==null?void 0:t.id)||bt++;return this.create({jsx:e(a),id:a,...t}),a};this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id));this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},v=new yt,ne=(n,e)=>{let t=(e==null?void 0:e.id)||bt++;return v.addToast({title:n,...e,id:t}),t},ie=n=>n&&typeof n==\"object\"&&\"ok\"in n&&typeof n.ok==\"boolean\"&&\"status\"in n&&typeof n.status==\"number\",le=ne,ce=()=>v.toasts,de=()=>v.getActiveToasts(),ue=Object.assign(le,{success:v.success,info:v.info,warning:v.warning,error:v.error,custom:v.custom,message:v.message,promise:v.promise,dismiss:v.dismiss,loading:v.loading},{getHistory:ce,getToasts:de});function wt(n,{insertAt:e}={}){if(!n||typeof document==\"undefined\")return;let t=document.head||document.getElementsByTagName(\"head\")[0],a=document.createElement(\"style\");a.type=\"text/css\",e===\"top\"&&t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}wt(`:where(html[dir=\"ltr\"]),:where([data-sonner-toaster][dir=\"ltr\"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir=\"rtl\"]),:where([data-sonner-toaster][dir=\"rtl\"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted=\"true\"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted=\"true\"]){transform:none}}:where([data-sonner-toaster][data-x-position=\"right\"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position=\"left\"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position=\"center\"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position=\"top\"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position=\"bottom\"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled=\"true\"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position=\"top\"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position=\"bottom\"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise=\"true\"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme=\"dark\"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled=\"true\"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping=\"true\"]):before{content:\"\";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position=\"top\"][data-swiping=\"true\"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position=\"bottom\"][data-swiping=\"true\"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping=\"false\"][data-removed=\"true\"]):before{content:\"\";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:\"\";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted=\"true\"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded=\"false\"][data-front=\"false\"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded=\"false\"][data-front=\"false\"][data-styled=\"true\"])>*{opacity:0}:where([data-sonner-toast][data-visible=\"false\"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted=\"true\"][data-expanded=\"true\"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed=\"true\"][data-front=\"true\"][data-swipe-out=\"false\"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed=\"true\"][data-front=\"false\"][data-swipe-out=\"false\"][data-expanded=\"true\"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed=\"true\"][data-front=\"false\"][data-swipe-out=\"false\"][data-expanded=\"false\"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed=\"true\"][data-front=\"false\"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n`);function tt(n){return n.label!==void 0}var pe=3,me=\"32px\",ge=\"16px\",Wt=4e3,he=356,be=14,ye=20,we=200;function M(...n){return n.filter(Boolean).join(\" \")}function xe(n){let[e,t]=n.split(\"-\"),a=[];return e&&a.push(e),t&&a.push(t),a}var ve=n=>{var Dt,Pt,Nt,Bt,Ct,kt,It,Mt,Ht,At,Lt;let{invert:e,toast:t,unstyled:a,interacting:u,setHeights:f,visibleToasts:w,heights:S,index:g,toasts:i,expanded:D,removeToast:T,defaultRichColors:F,closeButton:et,style:ut,cancelButtonStyle:ft,actionButtonStyle:l,className:ot=\"\",descriptionClassName:at=\"\",duration:X,position:st,gap:pt,loadingIcon:rt,expandByDefault:B,classNames:s,icons:P,closeButtonAriaLabel:nt=\"Close toast\",pauseWhenPageIsHidden:it}=n,[Y,C]=o.useState(null),[lt,J]=o.useState(null),[W,H]=o.useState(!1),[A,mt]=o.useState(!1),[L,z]=o.useState(!1),[ct,d]=o.useState(!1),[h,y]=o.useState(!1),[R,j]=o.useState(0),[p,_]=o.useState(0),O=o.useRef(t.duration||X||Wt),G=o.useRef(null),k=o.useRef(null),Vt=g===0,Ut=g+1<=w,N=t.type,V=t.dismissible!==!1,Kt=t.className||\"\",Xt=t.descriptionClassName||\"\",dt=o.useMemo(()=>S.findIndex(r=>r.toastId===t.id)||0,[S,t.id]),Jt=o.useMemo(()=>{var r;return(r=t.closeButton)!=null?r:et},[t.closeButton,et]),Tt=o.useMemo(()=>t.duration||X||Wt,[t.duration,X]),gt=o.useRef(0),U=o.useRef(0),St=o.useRef(0),K=o.useRef(null),[Gt,Qt]=st.split(\"-\"),Rt=o.useMemo(()=>S.reduce((r,m,c)=>c>=dt?r:r+m.height,0),[S,dt]),Et=Ft(),qt=t.invert||e,ht=N===\"loading\";U.current=o.useMemo(()=>dt*pt+Rt,[dt,Rt]),o.useEffect(()=>{O.current=Tt},[Tt]),o.useEffect(()=>{H(!0)},[]),o.useEffect(()=>{let r=k.current;if(r){let m=r.getBoundingClientRect().height;return _(m),f(c=>[{toastId:t.id,height:m,position:t.position},...c]),()=>f(c=>c.filter(b=>b.toastId!==t.id))}},[f,t.id]),o.useLayoutEffect(()=>{if(!W)return;let r=k.current,m=r.style.height;r.style.height=\"auto\";let c=r.getBoundingClientRect().height;r.style.height=m,_(c),f(b=>b.find(x=>x.toastId===t.id)?b.map(x=>x.toastId===t.id?{...x,height:c}:x):[{toastId:t.id,height:c,position:t.position},...b])},[W,t.title,t.description,f,t.id]);let $=o.useCallback(()=>{mt(!0),j(U.current),f(r=>r.filter(m=>m.toastId!==t.id)),setTimeout(()=>{T(t)},we)},[t,T,f,U]);o.useEffect(()=>{if(t.promise&&N===\"loading\"||t.duration===1/0||t.type===\"loading\")return;let r;return D||u||it&&Et?(()=>{if(St.current<gt.current){let b=new Date().getTime()-gt.current;O.current=O.current-b}St.current=new Date().getTime()})():(()=>{O.current!==1/0&&(gt.current=new Date().getTime(),r=setTimeout(()=>{var b;(b=t.onAutoClose)==null||b.call(t,t),$()},O.current))})(),()=>clearTimeout(r)},[D,u,t,N,it,Et,$]),o.useEffect(()=>{t.delete&&$()},[$,t.delete]);function Zt(){var r,m,c;return P!=null&&P.loading?o.createElement(\"div\",{className:M(s==null?void 0:s.loader,(r=t==null?void 0:t.classNames)==null?void 0:r.loader,\"sonner-loader\"),\"data-visible\":N===\"loading\"},P.loading):rt?o.createElement(\"div\",{className:M(s==null?void 0:s.loader,(m=t==null?void 0:t.classNames)==null?void 0:m.loader,\"sonner-loader\"),\"data-visible\":N===\"loading\"},rt):o.createElement(Yt,{className:M(s==null?void 0:s.loader,(c=t==null?void 0:t.classNames)==null?void 0:c.loader),visible:N===\"loading\"})}return o.createElement(\"li\",{tabIndex:0,ref:k,className:M(ot,Kt,s==null?void 0:s.toast,(Dt=t==null?void 0:t.classNames)==null?void 0:Dt.toast,s==null?void 0:s.default,s==null?void 0:s[N],(Pt=t==null?void 0:t.classNames)==null?void 0:Pt[N]),\"data-sonner-toast\":\"\",\"data-rich-colors\":(Nt=t.richColors)!=null?Nt:F,\"data-styled\":!(t.jsx||t.unstyled||a),\"data-mounted\":W,\"data-promise\":!!t.promise,\"data-swiped\":h,\"data-removed\":A,\"data-visible\":Ut,\"data-y-position\":Gt,\"data-x-position\":Qt,\"data-index\":g,\"data-front\":Vt,\"data-swiping\":L,\"data-dismissible\":V,\"data-type\":N,\"data-invert\":qt,\"data-swipe-out\":ct,\"data-swipe-direction\":lt,\"data-expanded\":!!(D||B&&W),style:{\"--index\":g,\"--toasts-before\":g,\"--z-index\":i.length-g,\"--offset\":`${A?R:U.current}px`,\"--initial-height\":B?\"auto\":`${p}px`,...ut,...t.style},onDragEnd:()=>{z(!1),C(null),K.current=null},onPointerDown:r=>{ht||!V||(G.current=new Date,j(U.current),r.target.setPointerCapture(r.pointerId),r.target.tagName!==\"BUTTON\"&&(z(!0),K.current={x:r.clientX,y:r.clientY}))},onPointerUp:()=>{var x,Q,q,Z;if(ct||!V)return;K.current=null;let r=Number(((x=k.current)==null?void 0:x.style.getPropertyValue(\"--swipe-amount-x\").replace(\"px\",\"\"))||0),m=Number(((Q=k.current)==null?void 0:Q.style.getPropertyValue(\"--swipe-amount-y\").replace(\"px\",\"\"))||0),c=new Date().getTime()-((q=G.current)==null?void 0:q.getTime()),b=Y===\"x\"?r:m,I=Math.abs(b)/c;if(Math.abs(b)>=ye||I>.11){j(U.current),(Z=t.onDismiss)==null||Z.call(t,t),J(Y===\"x\"?r>0?\"right\":\"left\":m>0?\"down\":\"up\"),$(),d(!0),y(!1);return}z(!1),C(null)},onPointerMove:r=>{var Q,q,Z,zt;if(!K.current||!V||((Q=window.getSelection())==null?void 0:Q.toString().length)>0)return;let c=r.clientY-K.current.y,b=r.clientX-K.current.x,I=(q=n.swipeDirections)!=null?q:xe(st);!Y&&(Math.abs(b)>1||Math.abs(c)>1)&&C(Math.abs(b)>Math.abs(c)?\"x\":\"y\");let x={x:0,y:0};Y===\"y\"?(I.includes(\"top\")||I.includes(\"bottom\"))&&(I.includes(\"top\")&&c<0||I.includes(\"bottom\")&&c>0)&&(x.y=c):Y===\"x\"&&(I.includes(\"left\")||I.includes(\"right\"))&&(I.includes(\"left\")&&b<0||I.includes(\"right\")&&b>0)&&(x.x=b),(Math.abs(x.x)>0||Math.abs(x.y)>0)&&y(!0),(Z=k.current)==null||Z.style.setProperty(\"--swipe-amount-x\",`${x.x}px`),(zt=k.current)==null||zt.style.setProperty(\"--swipe-amount-y\",`${x.y}px`)}},Jt&&!t.jsx?o.createElement(\"button\",{\"aria-label\":nt,\"data-disabled\":ht,\"data-close-button\":!0,onClick:ht||!V?()=>{}:()=>{var r;$(),(r=t.onDismiss)==null||r.call(t,t)},className:M(s==null?void 0:s.closeButton,(Bt=t==null?void 0:t.classNames)==null?void 0:Bt.closeButton)},(Ct=P==null?void 0:P.close)!=null?Ct:Ot):null,t.jsx||xt(t.title)?t.jsx?t.jsx:typeof t.title==\"function\"?t.title():t.title:o.createElement(o.Fragment,null,N||t.icon||t.promise?o.createElement(\"div\",{\"data-icon\":\"\",className:M(s==null?void 0:s.icon,(kt=t==null?void 0:t.classNames)==null?void 0:kt.icon)},t.promise||t.type===\"loading\"&&!t.icon?t.icon||Zt():null,t.type!==\"loading\"?t.icon||(P==null?void 0:P[N])||jt(N):null):null,o.createElement(\"div\",{\"data-content\":\"\",className:M(s==null?void 0:s.content,(It=t==null?void 0:t.classNames)==null?void 0:It.content)},o.createElement(\"div\",{\"data-title\":\"\",className:M(s==null?void 0:s.title,(Mt=t==null?void 0:t.classNames)==null?void 0:Mt.title)},typeof t.title==\"function\"?t.title():t.title),t.description?o.createElement(\"div\",{\"data-description\":\"\",className:M(at,Xt,s==null?void 0:s.description,(Ht=t==null?void 0:t.classNames)==null?void 0:Ht.description)},typeof t.description==\"function\"?t.description():t.description):null),xt(t.cancel)?t.cancel:t.cancel&&tt(t.cancel)?o.createElement(\"button\",{\"data-button\":!0,\"data-cancel\":!0,style:t.cancelButtonStyle||ft,onClick:r=>{var m,c;tt(t.cancel)&&V&&((c=(m=t.cancel).onClick)==null||c.call(m,r),$())},className:M(s==null?void 0:s.cancelButton,(At=t==null?void 0:t.classNames)==null?void 0:At.cancelButton)},t.cancel.label):null,xt(t.action)?t.action:t.action&&tt(t.action)?o.createElement(\"button\",{\"data-button\":!0,\"data-action\":!0,style:t.actionButtonStyle||l,onClick:r=>{var m,c;tt(t.action)&&((c=(m=t.action).onClick)==null||c.call(m,r),!r.defaultPrevented&&$())},className:M(s==null?void 0:s.actionButton,(Lt=t==null?void 0:t.classNames)==null?void 0:Lt.actionButton)},t.action.label):null))};function _t(){if(typeof window==\"undefined\"||typeof document==\"undefined\")return\"ltr\";let n=document.documentElement.getAttribute(\"dir\");return n===\"auto\"||!n?window.getComputedStyle(document.documentElement).direction:n}function Te(n,e){let t={};return[n,e].forEach((a,u)=>{let f=u===1,w=f?\"--mobile-offset\":\"--offset\",S=f?ge:me;function g(i){[\"top\",\"right\",\"bottom\",\"left\"].forEach(D=>{t[`${w}-${D}`]=typeof i==\"number\"?`${i}px`:i})}typeof a==\"number\"||typeof a==\"string\"?g(a):typeof a==\"object\"?[\"top\",\"right\",\"bottom\",\"left\"].forEach(i=>{a[i]===void 0?t[`${w}-${i}`]=S:t[`${w}-${i}`]=typeof a[i]==\"number\"?`${a[i]}px`:a[i]}):g(S)}),t}function Oe(){let[n,e]=o.useState([]);return o.useEffect(()=>v.subscribe(t=>{if(t.dismiss){setTimeout(()=>{vt.flushSync(()=>{e(a=>a.filter(u=>u.id!==t.id))})});return}setTimeout(()=>{vt.flushSync(()=>{e(a=>{let u=a.findIndex(f=>f.id===t.id);return u!==-1?[...a.slice(0,u),{...a[u],...t},...a.slice(u+1)]:[t,...a]})})})}),[]),{toasts:n}}var $e=fe(function(e,t){let{invert:a,position:u=\"bottom-right\",hotkey:f=[\"altKey\",\"KeyT\"],expand:w,closeButton:S,className:g,offset:i,mobileOffset:D,theme:T=\"light\",richColors:F,duration:et,style:ut,visibleToasts:ft=pe,toastOptions:l,dir:ot=_t(),gap:at=be,loadingIcon:X,icons:st,containerAriaLabel:pt=\"Notifications\",pauseWhenPageIsHidden:rt}=e,[B,s]=o.useState([]),P=o.useMemo(()=>Array.from(new Set([u].concat(B.filter(d=>d.position).map(d=>d.position)))),[B,u]),[nt,it]=o.useState([]),[Y,C]=o.useState(!1),[lt,J]=o.useState(!1),[W,H]=o.useState(T!==\"system\"?T:typeof window!=\"undefined\"&&window.matchMedia&&window.matchMedia(\"(prefers-color-scheme: dark)\").matches?\"dark\":\"light\"),A=o.useRef(null),mt=f.join(\"+\").replace(/Key/g,\"\").replace(/Digit/g,\"\"),L=o.useRef(null),z=o.useRef(!1),ct=o.useCallback(d=>{s(h=>{var y;return(y=h.find(R=>R.id===d.id))!=null&&y.delete||v.dismiss(d.id),h.filter(({id:R})=>R!==d.id)})},[]);return o.useEffect(()=>v.subscribe(d=>{if(d.dismiss){s(h=>h.map(y=>y.id===d.id?{...y,delete:!0}:y));return}setTimeout(()=>{vt.flushSync(()=>{s(h=>{let y=h.findIndex(R=>R.id===d.id);return y!==-1?[...h.slice(0,y),{...h[y],...d},...h.slice(y+1)]:[d,...h]})})})}),[]),o.useEffect(()=>{if(T!==\"system\"){H(T);return}if(T===\"system\"&&(window.matchMedia&&window.matchMedia(\"(prefers-color-scheme: dark)\").matches?H(\"dark\"):H(\"light\")),typeof window==\"undefined\")return;let d=window.matchMedia(\"(prefers-color-scheme: dark)\");try{d.addEventListener(\"change\",({matches:h})=>{H(h?\"dark\":\"light\")})}catch(h){d.addListener(({matches:y})=>{try{H(y?\"dark\":\"light\")}catch(R){console.error(R)}})}},[T]),o.useEffect(()=>{B.length<=1&&C(!1)},[B]),o.useEffect(()=>{let d=h=>{var R,j;f.every(p=>h[p]||h.code===p)&&(C(!0),(R=A.current)==null||R.focus()),h.code===\"Escape\"&&(document.activeElement===A.current||(j=A.current)!=null&&j.contains(document.activeElement))&&C(!1)};return document.addEventListener(\"keydown\",d),()=>document.removeEventListener(\"keydown\",d)},[f]),o.useEffect(()=>{if(A.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,z.current=!1)}},[A.current]),o.createElement(\"section\",{ref:t,\"aria-label\":`${pt} ${mt}`,tabIndex:-1,\"aria-live\":\"polite\",\"aria-relevant\":\"additions text\",\"aria-atomic\":\"false\",suppressHydrationWarning:!0},P.map((d,h)=>{var j;let[y,R]=d.split(\"-\");return B.length?o.createElement(\"ol\",{key:d,dir:ot===\"auto\"?_t():ot,tabIndex:-1,ref:A,className:g,\"data-sonner-toaster\":!0,\"data-theme\":W,\"data-y-position\":y,\"data-lifted\":Y&&B.length>1&&!w,\"data-x-position\":R,style:{\"--front-toast-height\":`${((j=nt[0])==null?void 0:j.height)||0}px`,\"--width\":`${he}px`,\"--gap\":`${at}px`,...ut,...Te(i,D)},onBlur:p=>{z.current&&!p.currentTarget.contains(p.relatedTarget)&&(z.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:p=>{p.target instanceof HTMLElement&&p.target.dataset.dismissible===\"false\"||z.current||(z.current=!0,L.current=p.relatedTarget)},onMouseEnter:()=>C(!0),onMouseMove:()=>C(!0),onMouseLeave:()=>{lt||C(!1)},onDragEnd:()=>C(!1),onPointerDown:p=>{p.target instanceof HTMLElement&&p.target.dataset.dismissible===\"false\"||J(!0)},onPointerUp:()=>J(!1)},B.filter(p=>!p.position&&h===0||p.position===d).map((p,_)=>{var O,G;return o.createElement(ve,{key:p.id,icons:st,index:_,toast:p,defaultRichColors:F,duration:(O=l==null?void 0:l.duration)!=null?O:et,className:l==null?void 0:l.className,descriptionClassName:l==null?void 0:l.descriptionClassName,invert:a,visibleToasts:ft,closeButton:(G=l==null?void 0:l.closeButton)!=null?G:S,interacting:lt,position:d,style:l==null?void 0:l.style,unstyled:l==null?void 0:l.unstyled,classNames:l==null?void 0:l.classNames,cancelButtonStyle:l==null?void 0:l.cancelButtonStyle,actionButtonStyle:l==null?void 0:l.actionButtonStyle,removeToast:ct,toasts:B.filter(k=>k.position==p.position),heights:nt.filter(k=>k.position==p.position),setHeights:it,expandByDefault:w,gap:at,loadingIcon:X,expanded:Y,pauseWhenPageIsHidden:rt,swipeDirections:e.swipeDirections})})):null}))});export{$e as Toaster,ue as toast,Oe as useSonner};\n//# sourceMappingURL=index.mjs.map","import React, { useState, useEffect } from 'react';\nimport { Check, ChevronsUpDown, User } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { Button } from '@/components/ui/button';\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from '@/components/ui/command';\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from '@/components/ui/popover';\nimport { supabase } from '@/integrations/supabase/client';\n\ninterface Profile {\n  id: string;\n  full_name: string;\n  username: string;\n  email?: string;\n}\n\ninterface SearchableProfileFieldProps {\n  value?: string;\n  onSelect: (profile: Profile | null) => void;\n  placeholder?: string;\n  disabled?: boolean;\n}\n\nconst SearchableProfileField: React.FC<SearchableProfileFieldProps> = ({\n  value,\n  onSelect,\n  placeholder = \"Select profile...\",\n  disabled = false\n}) => {\n  const [open, setOpen] = useState(false);\n  const [profiles, setProfiles] = useState<Profile[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n\n  useEffect(() => {\n    fetchProfiles();\n  }, []);\n\n  const fetchProfiles = async () => {\n    try {\n      setLoading(true);\n      const { data, error } = await supabase\n        .from('profiles')\n        .select('id, full_name, username')\n        .not('full_name', 'is', null)\n        .order('full_name');\n\n      if (error) throw error;\n      setProfiles(data || []);\n    } catch (error) {\n      console.error('Error fetching profiles:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filteredProfiles = profiles.filter(profile =>\n    profile.full_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    profile.username?.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const selectedProfile = profiles.find(profile => profile.full_name === value);\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"outline\"\n          role=\"combobox\"\n          aria-expanded={open}\n          className=\"w-full justify-between\"\n          disabled={disabled}\n        >\n          {value ? (\n            <div className=\"flex items-center gap-2\">\n              <User className=\"h-4 w-4\" />\n              {value}\n            </div>\n          ) : (\n            placeholder\n          )}\n          <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-full p-0\">\n        <Command>\n          <CommandInput \n            placeholder=\"Search profiles...\" \n            value={searchTerm}\n            onValueChange={setSearchTerm}\n          />\n          <CommandList>\n            <CommandEmpty>\n              {loading ? \"Loading...\" : \"No profiles found.\"}\n            </CommandEmpty>\n            <CommandGroup>\n              {value && (\n                <CommandItem\n                  value=\"\"\n                  onSelect={() => {\n                    onSelect(null);\n                    setOpen(false);\n                  }}\n                >\n                  <Check\n                    className={cn(\n                      \"mr-2 h-4 w-4\",\n                      !value ? \"opacity-100\" : \"opacity-0\"\n                    )}\n                  />\n                  Clear selection\n                </CommandItem>\n              )}\n              {filteredProfiles.map((profile) => (\n                <CommandItem\n                  key={profile.id}\n                  value={profile.full_name}\n                  onSelect={(currentValue) => {\n                    const selected = profiles.find(p => p.full_name === currentValue);\n                    onSelect(selected || null);\n                    setOpen(false);\n                  }}\n                >\n                  <Check\n                    className={cn(\n                      \"mr-2 h-4 w-4\",\n                      value === profile.full_name ? \"opacity-100\" : \"opacity-0\"\n                    )}\n                  />\n                  <div className=\"flex flex-col\">\n                    <span>{profile.full_name}</span>\n                    {profile.username && (\n                      <span className=\"text-sm text-muted-foreground\">@{profile.username}</span>\n                    )}\n                  </div>\n                </CommandItem>\n              ))}\n            </CommandGroup>\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nexport default SearchableProfileField;","import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Separator } from '@/components/ui/separator';\nimport { Edit, Save, X } from 'lucide-react';\nimport { supabase } from '@/integrations/supabase/client';\nimport { toast } from 'sonner';\nimport SearchableProfileField from './SearchableProfileField';\n\ninterface OrganisationData {\n  id?: string;\n  organisation_name?: string;\n  organisation_name_short?: string;\n  acra_uen_number?: string;\n  charity_registration_number?: string;\n  address?: string;\n  telephone?: string;\n  annual_turnover?: string;\n  number_of_employees?: number;\n  number_of_executives?: number;\n  appointed_certification_body?: string;\n}\n\ninterface SignatoryRole {\n  id?: string;\n  role_type: string;\n  signatory_name?: string;\n  signatory_title?: string;\n  signatory_email?: string;\n}\n\ninterface SignatoryData {\n  name_signatory_cem?: string;\n  title_signatory_cem?: string;\n  email_signatory_cem?: string;\n  name_signatory_hib?: string;\n  title_signatory_hib?: string;\n  email_signatory_hib?: string;\n  name_signatory_dpe?: string;\n  title_signatory_dpe?: string;\n  email_signatory_dpe?: string;\n  dpo_name?: string;\n  dpo_email?: string;\n  iso_name?: string;\n  iso_email?: string;\n  head_it_name?: string;\n  head_it_email?: string;\n  it_manager_name?: string;\n  it_manager_email?: string;\n}\n\nconst OrganisationProfile: React.FC = () => {\n  const [isEditing, setIsEditing] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [organisationData, setOrganisationData] = useState<OrganisationData>({});\n  const [signatoryData, setSignatoryData] = useState<SignatoryData>({});\n  \n  // Phone validation function\n  const validatePhoneInput = (input: string): string => {\n    return input.replace(/[^0-9+\\s\\-\\(\\)]/g, '');\n  };\n\n  const handleTelephoneChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const validatedValue = validatePhoneInput(e.target.value);\n    setOrganisationData(prev => ({ ...prev, telephone: validatedValue }));\n  };\n  useEffect(() => {\n    fetchOrganisationData();\n  }, []);\n\n  const fetchOrganisationData = async () => {\n    try {\n      setLoading(true);\n      \n      // Fetch organisation profile data\n      const { data: orgProfile, error: orgError } = await supabase\n        .from('org_profile')\n        .select('*')\n        .maybeSingle();\n\n      if (orgError) {\n        throw orgError;\n      }\n\n      if (orgProfile) {\n        setOrganisationData(orgProfile);\n      }\n\n      // Fetch signatory roles data\n      const { data: sigRoles, error: sigError } = await supabase\n        .from('org_sig_roles')\n        .select('*');\n\n      if (sigError) {\n        throw sigError;\n      }\n\n      if (sigRoles && sigRoles.length > 0) {\n        const sigData: SignatoryData = {};\n        \n        sigRoles.forEach((role: any) => {\n          switch (role.role_type) {\n            case 'cem':\n              sigData.name_signatory_cem = role.signatory_name;\n              sigData.title_signatory_cem = role.signatory_title;\n              sigData.email_signatory_cem = role.signatory_email;\n              break;\n            case 'hib':\n              sigData.name_signatory_hib = role.signatory_name;\n              sigData.title_signatory_hib = role.signatory_title;\n              sigData.email_signatory_hib = role.signatory_email;\n              break;\n            case 'dpe':\n              sigData.name_signatory_dpe = role.signatory_name;\n              sigData.title_signatory_dpe = role.signatory_title;\n              sigData.email_signatory_dpe = role.signatory_email;\n              break;\n            case 'dpo':\n              sigData.dpo_name = role.signatory_name;\n              sigData.dpo_email = role.signatory_email;\n              break;\n            case 'iso':\n              sigData.iso_name = role.signatory_name;\n              sigData.iso_email = role.signatory_email;\n              break;\n            case 'head_it':\n              sigData.head_it_name = role.signatory_name;\n              sigData.head_it_email = role.signatory_email;\n              break;\n            case 'it_manager':\n              sigData.it_manager_name = role.signatory_name;\n              sigData.it_manager_email = role.signatory_email;\n              break;\n          }\n        });\n        \n        setSignatoryData(sigData);\n      }\n\n    } catch (error) {\n      console.error('Error fetching organisation data:', error);\n      toast.error('Failed to load organisation data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSave = async () => {\n    try {\n      setSaving(true);\n      \n      // Save organisation profile data\n      const { error: orgError } = await supabase\n        .from('org_profile')\n        .upsert(organisationData);\n\n      if (orgError) throw orgError;\n\n      // Update signatory roles data\n      const updates = [\n        { role_type: 'cem', signatory_name: signatoryData.name_signatory_cem, signatory_title: signatoryData.title_signatory_cem, signatory_email: signatoryData.email_signatory_cem },\n        { role_type: 'hib', signatory_name: signatoryData.name_signatory_hib, signatory_title: signatoryData.title_signatory_hib, signatory_email: signatoryData.email_signatory_hib },\n        { role_type: 'dpe', signatory_name: signatoryData.name_signatory_dpe, signatory_title: signatoryData.title_signatory_dpe, signatory_email: signatoryData.email_signatory_dpe },\n        { role_type: 'dpo', signatory_name: signatoryData.dpo_name, signatory_title: '', signatory_email: signatoryData.dpo_email },\n        { role_type: 'iso', signatory_name: signatoryData.iso_name, signatory_title: '', signatory_email: signatoryData.iso_email },\n        { role_type: 'head_it', signatory_name: signatoryData.head_it_name, signatory_title: '', signatory_email: signatoryData.head_it_email },\n        { role_type: 'it_manager', signatory_name: signatoryData.it_manager_name, signatory_title: '', signatory_email: signatoryData.it_manager_email }\n      ];\n\n      for (const update of updates) {\n        const { error: sigError } = await supabase\n          .from('org_sig_roles')\n          .upsert(update, { onConflict: 'role_type' });\n\n        if (sigError) throw sigError;\n      }\n\n      toast.success('Organisation profile updated successfully');\n      setIsEditing(false);\n    } catch (error) {\n      console.error('Error saving organisation data:', error);\n      toast.error('Failed to save organisation data');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const fetchUserEmailAndRole = async (userId: string) => {\n    try {\n      // Get email using the database function\n      const { data: emailData, error: emailError } = await supabase\n        .rpc('get_user_email_by_id', { user_id: userId });\n      \n      if (emailError) {\n        console.error('Error fetching user email:', emailError);\n        return { email: '', title: '' };\n      }\n      \n      // Get primary role from user_profile_roles + roles\n      const { data: roleData, error: roleError } = await supabase\n        .from('user_profile_roles')\n        .select(`\n          roles(name)\n        `)\n        .eq('user_id', userId)\n        .eq('is_primary', true)\n        .maybeSingle();\n      \n      if (roleError) {\n        console.error('Error fetching user role:', roleError);\n        return { email: emailData || '', title: '' };\n      }\n      \n      return {\n        email: emailData || '',\n        title: roleData?.roles?.name || ''\n      };\n      \n    } catch (error) {\n      console.error('Error in fetchUserEmailAndRole:', error);\n      return { email: '', title: '' };\n    }\n  };\n\n  const handleProfileSelect = async (role: string, profile: any) => {\n    if (!profile) {\n      // Clear the selection\n      switch (role) {\n        case 'cem':\n          setSignatoryData(prev => ({ \n            ...prev, \n            name_signatory_cem: '', \n            title_signatory_cem: '',\n            email_signatory_cem: '' \n          }));\n          break;\n        case 'hib':\n          setSignatoryData(prev => ({ \n            ...prev, \n            name_signatory_hib: '', \n            title_signatory_hib: '',\n            email_signatory_hib: '' \n          }));\n          break;\n        case 'dpe':\n          setSignatoryData(prev => ({ \n            ...prev, \n            name_signatory_dpe: '', \n            title_signatory_dpe: '',\n            email_signatory_dpe: '' \n          }));\n          break;\n        case 'dpo':\n          setSignatoryData(prev => ({ \n            ...prev, \n            dpo_name: '', \n            dpo_email: '' \n          }));\n          break;\n        case 'iso':\n          setSignatoryData(prev => ({ \n            ...prev, \n            iso_name: '', \n            iso_email: '' \n          }));\n          break;\n        case 'head_it':\n          setSignatoryData(prev => ({ \n            ...prev, \n            head_it_name: '', \n            head_it_email: '' \n          }));\n          break;\n        case 'it_manager':\n          setSignatoryData(prev => ({ \n            ...prev, \n            it_manager_name: '', \n            it_manager_email: '' \n          }));\n          break;\n      }\n      return;\n    }\n\n    // Get user's email and primary role\n    const { email, title } = await fetchUserEmailAndRole(profile.id);\n    \n    switch (role) {\n      case 'cem':\n        setSignatoryData(prev => ({ \n          ...prev, \n          name_signatory_cem: profile.full_name, \n          title_signatory_cem: title,\n          email_signatory_cem: email \n        }));\n        break;\n      case 'hib':\n        setSignatoryData(prev => ({ \n          ...prev, \n          name_signatory_hib: profile.full_name, \n          title_signatory_hib: title,\n          email_signatory_hib: email \n        }));\n        break;\n      case 'dpe':\n        setSignatoryData(prev => ({ \n          ...prev, \n          name_signatory_dpe: profile.full_name, \n          title_signatory_dpe: title,\n          email_signatory_dpe: email \n        }));\n        break;\n      case 'dpo':\n        setSignatoryData(prev => ({ \n          ...prev, \n          dpo_name: profile.full_name, \n          dpo_email: email \n        }));\n        break;\n      case 'iso':\n        setSignatoryData(prev => ({ \n          ...prev, \n          iso_name: profile.full_name, \n          iso_email: email \n        }));\n        break;\n      case 'head_it':\n        setSignatoryData(prev => ({ \n          ...prev, \n          head_it_name: profile.full_name, \n          head_it_email: email \n        }));\n        break;\n      case 'it_manager':\n        setSignatoryData(prev => ({ \n          ...prev, \n          it_manager_name: profile.full_name, \n          it_manager_email: email \n        }));\n        break;\n    }\n  };\n\n  const handleCancel = () => {\n    setIsEditing(false);\n    fetchOrganisationData(); // Reset to original data\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Organisation Profile</h2>\n          <p className=\"text-muted-foreground\">Manage organisation details and signatory information</p>\n        </div>\n        {!isEditing ? (\n          <Button onClick={() => setIsEditing(true)} variant=\"outline\" size=\"icon\">\n            <Edit className=\"h-4 w-4\" />\n          </Button>\n        ) : (\n          <div className=\"flex gap-2\">\n            <Button onClick={handleSave} disabled={saving} size=\"icon\">\n              <Save className=\"h-4 w-4\" />\n            </Button>\n            <Button onClick={handleCancel} variant=\"outline\" disabled={saving} size=\"icon\">\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        )}\n      </div>\n\n      {/* General Organisation Information */}\n      <Card>\n        <CardHeader>\n          <CardTitle>General Information</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"org-name\">Organisation Name</Label>\n              <Input\n                id=\"org-name\"\n                value={organisationData.organisation_name || ''}\n                onChange={(e) => setOrganisationData(prev => ({ ...prev, organisation_name: e.target.value }))}\n                disabled={!isEditing}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"org-name-short\">Organisation Name (Short)</Label>\n              <Input\n                id=\"org-name-short\"\n                value={organisationData.organisation_name_short || ''}\n                onChange={(e) => setOrganisationData(prev => ({ ...prev, organisation_name_short: e.target.value }))}\n                disabled={!isEditing}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"acra-uen\">ACRA Number/Unique Entity Number (UEN)</Label>\n              <Input\n                id=\"acra-uen\"\n                value={organisationData.acra_uen_number || ''}\n                onChange={(e) => setOrganisationData(prev => ({ ...prev, acra_uen_number: e.target.value }))}\n                disabled={!isEditing}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"charity-reg\">Charity Registration Number</Label>\n              <Input\n                id=\"charity-reg\"\n                value={organisationData.charity_registration_number || ''}\n                onChange={(e) => setOrganisationData(prev => ({ ...prev, charity_registration_number: e.target.value }))}\n                disabled={!isEditing}\n              />\n            </div>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"address\">Address</Label>\n            <Textarea\n              id=\"address\"\n              value={organisationData.address || ''}\n              onChange={(e) => setOrganisationData(prev => ({ ...prev, address: e.target.value }))}\n              disabled={!isEditing}\n              rows={3}\n            />\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"telephone\">Telephone</Label>\n              <Input\n                id=\"telephone\"\n                value={organisationData.telephone || ''}\n                onChange={handleTelephoneChange} // Use the new handler\n                disabled={!isEditing}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"annual-turnover\">Annual Turnover</Label>\n              <Input\n                id=\"annual-turnover\"\n                value={organisationData.annual_turnover || ''}\n                onChange={(e) => setOrganisationData(prev => ({ ...prev, annual_turnover: e.target.value }))}\n                disabled={!isEditing}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"num-employees\">Number of Employees</Label>\n              <Input\n                id=\"num-employees\"\n                type=\"number\"\n                value={organisationData.number_of_employees || ''}\n                onChange={(e) => setOrganisationData(prev => ({ ...prev, number_of_employees: parseInt(e.target.value) || 0 }))}\n                disabled={!isEditing}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"num-executives\">Number of Executives</Label>\n              <Input\n                id=\"num-executives\"\n                type=\"number\"\n                value={organisationData.number_of_executives || ''}\n                onChange={(e) => setOrganisationData(prev => ({ ...prev, number_of_executives: parseInt(e.target.value) || 0 }))}\n                disabled={!isEditing}\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"cert-body\">Appointed Certification Body</Label>\n            <Input\n              id=\"cert-body\"\n              value={organisationData.appointed_certification_body || ''}\n              onChange={(e) => setOrganisationData(prev => ({ ...prev, appointed_certification_body: e.target.value }))}\n              disabled={!isEditing}\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Signatory Information */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Signatory Information</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          {/* CEM Declaration Signatory */}\n          <div className=\"space-y-4\">\n            <h4 className=\"font-semibold text-sm text-muted-foreground uppercase tracking-wide\">CEM Declaration</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"cem-name\">Name of Signatory to CEM Declaration</Label>\n                <SearchableProfileField\n                  value={signatoryData.name_signatory_cem}\n                  onSelect={(profile) => handleProfileSelect('cem', profile)}\n                  placeholder=\"Select CEM signatory...\"\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"cem-title\">Title of Signatory to CEM Declaration</Label>\n                <Input\n                  id=\"cem-title\"\n                  value={signatoryData.title_signatory_cem || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, title_signatory_cem: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"cem-email\">Email of Signatory to CEM Declaration</Label>\n                <Input\n                  id=\"cem-email\"\n                  type=\"email\"\n                  value={signatoryData.email_signatory_cem || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, email_signatory_cem: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n            </div>\n          </div>\n\n          <Separator />\n\n          {/* HIB Pledge Signatory */}\n          <div className=\"space-y-4\">\n            <h4 className=\"font-semibold text-sm text-muted-foreground uppercase tracking-wide\">HIB Pledge</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"hib-name\">Name of Signatory to HIB Pledge</Label>\n                <SearchableProfileField\n                  value={signatoryData.name_signatory_hib}\n                  onSelect={(profile) => handleProfileSelect('hib', profile)}\n                  placeholder=\"Select HIB signatory...\"\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"hib-title\">Title of Signatory to HIB Pledge</Label>\n                <Input\n                  id=\"hib-title\"\n                  value={signatoryData.title_signatory_hib || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, title_signatory_hib: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"hib-email\">Email of Signatory to HIB Pledge</Label>\n                <Input\n                  id=\"hib-email\"\n                  type=\"email\"\n                  value={signatoryData.email_signatory_hib || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, email_signatory_hib: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n            </div>\n          </div>\n\n          <Separator />\n\n          {/* DPE Pledge Signatory */}\n          <div className=\"space-y-4\">\n            <h4 className=\"font-semibold text-sm text-muted-foreground uppercase tracking-wide\">DPE Pledge</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"dpe-name\">Name of Signatory to DPE Pledge</Label>\n                <SearchableProfileField\n                  value={signatoryData.name_signatory_dpe}\n                  onSelect={(profile) => handleProfileSelect('dpe', profile)}\n                  placeholder=\"Select DPE signatory...\"\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"dpe-title\">Title of Signatory to DPE Pledge</Label>\n                <Input\n                  id=\"dpe-title\"\n                  value={signatoryData.title_signatory_dpe || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, title_signatory_dpe: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"dpe-email\">Email of Signatory to DPE Pledge</Label>\n                <Input\n                  id=\"dpe-email\"\n                  type=\"email\"\n                  value={signatoryData.email_signatory_dpe || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, email_signatory_dpe: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n            </div>\n          </div>\n\n          <Separator />\n\n          {/* Other Personnel */}\n          <div className=\"space-y-4\">\n            <h4 className=\"font-semibold text-sm text-muted-foreground uppercase tracking-wide\">Key Personnel</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"dpo-name\">DPO Name</Label>\n                <SearchableProfileField\n                  value={signatoryData.dpo_name}\n                  onSelect={(profile) => handleProfileSelect('dpo', profile)}\n                  placeholder=\"Select DPO...\"\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"dpo-email\">DPO Email</Label>\n                <Input\n                  id=\"dpo-email\"\n                  type=\"email\"\n                  value={signatoryData.dpo_email || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, dpo_email: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"iso-name\">ISO Name</Label>\n                <SearchableProfileField\n                  value={signatoryData.iso_name}\n                  onSelect={(profile) => handleProfileSelect('iso', profile)}\n                  placeholder=\"Select ISO...\"\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"iso-email\">ISO Email</Label>\n                <Input\n                  id=\"iso-email\"\n                  type=\"email\"\n                  value={signatoryData.iso_email || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, iso_email: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"head-it-name\">Head of IT Name</Label>\n                <SearchableProfileField\n                  value={signatoryData.head_it_name}\n                  onSelect={(profile) => handleProfileSelect('head_it', profile)}\n                  placeholder=\"Select Head of IT...\"\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"head-it-email\">Head of IT Email</Label>\n                <Input\n                  id=\"head-it-email\"\n                  type=\"email\"\n                  value={signatoryData.head_it_email || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, head_it_email: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"it-manager-name\">IT Manager Name</Label>\n                <SearchableProfileField\n                  value={signatoryData.it_manager_name}\n                  onSelect={(profile) => handleProfileSelect('it_manager', profile)}\n                  placeholder=\"Select IT Manager...\"\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"it-manager-email\">IT Manager Email</Label>\n                <Input\n                  id=\"it-manager-email\"\n                  type=\"email\"\n                  value={signatoryData.it_manager_email || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, it_manager_email: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default OrganisationProfile;\n","import React, { useState } from 'react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Badge } from '@/components/ui/badge';\nimport { Users, UserCheck, Building2, MapPin, Settings, Award, User } from 'lucide-react';\nimport { useOrganisationContext } from '../context/OrganisationContext';\nimport UserManagement from './admin/UserManagement';\nimport { RoleManagement } from './knowledge/RoleManagement';\nimport { DepartmentManagement } from './knowledge/DepartmentManagement';\nimport { LocationManagement } from './knowledge/LocationManagement';\nimport OrganisationCertificates from './OrganisationCertificates';\nimport OrganisationProfile from './OrganisationProfile';\n\ninterface OrganisationPanelProps {\n  title?: string;\n  description?: string;\n  showAdminBadge?: boolean;\n  className?: string;\n}\n\nexport const OrganisationPanel: React.FC<OrganisationPanelProps> = ({ \n  title = \"Organisation\",\n  description = \"Manage users, roles, departments, and locations\",\n  showAdminBadge = true,\n  className = \"\"\n}) => {\n  const { isTabEnabled, onNavigate } = useOrganisationContext();\n  const [activeTab, setActiveTab] = useState(() => {\n    // Find the first enabled tab as default\n    const defaultTabs = ['users', 'roles', 'departments', 'locations', 'certificates', 'profile'];\n    return defaultTabs.find(tab => isTabEnabled(tab)) || 'users';\n  });\n\n  const handleTabChange = (value: string) => {\n    setActiveTab(value);\n    onNavigate?.(value);\n  };\n\n  const tabConfig = [\n    { id: 'users', label: 'User Management', icon: Users, component: UserManagement },\n    { id: 'roles', label: 'Roles', icon: UserCheck, component: RoleManagement },\n    { id: 'departments', label: 'Departments', icon: Building2, component: DepartmentManagement },\n    { id: 'locations', label: 'Locations', icon: MapPin, component: LocationManagement },\n    { id: 'certificates', label: 'Certificates', icon: Award, component: OrganisationCertificates },\n    { id: 'profile', label: 'Profile', icon: User, component: OrganisationProfile },\n  ];\n\n  const enabledTabs = tabConfig.filter(tab => isTabEnabled(tab.id));\n\n  return (\n    <div className={`w-full px-4 space-y-6 ${className}`}>\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">{title}</h1>\n          <p className=\"text-muted-foreground\">{description}</p>\n        </div>\n        {showAdminBadge && (\n          <Badge variant=\"secondary\" className=\"flex items-center gap-2\">\n            <Settings className=\"h-4 w-4\" />\n            Administrator\n          </Badge>\n        )}\n      </div>\n\n      <Card>\n        <CardContent className=\"p-6\">\n          <Tabs value={activeTab} onValueChange={handleTabChange} className=\"w-full\">\n          <TabsList className=\"grid w-full\" style={{ gridTemplateColumns: `repeat(${enabledTabs.length}, 1fr)` }}>\n              {enabledTabs.map(({ id, label, icon: Icon }) => (\n                <TabsTrigger key={id} value={id} className=\"flex items-center gap-2\">\n                  <Icon className=\"h-4 w-4\" />\n                  {label}\n                </TabsTrigger>\n              ))}\n            </TabsList>\n\n            {enabledTabs.map(({ id, component: Component }) => (\n              <TabsContent key={id} value={id} className=\"space-y-4\">\n                <Component />\n              </TabsContent>\n            ))}\n          </Tabs>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};","import React from 'react';\nimport { OrganisationPanel, OrganisationProvider } from '@/modules/organisation';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useUserRole } from '@/hooks/useUserRole';\n\nexport const OrganisationWrapper: React.FC = () => {\n  const { hasAdminAccess } = useUserRole();\n  \n  const organisationConfig = {\n    supabaseClient: supabase,\n    enabledTabs: ['users', 'roles', 'departments', 'locations', 'certificates', 'profile'],\n    permissions: {\n      canCreateUsers: hasAdminAccess,\n      canEditUsers: hasAdminAccess,\n      canDeleteUsers: hasAdminAccess,\n      canManageRoles: hasAdminAccess,\n      canManageDepartments: hasAdminAccess,\n      canManageLocations: hasAdminAccess,\n      canManageCertificates: hasAdminAccess,\n      canManageProfile: hasAdminAccess,\n    },\n  };\n\n  return (\n    <OrganisationProvider config={organisationConfig}>\n      <OrganisationPanel \n        title=\"Organisation\"\n        description=\"Manage users, roles, departments, and locations\"\n        showAdminBadge={false}\n      />\n    </OrganisationProvider>\n  );\n};\n","\nimport React, { useState, useRef } from \"react\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport HardwareInventory from \"@/components/HardwareInventory\";\nimport SoftwareAccounts from \"@/components/SoftwareAccounts\";\nimport EditableCertificates from \"@/components/EditableCertificates\";\nimport PhysicalLocationTab from \"@/components/PhysicalLocationTab\";\nimport AssignHardwareDialog from \"@/components/admin/AssignHardwareDialog\";\nimport AssignSoftwareDialog from \"@/components/admin/AssignSoftwareDialog\";\nimport AddEducationDialog from \"@/components/admin/AddEducationDialog\";\nimport { Laptop, MonitorSmartphone, GraduationCap, MapPin, Plus, BookOpen, Users, Play } from \"lucide-react\";\nimport MyDocuments from \"@/components/knowledge/MyDocuments\";\nimport { UserDepartmentsRolesManager, UserDepartmentsRolesManagerRef } from \"@/components/admin/UserDepartmentsRolesManager\";\nimport LearningTracksTab from \"@/components/LearningTracksTab\";\n\ninterface PersonaDetailsTabsProps {\n  profile: any; // Using any for now since we're adapting the data structure\n  userId: string;\n  onUpdate?: () => void;\n}\n\nconst PersonaDetailsTabs: React.FC<PersonaDetailsTabsProps> = ({ profile, userId, onUpdate }) => {\n  const [isAssignHardwareOpen, setIsAssignHardwareOpen] = useState(false);\n  const [isAssignSoftwareOpen, setIsAssignSoftwareOpen] = useState(false);\n  const [isAddEducationOpen, setIsAddEducationOpen] = useState(false);\n  const departmentRolesRef = useRef<UserDepartmentsRolesManagerRef>(null);\n\n  // Detect if we're in Learn mode (root path) or Govern mode (admin path)\n  const isLearnMode = import.meta.env.VITE_APP_MODE === 'LEARN';\n\n  const handleCertificateUpdate = (certificateId: string, updates: any) => {\n    console.log('Certificate update requested:', certificateId, updates);\n    // This would typically update the certificate in the database\n    // For now, we'll just log it\n  };\n\n  const handleDataChange = () => {\n    // Trigger data refresh\n    onUpdate?.();\n  };\n\n  // ... existing code ...\n\n  // Get the appropriate grid class based on mode\n  const getGridClass = () => {\n    if (isLearnMode) {\n      return \"grid-cols-3\"; // Only Departments & Roles and Certificates in Learn mode\n    }\n    \n    if (profile?.enrolled_in_learn) {\n      return \"grid-cols-7\"; // All tabs including Learn\n    }\n    \n    return \"grid-cols-6\"; // All tabs except Learn\n  };\n\n  return (\n    <Card className=\"w-full\">\n      <CardContent className=\"p-6\">\n        <Tabs defaultValue=\"departments\" className=\"w-full\">\n          <TabsList className={`grid w-full ${getGridClass()} mb-6`}>\n            <TabsTrigger value=\"departments\" className=\"flex items-center gap-2\">\n              <Users className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">Departments & Roles</span>\n            </TabsTrigger>\n            \n            {/* Only show these tabs in Govern mode */}\n            {!isLearnMode && (\n              <>\n                <TabsTrigger value=\"hardware\" className=\"flex items-center gap-2\">\n                  <Laptop className=\"h-4 w-4\" />\n                  <span className=\"hidden sm:inline\">Hardware</span>\n                </TabsTrigger>\n                <TabsTrigger value=\"software\" className=\"flex items-center gap-2\">\n                  <MonitorSmartphone className=\"h-4 w-4\" />\n                  <span className=\"hidden sm:inline\">Accounts</span>\n                </TabsTrigger>\n                <TabsTrigger value=\"knowledge\" className=\"flex items-center gap-2\">\n                  <BookOpen className=\"h-4 w-4\" />\n                  <span className=\"hidden sm:inline\">Knowledge</span>\n                </TabsTrigger>\n              </>\n            )}\n            \n            <TabsTrigger value=\"location\" className=\"flex items-center gap-2\">\n                  <MapPin className=\"h-4 w-4\" />\n                  <span className=\"hidden sm:inline\">Physical Location</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"certification\" className=\"flex items-center gap-2\">\n              <GraduationCap className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">Certificates</span>\n            </TabsTrigger>\n            \n            {/* Only show Learn tab in Govern mode */}\n            {!isLearnMode && profile?.enrolled_in_learn && (\n              <TabsTrigger value=\"learn\" className=\"flex items-center gap-2\">\n                <Play className=\"h-4 w-4\" />\n                <span className=\"hidden sm:inline\">StaySecure LEARN</span>\n              </TabsTrigger>\n            )}\n          </TabsList>\n          \n\n          <TabsContent value=\"departments\" className=\"space-y-4 animate-fade-in\">\n            <div className=\"flex justify-end\">\n              <Button \n                onClick={() => departmentRolesRef.current?.handleAddNewRow?.()}\n                size=\"icon\"\n              >\n                <Plus className=\"h-4 w-4\" />\n              </Button>\n            </div>\n            <UserDepartmentsRolesManager userId={userId} ref={departmentRolesRef} />\n          </TabsContent>\n          \n          {/* Only show these tab contents in Govern mode */}\n          {!isLearnMode && (\n            <>\n              <TabsContent value=\"hardware\" className=\"space-y-4 animate-fade-in\">\n                <div className=\"flex justify-end\">\n                  <Button \n                    onClick={() => setIsAssignHardwareOpen(true)}\n                    size=\"icon\"\n                  >\n                    <Plus className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n                <HardwareInventory profile={profile} onUpdate={handleDataChange} />\n              </TabsContent>\n              \n              <TabsContent value=\"software\" className=\"space-y-4 animate-fade-in\">\n                <div className=\"flex justify-end\">\n                  <Button \n                    onClick={() => setIsAssignSoftwareOpen(true)}\n                    size=\"icon\"\n                  >\n                    <Plus className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n                <SoftwareAccounts profile={profile} />\n              </TabsContent>\n\n              <TabsContent value=\"knowledge\" className=\"space-y-4 animate-fade-in\">\n                <MyDocuments userId={profile.id} />\n              </TabsContent>\n            </>\n          )}\n                        \n          <TabsContent value=\"location\" className=\"space-y-4 animate-fade-in\">\n            <PhysicalLocationTab profile={profile} />\n          </TabsContent>\n              \n          <TabsContent value=\"certification\" className=\"space-y-4 animate-fade-in\">\n            <div className=\"flex justify-end\">\n              <Button \n                onClick={() => setIsAddEducationOpen(true)}\n                size=\"icon\"\n              >\n                <Plus className=\"h-4 w-4\" />\n              </Button>\n            </div>\n            <EditableCertificates \n              profile={profile} \n              onUpdate={handleCertificateUpdate}\n              onDataChange={handleDataChange}\n            />\n          </TabsContent>\n\n          {/* Only show Learn tab content in Govern mode */}\n          {!isLearnMode && profile?.enrolled_in_learn && (\n            <TabsContent value=\"learn\" className=\"space-y-4 animate-fade-in\">\n              <LearningTracksTab userId={profile.id} />\n            </TabsContent>\n          )}\n        </Tabs>\n\n        {/* Dialogs - only show in Govern mode */}\n        {!isLearnMode && (\n          <>\n            <AssignHardwareDialog\n              isOpen={isAssignHardwareOpen}\n              onOpenChange={setIsAssignHardwareOpen}\n              userId={profile.id}\n              onSuccess={() => {\n                setIsAssignHardwareOpen(false);\n                handleDataChange();\n              }}\n            />\n\n            <AssignSoftwareDialog\n              isOpen={isAssignSoftwareOpen}\n              onOpenChange={setIsAssignSoftwareOpen}\n              userId={profile.id}\n              onSuccess={() => {\n                setIsAssignSoftwareOpen(false);\n                handleDataChange();\n              }}\n            />\n          </>\n        )}\n\n        <AddEducationDialog\n          isOpen={isAddEducationOpen}\n          onOpenChange={setIsAddEducationOpen}\n          userId={profile.id}\n          onSuccess={() => {\n            setIsAddEducationOpen(false);\n            handleDataChange();\n          }}\n        />\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default PersonaDetailsTabs;","import React, { useState } from 'react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { MapPin, Building, User, Edit2, Save, X, Hash, Phone, Star, Network } from 'lucide-react';\nimport { useUserProfiles } from '@/hooks/useUserProfiles';\nimport { useUserDepartments } from '@/hooks/useUserDepartments';\nimport { useUserProfileRoles } from '@/hooks/useUserProfileRoles';\nimport { useUserPhysicalLocations } from '@/hooks/useUserPhysicalLocations';\nimport { toast } from '@/components/ui/use-toast';\nimport ProfileAvatar from '@/modules/organisation/components/profile/ProfileAvatar';\nimport ProfileContactInfo from '@/modules/organisation/components/profile/ProfileContactInfo';\nimport EditableField from '@/modules/organisation/components/profile/EditableField';\nimport { UserRoleField } from '@/modules/organisation/components/profile/UserRoleField';\n\ninterface EditableProfileHeaderProps {\n  profile: any;\n  onProfileUpdate: () => void;\n  isReadOnly?: boolean;\n  onOptimisticUpdate?: (field: string, value: string) => void;\n}\n\nconst EditableProfileHeader: React.FC<EditableProfileHeaderProps> = ({ \n  profile, \n  onProfileUpdate,\n  isReadOnly = false,\n  onOptimisticUpdate\n}) => {\n  console.log('EditableProfileHeader props:', { profile, onOptimisticUpdate });\n  const { profiles, updateProfile } = useUserProfiles();\n  const [editingField, setEditingField] = useState<string | null>(null);\n  const [saving, setSaving] = useState(false);\n  const [managerValue, setManagerValue] = useState(profile.manager || '');\n\n  const handleFieldEdit = (field: string) => {\n    setEditingField(field);\n  };\n\n  const handleFieldSave = async (field: string, value: string) => {\n    console.log('handleFieldSave called', field, value);\n    try {\n      setSaving(true);\n      let updateData: any = {};\n      if (field === 'full_name') {\n        updateData.full_name = value;\n      } else if (field === 'phone') {\n        updateData.phone = value;\n      } else if (field === 'location') {\n        updateData.location = value;\n      } else if (field === 'location_id') {\n        updateData.location_id = value;\n      } else if (field === 'role') {\n        updateData.role = value;\n      } else if (field === 'department') {\n        updateData.department = value;\n      } else if (field === 'manager') {\n        updateData.manager = value;\n      }\n      \n      console.log('Updating profile:', profile.id, updateData);\n      \n      if (!profile.id) {\n        console.error('Profile ID is undefined. Profile object:', profile);\n        console.log('Early return: profile.id is undefined');\n        toast({\n          title: \"Error\",\n          description: \"Profile ID is missing. Cannot update profile.\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      \n      const result = await updateProfile(profile.id, updateData);\n      console.log('Update result:', result);\n      \n      toast({\n        title: \"Profile updated\",\n        description: \"Your profile has been successfully updated.\",\n      });\n      setEditingField(null);\n      console.log('onOptimisticUpdate', onOptimisticUpdate);\n      if (onOptimisticUpdate) {\n        console.log('Calling onOptimisticUpdate', field, value);\n        onOptimisticUpdate(field, value);\n      }\n      onProfileUpdate();\n    } catch (error: any) {\n      console.error('Save error:', error);\n      console.log('Early return: error in save');\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to update profile\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleFieldCancel = () => {\n    setEditingField(null);\n  };\n\n  const handleNameChange = async (field: 'firstName' | 'lastName', value: string) => {\n    try {\n      setSaving(true);\n    // Debug: Log the current profile object\n    console.log('Current profile object:', profile);\n    console.log('profile.full_name:', profile.full_name);\n\n      // Update the specific name field\n      const updateData: any = {};\n      if (field === 'firstName') {\n        updateData.first_name = value;\n        console.log('updateData.first_name', updateData.first_name);\n      } else {\n        updateData.last_name = value;\n        console.log('updateData.last_name', updateData.last_name);\n      }\n      \n      // Only auto-generate full_name if it's currently empty\n      if (profile.full_name === '' || profile.full_name?.trim() === '') {\n        console.log('profile.full_name is empty', profile.full_name);\n        const firstName = field === 'firstName' ? value : profile.firstName || '';\n        const lastName = field === 'lastName' ? value : profile.lastName || '';\n        updateData.full_name = `${firstName} ${lastName}`.trim();\n      }\n      \n      await updateProfile(profile.id, updateData);\n      \n      toast({\n        title: \"Profile updated\",\n        description: \"Your profile has been successfully updated.\",\n      });\n      \n      setEditingField(null);\n      if (onOptimisticUpdate) {\n        onOptimisticUpdate(field, value);\n        if (updateData.full_name) {\n          onOptimisticUpdate('full_name', updateData.full_name);\n        }\n      }\n      onProfileUpdate();\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to update profile\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleFullNameChange = async (value: string) => {\n    // Allow manual override of full_name\n    await handleFieldSave('full_name', value);\n  };\n\n  // Get manager name and filtered profiles\n  const filteredProfiles = profiles.filter(user => user.id !== profile.id);\n  const managerProfile = profiles.find(u => u.id === profile.manager);\n  const managerName = managerProfile ? (managerProfile.full_name || managerProfile.username) : 'Not assigned';\n\n  // Get departments and roles\n  const { userDepartments } = useUserDepartments(profile.id);\n  const { primaryRole } = useUserProfileRoles(profile.id);\n  const { data: physicalLocations, isLoading: locationsLoading } = useUserPhysicalLocations(profile.id);\n  \n  // Get primary department\n  const primaryDepartment = userDepartments?.find(dept => dept.is_primary);\n\n  const handleManagerChange = async (userId: string) => {\n    setManagerValue(userId);\n    await handleFieldSave('manager', userId);\n  };\n\n  // Handle location selection with both name and ID\n  const handleLocationSelect = async (locationName: string, selectedOption?: { value: string; label: string; id?: string }) => {\n    if (selectedOption?.id) {\n      // Update both location name and location_id\n      await handleFieldSave('location', locationName);\n      await handleFieldSave('location_id', selectedOption.id);\n    } else {\n      await handleFieldSave('location', locationName);\n    }\n  };\n\n  return (\n    <Card className=\"w-full\">\n      <CardContent className=\"p-6 lg:p-8\">\n        <div className=\"flex flex-col lg:flex-row lg:items-start gap-6\">\n          {/* Avatar section */}\n          <div className=\"flex justify-center lg:justify-start\">\n            <ProfileAvatar \n              avatarUrl={profile.avatar}\n              firstName={profile.firstName}\n              lastName={profile.lastName}\n            />\n          </div>\n          \n          {/* 3-column layout for profile info */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12 flex-1\">\n            {/* Column 1 - Personal info */}\n            <div className=\"space-y-2\">\n              <div className=\"text-center sm:text-left space-y-2\">\n                <div className=\"grid grid-cols-2 gap-2\">\n                  <EditableField\n                    value={profile.firstName || ''}\n                    fieldKey=\"firstName\"\n                    onSave={(field, value) => handleNameChange('firstName', value)}\n                    isEditing={editingField === 'firstName'}\n                    onEdit={handleFieldEdit}\n                    onCancel={handleFieldCancel}\n                    saving={saving}\n                    placeholder=\"First Name\"\n                    inputClassName=\"text-sm h-8\"\n                  />\n                  <EditableField\n                    value={profile.lastName || ''}\n                    fieldKey=\"lastName\"\n                    onSave={(field, value) => handleNameChange('lastName', value)}\n                    isEditing={editingField === 'lastName'}\n                    onEdit={handleFieldEdit}\n                    onCancel={handleFieldCancel}\n                    saving={saving}\n                    placeholder=\"Last Name\"\n                    inputClassName=\"text-sm h-8\"\n                  />\n                </div>\n                <EditableField\n                  value={profile.full_name || `${profile.firstName} ${profile.lastName}`.trim()}\n                  fieldKey=\"full_name\"\n                  onSave={(field, value) => handleFullNameChange(value)}\n                  isEditing={editingField === 'full_name'}\n                  onEdit={handleFieldEdit}\n                  onCancel={handleFieldCancel}\n                  saving={saving}\n                  placeholder=\"Full Name (Auto-generated, editable)\"\n                  className=\"flex-1\"\n                  inputClassName=\"text-2xl font-bold h-10\"\n                />\n              </div>\n              \n              {profile.account?.username && (\n                <div className=\"flex items-center gap-2 text-sm\">\n                  <User className=\"h-4 w-4 text-muted-foreground\" />\n                  <span className=\"text-foreground\">{profile.account.username}</span>\n                </div>\n              )}\n              \n              {profile.account?.employeeId && (\n                <div className=\"flex items-center gap-2 text-sm\">\n                  <Hash className=\"h-4 w-4 text-muted-foreground\" />\n                  <span className=\"text-foreground\">{profile.account.employeeId}</span>\n                </div>\n              )}\n              \n              <div className=\"flex items-center gap-2 text-sm\">\n                <Phone className=\"h-4 w-4 text-muted-foreground\" />\n                <EditableField\n                  value={profile.phone || 'Not provided'}\n                  fieldKey=\"phone\"\n                  placeholder=\"Phone number\"\n                  onSave={handleFieldSave}\n                  isEditing={editingField === 'phone'}\n                  onEdit={handleFieldEdit}\n                  onCancel={handleFieldCancel}\n                  saving={saving}\n                  inputClassName=\"h-6 text-sm\"\n                />\n              </div>\n            </div>\n\n            {/* Column 2 - Work info */}\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center gap-2 text-sm\">\n                <Network className=\"h-4 w-4 text-muted-foreground\" />\n                {editingField === 'manager' ? (\n                  <Select\n                    value={managerValue}\n                    onValueChange={handleManagerChange}\n                  >\n                    <SelectTrigger className=\"w-full\">\n                      <SelectValue placeholder=\"Select manager\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {filteredProfiles.map((user) => (\n                        <SelectItem key={user.id} value={user.id}>\n                          {user.full_name || user.username || 'Unnamed User'}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                ) : (\n                  <EditableField\n                    value={managerName}\n                    fieldKey=\"manager\"\n                    onSave={handleFieldSave}\n                    isEditing={editingField === 'manager'}\n                    onEdit={handleFieldEdit}\n                    onCancel={handleFieldCancel}\n                    saving={saving}\n                    inputClassName=\"text-sm h-6\"\n                  />\n                )}\n              </div>\n              \n              <div className=\"flex items-center gap-2 text-sm\">\n                <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n                <EditableField\n                  value={profile.location || 'Not specified'}\n                  fieldKey=\"location\"\n                  placeholder=\"Select location\"\n                  onSave={handleFieldSave}\n                  onSelectChange={handleLocationSelect}\n                  isEditing={editingField === 'location'}\n                  onEdit={handleFieldEdit}\n                  onCancel={handleFieldCancel}\n                  saving={saving}\n                  type=\"select\"\n                  asyncOptions={physicalLocations}\n                  isLoading={locationsLoading}\n                  inputClassName=\"h-6 text-sm w-48\"\n                  locationId={profile.locationId}\n                />\n              </div>\n\n              {/* Primary Department and Role */}\n              <div className=\"flex items-center gap-4 w-full\">\n                <div className=\"flex items-center gap-2\">\n                  <Star className=\"h-3 w-3 fill-current text-yellow-500\" />\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  {primaryDepartment && (\n                    <Badge variant=\"default\">\n                      {primaryDepartment.department_name}\n                    </Badge>\n                  )}\n                  {primaryRole && (\n                    <Badge variant=\"default\">\n                      {primaryRole.role_name}\n                    </Badge>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Column 3 - Status info */}\n            <div className=\"space-y-2\">\n              <ProfileContactInfo\n                startDate={profile.startDate}\n                userId={profile.id}\n                status={profile.account?.status}\n                accessLevel={profile.account?.accessLevel}\n                lastLogin={profile.account?.lastLogin}\n                passwordLastChanged={profile.account?.passwordLastChanged}\n                twoFactorEnabled={profile.account?.twoFactorEnabled}\n              />\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default EditableProfileHeader;\n","import React, { useEffect, useState, useMemo } from \"react\";\n// import { useAuth } from 'staysecure-auth'; // Will be passed as prop\nimport { useProfile } from \"@/hooks/useProfile\";\nimport { useUserAssets } from \"@/hooks/useUserAssets\";\nimport { useUserRole } from \"@/hooks/useUserRole\";\nimport { Loader2, LogOut } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { toast } from \"@/components/ui/use-toast\";\nimport EditableProfileHeader from \"./EditableProfileHeader\";\nimport PersonaDetailsTabs from \"./PersonaDetailsTabs\";\n\n// Define PersonProfile interface to replace the one from deleted mockData.ts\nexport interface PersonProfile {\n  id: string;\n  full_name: string;\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone: string;\n  location: string;\n  avatar: string;\n  role: string;\n  department: string;\n  manager: string;\n  startDate: string;\n  account: {\n    username: string;\n    employeeId: string;\n    status: string;\n    accessLevel: string;\n    lastLogin: string;\n    passwordLastChanged: string;\n    twoFactorEnabled: boolean;\n  };\n  hardware: Array<{\n    id: string;\n    type: string;\n    model: string;\n    serialNumber: string;\n    status: string;\n    assignedDate: string;\n    manufacturer: string;\n    osEdition: string;\n    osVersion: string;\n  }>;\n  software: Array<{\n    id: string;\n    name: string;\n    role_account_type: string;\n    expiryDate: string | null;\n    lastUsed: string | null;\n  }>;\n  certificates: Array<{\n    name: string;\n    issuedBy: string;\n    dateAcquired: string;\n    expiryDate: string;\n    credentialId: string;\n    status: string;\n  }>;\n}\n\nconst PersonaProfile: React.FC = () => {\n  const { user, signOut } = useAuth();\n  const { hasAdminAccess } = useUserRole();\n  const { profile, loading: profileLoading, refetch: refetchProfile } = useProfile();\n  const { hardware, software, certificates, loading: assetsLoading, refetch: refetchAssets } = useUserAssets(user?.id);\n  \n  // Extract user email to prevent infinite re-renders\n  const userEmail = user?.email;\n  \n  // ALL HOOKS MUST BE CALLED BEFORE ANY EARLY RETURNS\n  const [optimisticData, setOptimisticData] = useState<PersonProfile | null>(null);\n\n  // Memoize personaData to prevent infinite re-renders - MUST be called before any early returns\n  const personaData = useMemo(() => ({\n    id: profile?.id || '',\n    full_name: profile?.full_name || '',\n    firstName: profile?.first_name || '',  // Use actual first_name from DB\n    lastName: profile?.last_name || '',    // Use actual last_name from DB\n    email: userEmail || '',\n    phone: profile?.phone || 'Not provided',\n    location: profile?.location || 'Not specified',\n    avatar: profile?.avatar_url || '',\n    role: profile?.role || 'Employee',\n    department: profile?.department || 'General',\n    manager: profile?.manager || 'Not assigned',\n    startDate: profile?.start_date || profile?.created_at || '',\n    account: {\n      username: profile?.username || 'Not set',\n      employeeId: profile?.employee_id || 'Not assigned',\n      status: profile?.status || 'Active',\n      accessLevel: profile?.access_level || 'User',\n      lastLogin: profile?.last_login || profile?.created_at || '',\n      passwordLastChanged: profile?.password_last_changed || profile?.created_at || '',\n      twoFactorEnabled: profile?.two_factor_enabled || false,\n    },\n    hardware: (hardware || []).map(h => ({\n      id: h.id,\n      type: h.type,\n      model: h.model,\n      serialNumber: h.serial_number,\n      status: h.status,\n      assignedDate: h.assigned_date,\n      manufacturer: h.manufacturer || '',\n      osEdition: h.os_edition || '',\n      osVersion: h.os_version || '',\n    })),\n    software: (software || []).map(s => {\n      console.log('buildPersonaData - input software item:', s);\n      const mapped = {\n        id: s.id,\n        name: s.name,\n        role_account_type: s.role_account_type,\n        expiryDate: s.expiryDate,\n        lastUsed: s.lastUsed,\n      };\n      console.log('buildPersonaData - mapped software item:', mapped);\n      return mapped;\n    }),\n    certificates: (certificates || []).map(c => ({\n      name: c.name,\n      issuedBy: c.issued_by,\n      dateAcquired: c.date_acquired,\n      expiryDate: c.expiry_date,\n      credentialId: c.credential_id,\n      status: c.status,\n    })),\n  }), [profile, hardware, software, certificates, userEmail]);\n\n  const handleProfileUpdate = () => {\n    // Refetch both profile and assets data to ensure everything is fresh\n    refetchProfile();\n    refetchAssets();\n  };\n\n  if (profileLoading || assetsLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\n      </div>\n    );\n  }\n\n  if (!profile) {\n    return (\n      <div className=\"text-center py-8\">\n        <p className=\"text-muted-foreground\">No profile found. Please update your profile information.</p>\n      </div>\n    );\n  }\n\n  // Handler for optimistic update\n  const handleOptimisticUpdate = (field: string, value: string) => {\n    setOptimisticData(prev => {\n      const baseData = prev || personaData;\n      const updated = { ...baseData };\n      if (field in updated) {\n        updated[field] = value;\n      } else if (updated.account && field in updated.account) {\n        updated.account = { ...updated.account, [field]: value };\n      }\n      return updated;\n    });\n  };\n\n  const handleSignOut = async () => {\n    try {\n      await signOut();\n      toast({\n        title: \"Signed out successfully\",\n        description: \"You have been signed out of your account.\",\n      });\n    } catch (error: any) {\n      toast({\n        title: \"Error signing out\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  console.log('PersonaProfile rendering with personaData:', personaData);\n  console.log('PersonaProfile personaData.software:', personaData.software);\n\n  const displayData = optimisticData || personaData;\n\n  return (\n    <div className=\"space-y-6\">\n      {!hasAdminAccess && (\n        <div className=\"flex justify-between items-center\">\n          <h1 className=\"text-3xl font-bold\">My Profile</h1>\n        </div>\n      )}\n      <EditableProfileHeader profile={displayData} onProfileUpdate={refetchProfile} onOptimisticUpdate={handleOptimisticUpdate} />\n      <PersonaDetailsTabs profile={displayData} userId={user?.id || ''} onUpdate={handleProfileUpdate} />\n    </div>\n  );\n};\n\nexport default PersonaProfile;\n","import React from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useUserProfiles } from '@/hooks/useUserProfiles';\nimport { useUserAssets } from '@/hooks/useUserAssets';\nimport { Button } from '@/components/ui/button';\nimport { ArrowLeft, Loader2 } from 'lucide-react';\nimport EditableProfileHeader from '@/modules/organisation/components/EditableProfileHeader';\nimport PersonaDetailsTabs from '@/modules/organisation/components/PersonaDetailsTabs';\n\nconst UserDetailView: React.FC = () => {\n  const { userId } = useParams<{ userId: string }>();\n  const navigate = useNavigate();\n  const { profiles, loading: profilesLoading } = useUserProfiles();\n  const { hardware, software, certificates, loading: assetsLoading, refetch } = useUserAssets(userId);\n\n  // Build personaData from the latest userProfile\n  const buildPersonaData = (profileObj: any) => ({\n    id: profileObj.id,\n    full_name: profileObj.full_name || '',  // Add this line\n    firstName: profileObj.first_name || '',  // Use actual first_name from DB\n    lastName: profileObj.last_name || '',    // Use actual last_name from DB\n    email: profileObj.email || '',\n    phone: profileObj.phone || 'Not provided',\n    location: profileObj.location || 'Not specified',\n    avatar: profileObj.avatar_url || '',\n    role: profileObj.role || 'Employee',\n    department: profileObj.department || 'General',\n    manager: profileObj.manager || 'Not assigned',\n    startDate: profileObj.start_date || profileObj.created_at,\n    account: {\n      username: profileObj.username || 'Not set',\n      employeeId: profileObj.employee_id || 'Not assigned',\n      status: profileObj.status || 'Active',\n      accessLevel: profileObj.access_level || 'User',\n      lastLogin: profileObj.last_login || profileObj.created_at,\n      passwordLastChanged: profileObj.password_last_changed || profileObj.created_at,\n      twoFactorEnabled: profileObj.two_factor_enabled || false,\n    },\n    hardware: hardware.map((h: any) => ({\n      id: h.id,\n      type: h.type,\n      model: h.model,\n      serialNumber: h.serial_number,\n      status: h.status,\n      assignedDate: h.assigned_date,\n      manufacturer: h.manufacturer || '',\n      osEdition: h.os_edition || '',\n      osVersion: h.os_version || '',\n    })),\n    software: software.map((s: any) => ({\n      name: s.name,\n      role_account_type: s.role_account_type,\n      expiryDate: s.expiryDate,\n      lastUsed: s.lastUsed,\n    })),\n    certificates: certificates.map((c: any) => ({\n      type: c.type || 'Certificate',\n      name: c.name,\n      issuedBy: c.issued_by,\n      dateAcquired: c.date_acquired,\n      expiryDate: c.expiry_date,\n      credentialId: c.credential_id,\n      status: c.status,\n      org_cert: c.org_cert,\n    })),\n  });\n\n  // Hooks at the top\n  const [personaData, setPersonaData] = React.useState<any>(null);\n\n  React.useEffect(() => {\n    const userProfile = profiles.find((p: any) => p.id === userId);\n    if (userProfile) {\n      setPersonaData(buildPersonaData(userProfile));\n    }\n  }, [profiles, userId, hardware, software, certificates]);\n\n  // Handler for optimistic update\n  const handleOptimisticUpdate = (field: string, value: string) => {\n    setPersonaData((prev: any) => {\n      const updated = { ...prev };\n      if (field in updated) {\n        updated[field] = value;\n      } else if (updated.account && field in updated.account) {\n        updated.account = { ...updated.account, [field]: value };\n      }\n      console.log('UserDetailView handleOptimisticUpdate:', field, value, updated);\n      return updated;\n    });\n  };\n\n  const handleProfileUpdate = () => {\n    // For admin view, we might want to refresh the data but not allow editing\n    console.log('Profile update requested for user:', userId);\n  };\n\n  const handleBackToUsers = () => {\n    // Navigate to admin panel with organisation tab active\n    console.log('UserDetailView: Navigating to admin with organisation tab');\n    navigate('/admin', { \n      state: { activeTab: 'organisation' },\n      replace: true \n    });\n  };\n\n  // Loading and error UI\n  if (profilesLoading || assetsLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\n      </div>\n    );\n  }\n\n  const userProfile = profiles.find((p: any) => p.id === userId);\n\n  if (!userProfile) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-screen gap-4\">\n        <p className=\"text-muted-foreground\">User not found</p>\n        <Button onClick={() => navigate('/admin')} variant=\"outline\">\n          <ArrowLeft className=\"h-4 w-4 mr-2\" />\n          Back to Admin\n        </Button>\n      </div>\n    );\n  }\n\n  if (!personaData) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-6xl mx-auto py-6 px-4 space-y-6\">\n      <div className=\"flex items-center gap-4 mb-6\">\n        <Button onClick={handleBackToUsers} variant=\"outline\" size=\"sm\">\n          <ArrowLeft className=\"h-4 w-4 mr-2\" />\n          Back to Users\n        </Button>\n        <h1 className=\"text-2xl font-bold\">User Profile: {userProfile.full_name || 'Unnamed User'}</h1>\n      </div>\n      <EditableProfileHeader \n        profile={personaData} \n        onProfileUpdate={handleProfileUpdate}\n        onOptimisticUpdate={handleOptimisticUpdate}\n      />\n      <PersonaDetailsTabs profile={personaData} userId={userId!} onUpdate={refetch} />\n    </div>\n  );\n};\n\nexport default UserDetailView;\n","import React from 'react';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\n\ninterface EditableFieldProps {\n  value: string;\n  fieldKey?: string;\n  label?: string;\n  placeholder?: string;\n  className?: string;\n  inputClassName?: string;\n  locationId?: string;\n  isEditing: boolean;\n  onEdit: (field: string) => void;\n  onSave: (field: string, value: string) => Promise<void>;\n  onCancel: () => void;\n  saving: boolean;\n  type?: 'text' | 'select' | 'date';\n  options?: string[];\n  asyncOptions?: { value: string; label: string; id?: string }[];\n  isLoading?: boolean;\n  onSelectChange?: (value: string, selectedOption?: { value: string; label: string; id?: string }) => void;\n}\n\nconst EditableField: React.FC<EditableFieldProps> = ({\n  value,\n  fieldKey,\n  label,\n  placeholder,\n  className,\n  inputClassName,\n  locationId,\n  isEditing,\n  onEdit,\n  onSave,\n  onCancel,\n  type = 'text',\n  options,\n  asyncOptions,\n  isLoading,\n  onSelectChange,\n}) => {\n  const [editValue, setEditValue] = React.useState(value);\n\n  React.useEffect(() => {\n    setEditValue(value);\n  }, [value, isEditing]);\n\n  // Phone number validation function\n  const validatePhoneInput = (input: string): string => {\n    // Only allow numbers, +, spaces, and common phone separators\n    return input.replace(/[^0-9+\\s\\-\\(\\)]/g, '');\n  };\n\n  const handleSave = async () => {\n    if (fieldKey) {\n      await onSave(fieldKey, editValue);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      handleSave();\n    } else if (e.key === 'Escape') {\n      onCancel();\n    }\n  };\n\n  // Handle input change with phone validation\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.value;\n    \n    // Apply phone validation only for phone fields\n    if (fieldKey === 'phone') {\n      const validatedValue = validatePhoneInput(newValue);\n      setEditValue(validatedValue);\n    } else {\n      setEditValue(newValue);\n    }\n  };\n\n  if (isEditing) {\n    if (type === 'select' && (options || asyncOptions)) {\n      const selectOptions = asyncOptions || options?.map(opt => ({ value: opt, label: opt })) || [];\n      \n      return (\n        <Select \n          value={editValue} \n          onValueChange={(newValue) => {\n            setEditValue(newValue);\n            const selectedOption = selectOptions.find(opt => opt.value === newValue);\n            if (onSelectChange && selectedOption) {\n              onSelectChange(newValue, selectedOption);\n            } else {\n              handleSave();\n            }\n          }}\n          disabled={isLoading}\n        >\n          <SelectTrigger className={inputClassName || \"w-48\"}>\n            <SelectValue placeholder={isLoading ? \"Loading...\" : \"Select location\"} />\n          </SelectTrigger>\n          <SelectContent>\n            {selectOptions.length === 0 && !isLoading && (\n              <SelectItem value=\"none\" disabled>No locations assigned</SelectItem>\n            )}\n            {selectOptions.map(option => (\n              <SelectItem key={option.value} value={option.value}>\n                {option.label}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      );\n    }\n\n    return (\n      <Input\n        type={type}\n        value={editValue}\n        placeholder={placeholder}\n        onChange={handleInputChange} // Use the new handler\n        onBlur={handleSave}\n        onKeyDown={handleKeyDown}\n        className={inputClassName || \"h-6 text-sm w-32\"}\n        autoFocus\n      />\n    );\n  }\n\n  return (\n    <div className={className}>\n      {label && <span className=\"text-sm text-muted-foreground mr-2\">{label}</span>}\n      <span \n        className=\"cursor-pointer hover:bg-muted/50 px-2 py-1 rounded transition-colors\"\n        onClick={() => fieldKey && onEdit(fieldKey)}\n      >\n        {value || placeholder}\n      </span>\n    </div>\n  );\n};\n\nexport default EditableField;","import React, { useState } from 'react';\nimport { Badge } from '@/components/ui/badge';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { useUserRoleById, AppRole } from '@/hooks/useUserRoleById';\nimport { useUserRole } from '@/hooks/useUserRole';\nimport { Loader2, Key } from 'lucide-react';\n\ninterface UserRoleFieldProps {\n  userId: string;\n}\n\nexport const UserRoleField: React.FC<UserRoleFieldProps> = ({ userId }) => {\n  const [isEditing, setIsEditing] = useState(false);\n  const { role, isLoading, updateRole, isUpdating, getRoleDisplayName, getRoleBadgeVariant } = useUserRoleById(userId);\n  const { hasAdminAccess } = useUserRole();\n\n  const roleOptions: { value: AppRole; label: string }[] = [\n    { value: 'user', label: 'User' },\n    { value: 'author', label: 'Author' },\n    { value: 'manager', label: 'Manager' },\n    { value: 'client_admin', label: 'Client Administrator' },\n    { value: 'super_admin', label: 'Super Administrator' },\n  ];\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center gap-2\">\n        <Loader2 className=\"h-4 w-4 animate-spin\" />\n        <span className=\"text-sm text-muted-foreground\">Loading role...</span>\n      </div>\n    );\n  }\n\n  const handleRoleChange = async (newRole: AppRole) => {\n    await updateRole(newRole);\n    setIsEditing(false);\n  };\n\n  // Display mode - show as text with icon\n  if (!isEditing) {\n    return (\n      <div className=\"flex items-center gap-2\">\n        <Key className=\"h-4 w-4 text-muted-foreground\" />\n        <Badge \n          variant={getRoleBadgeVariant(role)}\n          className={`text-sm ${hasAdminAccess ? 'cursor-pointer hover:bg-muted/50 px-2 py-1 rounded transition-colors' : ''}`}\n          onClick={() => hasAdminAccess && setIsEditing(true)}\n        >\n          {getRoleDisplayName(role)}\n        </Badge>\n      </div>\n    );\n  }\n\n  // Edit mode - show dropdown\n  return (\n    <div className=\"flex items-center gap-2\">\n      <Key className=\"h-4 w-4 text-muted-foreground\" />\n      <Select\n        value={role || 'user'}\n        onValueChange={(value) => handleRoleChange(value as AppRole)}\n        disabled={isUpdating}\n        open={isEditing}\n        onOpenChange={setIsEditing}\n      >\n        <SelectTrigger className=\"w-48 h-8 text-sm\">\n          <SelectValue />\n        </SelectTrigger>\n        <SelectContent className=\"z-50\">\n          {roleOptions.map((option) => (\n            <SelectItem key={option.value} value={option.value}>\n              {option.label}\n            </SelectItem>\n          ))}\n        </SelectContent>\n      </Select>\n      {isUpdating && <Loader2 className=\"h-4 w-4 animate-spin\" />}\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Phone, MapPin, Star, User, Hash } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport EditableField from \"./EditableField\";\nimport { useUserDepartments } from \"@/hooks/useUserDepartments\";\nimport { useUserProfileRoles } from \"@/hooks/useUserProfileRoles\";\nimport { useUserPhysicalLocations } from \"@/hooks/useUserPhysicalLocations\";\nimport { UserRoleField } from \"./UserRoleField\";\n\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\n\ninterface ProfileBasicInfoProps {\n  firstName: string;\n  lastName: string;\n  manager: string;\n  phone: string;\n  location: string;\n  locationId?: string;\n  username?: string;\n  employeeId?: string;\n  editingField: string | null;\n  onEdit: (field: string) => void;\n  onSave: (field: string, value: string) => Promise<void>;\n  onCancel: () => void;\n  saving: boolean;\n  profiles: { id: string; full_name: string; username: string }[];\n  currentUserId: string;\n  userId: string; // Add userId for multiple roles\n}\n\nconst ProfileBasicInfo: React.FC<ProfileBasicInfoProps> = ({\n  firstName,\n  lastName,\n  manager,\n  phone,\n  location,\n  locationId,\n  username,\n  employeeId,\n  editingField,\n  onEdit,\n  onSave,\n  onCancel,\n  saving,\n  profiles,\n  currentUserId,\n  userId\n}) => {\n  console.log('ProfileBasicInfo rendering with userId:', userId, 'currentUserId:', currentUserId);\n  const { userDepartments } = useUserDepartments(userId);\n  const { primaryRole } = useUserProfileRoles(userId);\n  const { data: physicalLocations, isLoading: locationsLoading } = useUserPhysicalLocations(userId);\n  \n  // Get primary department\n  const primaryDepartment = userDepartments.find(dept => dept.is_primary);\n  \n  const handleNameSave = async (fieldKey: string, value: string) => {\n    await onSave('full_name', value);\n  };\n  \n  const [managerValue, setManagerValue] = React.useState(manager);\n  React.useEffect(() => { setManagerValue(manager); }, [manager, editingField]);\n  \n  const handleManagerChange = async (userId: string) => {\n    setManagerValue(userId);\n    await onSave('manager', userId);\n  };\n  \n  // Handle location selection with both name and ID\n  const handleLocationSelect = async (locationName: string, selectedOption?: { value: string; label: string; id?: string }) => {\n    if (selectedOption?.id) {\n      // Save both location name and location_id \n      await onSave('location', locationName);\n      // Note: We would need to extend onSave to handle multiple fields or create a separate handler\n      // For now, we'll save the location name and the parent component should handle location_id\n    } else {\n      await onSave('location', locationName);\n    }\n  };\n  \n  const filteredProfiles = profiles.filter(user => user.id !== currentUserId);\n  const managerProfile = profiles.find(u => u.id === manager);\n  const managerName = managerProfile ? (managerProfile.full_name || managerProfile.username) : 'Not assigned';\n\n  return (\n    <div className=\"flex-1\">\n      {/* Name */}\n      <div className=\"flex items-center gap-2 mb-4\">\n        <EditableField\n          value={`${firstName} ${lastName}`}\n          fieldKey=\"full_name\"\n          onSave={handleNameSave}\n          isEditing={editingField === 'full_name'}\n          onEdit={onEdit}\n          onCancel={onCancel}\n          saving={saving}\n          className=\"flex-1\"\n          inputClassName=\"text-2xl font-bold h-10\"\n        />\n      </div>\n      \n      {/* 2-column layout */}\n      <div className=\"grid grid-cols-1 md:grid-cols-[1fr_2fr] gap-8 lg:gap-12 w-full\">\n        {/* Left column - Personal info: Email, Employee ID, Phone */}\n        <div className=\"space-y-2 w-full\">\n          {username && (\n            <div className=\"flex items-center gap-2 text-sm\">\n              <User className=\"h-4 w-4 text-muted-foreground\" />\n              <span className=\"text-foreground\">{username}</span>\n            </div>\n          )}\n          \n          {employeeId && (\n            <div className=\"flex items-center gap-2 text-sm\">\n              <Hash className=\"h-4 w-4 text-muted-foreground\" />\n              <span className=\"text-foreground\">{employeeId}</span>\n            </div>\n          )}\n          \n          <div className=\"flex items-center gap-2 text-sm\">\n            <Phone className=\"h-4 w-4 text-muted-foreground\" />\n            <EditableField\n              value={phone || 'Not provided'}\n              fieldKey=\"phone\"\n              placeholder=\"Phone number\"\n              onSave={onSave}\n              isEditing={editingField === 'phone'}\n              onEdit={onEdit}\n              onCancel={onCancel}\n              saving={saving}\n              inputClassName=\"h-6 text-sm\"\n            />\n          </div>\n        </div>\n        \n        {/* Middle column - Work info: Reports to, Location, Department/Role */}\n        <div className=\"space-y-2 w-full\">\n          {editingField === 'manager' ? (\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-sm text-muted-foreground\">Reports to:</span>\n              <Select\n                value={managerValue}\n                onValueChange={handleManagerChange}\n              >\n                <SelectTrigger className=\"w-full\">\n                  <SelectValue placeholder=\"Select manager\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {filteredProfiles.map((user) => (\n                    <SelectItem key={user.id} value={user.id}>\n                      {user.full_name || user.username || 'Unnamed User'}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          ) : (\n            <EditableField\n              value={managerName}\n              fieldKey=\"manager\"\n              label=\"Reports to:\"\n              onSave={onSave}\n              isEditing={editingField === 'manager'}\n              onEdit={onEdit}\n              onCancel={onCancel}\n              saving={saving}\n              inputClassName=\"text-sm h-6\"\n            />\n          )}\n          \n          <div className=\"flex items-center gap-2 text-sm\">\n            <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n            <EditableField\n              value={location || 'Not specified'}\n              fieldKey=\"location\"\n              placeholder=\"Select location\"\n              onSave={onSave}\n              onSelectChange={handleLocationSelect}\n              isEditing={editingField === 'location'}\n              onEdit={onEdit}\n              onCancel={onCancel}\n              saving={saving}\n              type=\"select\"\n              asyncOptions={physicalLocations}\n              isLoading={locationsLoading}\n              inputClassName=\"h-6 text-sm w-48\"\n              locationId={locationId}\n            />\n          </div>\n          \n          {/* System Role */}\n          <div className=\"flex items-center gap-2 text-sm\">\n            <span className=\"text-muted-foreground\">System Role:</span>\n            <UserRoleField userId={userId} />\n          </div>\n          \n          {/* Primary Department and Role */}\n          <div className=\"flex items-center gap-4 w-full\">\n            {primaryDepartment && (\n              <div className=\"flex items-center gap-1\">\n                <Star className=\"h-3 w-3 fill-current text-yellow-500\" />\n                <Badge variant=\"default\">\n                  {primaryDepartment.department_name}\n                </Badge>\n              </div>\n            )}\n            \n            {primaryRole && (\n              <div className=\"flex items-center gap-1\">\n                <Star className=\"h-3 w-3 fill-current text-yellow-500\" />\n                <Badge variant=\"default\">\n                  {primaryRole.role_name}\n                </Badge>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProfileBasicInfo;\n","\nimport React from \"react\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Upload } from \"lucide-react\";\nimport { toast } from \"@/components/ui/use-toast\";\n\ninterface ProfileAvatarProps {\n  avatarUrl?: string;\n  firstName: string;\n  lastName: string;\n}\n\nconst ProfileAvatar: React.FC<ProfileAvatarProps> = ({ avatarUrl, firstName, lastName }) => {\n  const initials = firstName && lastName\n    ? (firstName.charAt(0) + lastName.charAt(0))\n    : firstName?.slice(0, 2) || 'U';\n\n  const handleAvatarUpload = () => {\n    toast({\n      title: \"Avatar Upload\",\n      description: \"Avatar upload functionality will be implemented with Supabase Storage.\",\n    });\n  };\n\n  return (\n    <div className=\"relative\">\n      <Avatar className=\"h-24 w-24 border-2 border-primary\">\n        <AvatarImage src={avatarUrl} alt={`${firstName} ${lastName}`} />\n        <AvatarFallback className=\"text-2xl\">{initials}</AvatarFallback>\n      </Avatar>\n      <Button\n        size=\"sm\"\n        variant=\"outline\"\n        className=\"absolute -bottom-2 -right-2 h-8 w-8 rounded-full p-0\"\n        onClick={handleAvatarUpload}\n      >\n        <Upload className=\"h-3 w-3\" />\n      </Button>\n    </div>\n  );\n};\n\nexport default ProfileAvatar;\n","\nimport React from \"react\";\nimport { Calendar, Shield, Clock, Key } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface ProfileContactInfoProps {\n  startDate: string;\n  // Account status props\n  status?: string;\n  accessLevel?: string;\n  lastLogin?: string;\n  passwordLastChanged?: string;\n  twoFactorEnabled?: boolean;\n}\n\nconst ProfileContactInfo: React.FC<ProfileContactInfoProps> = ({\n  startDate,\n  status,\n  accessLevel,\n  lastLogin,\n  passwordLastChanged,\n  twoFactorEnabled\n}) => {\n  const formatDate = (dateString?: string) => {\n    if (!dateString) return 'Not set';\n    return new Date(dateString).toLocaleDateString();\n  };\n\n  return (\n    <div className=\"flex flex-col items-end space-y-3 ml-auto\">\n      {/* Account Status Information */}\n      <div className=\"flex items-center gap-2 text-sm\">\n        <Shield className=\"h-4 w-4 text-muted-foreground\" />\n        <Badge variant={status === 'Active' ? 'default' : 'secondary'}>\n          {status || 'Active'}\n        </Badge>\n      </div>\n\n      <div className=\"flex items-center gap-2 text-sm\">\n        <Key className=\"h-4 w-4 text-muted-foreground\" />\n        <span>{accessLevel || 'User'}</span>\n      </div>\n\n      <div className=\"flex items-center gap-2 text-sm\">\n        <Shield className=\"h-4 w-4 text-muted-foreground\" />\n        <Badge variant={twoFactorEnabled ? 'default' : 'secondary'}>\n          2FA {twoFactorEnabled ? 'Enabled' : 'Disabled'}\n        </Badge>\n      </div>\n\n      <div className=\"flex items-center gap-2 text-sm\">\n        <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n        <span>Started {formatDate(startDate)}</span>\n      </div>\n\n      <div className=\"flex items-center gap-2 text-sm\">\n        <Clock className=\"h-4 w-4 text-muted-foreground\" />\n        <span>Last login: {lastLogin ? formatDate(lastLogin) : 'Never'}</span>\n      </div>\n    </div>\n  );\n};\n\nexport default ProfileContactInfo;\n","import React, { useState } from 'react';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Plus, X } from 'lucide-react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport { toast } from '@/components/ui/use-toast';\n\ninterface MultipleRolesFieldProps {\n  userId: string;\n  departmentValue?: string;\n  isEditing: boolean;\n  onEdit: () => void;\n  onCancel: () => void;\n}\n\nconst MultipleRolesField: React.FC<MultipleRolesFieldProps> = ({\n  userId,\n  departmentValue,\n  isEditing,\n  onEdit,\n  onCancel\n}) => {\n  const [isAddingRole, setIsAddingRole] = useState(false);\n  const [selectedRole, setSelectedRole] = useState('');\n  const queryClient = useQueryClient();\n\n  // Fetch user's current roles\n  const { data: userRoles, isLoading: rolesLoading } = useQuery({\n    queryKey: ['user-roles', userId],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('user_profile_roles')\n        .select(`\n          *,\n          roles (\n            name\n          )\n        `)\n        .eq('user_id', userId)\n        .order('is_primary', { ascending: false })\n        .order('roles.name');\n      \n      if (error) throw error;\n      \n      // Transform data to match expected interface\n      const transformedData = (data || []).map(item => ({\n        id: item.id,\n        user_id: item.user_id,\n        role_id: item.role_id,\n        role_name: item.roles?.name || '',\n        is_primary: item.is_primary,\n        assigned_at: item.assigned_at,\n        assigned_by: item.assigned_by,\n        pairing_id: item.pairing_id,\n      }));\n      \n      return transformedData;\n    },\n    enabled: !!userId,\n  });\n\n  // Fetch available roles\n  const { data: availableRoles } = useQuery({\n    queryKey: ['available-roles', departmentValue],\n    queryFn: async () => {\n      let query = supabase\n        .from('roles')\n        .select('role_id, name, department_id, departments(name)')\n        .eq('is_active', true);\n\n      if (departmentValue && departmentValue !== '') {\n        const { data: department } = await supabase\n          .from('departments')\n          .select('id')\n          .eq('name', departmentValue)\n          .maybeSingle();\n        \n        if (department) {\n          // Show roles that either belong to the selected department OR have no department (designation roles)\n          query = query.or(`department_id.eq.${department.id},department_id.is.null`);\n        } else {\n          // If department not found, only show designation roles\n          query = query.is('department_id', null);\n        }\n      }\n      // If no department filter, show all roles\n\n      const { data, error } = await query.order('name');\n      if (error) throw error;\n      return data;\n    },\n  });\n\n  // Add role mutation\n  const addRoleMutation = useMutation({\n    mutationFn: async ({ roleId, isPrimary }: { roleId: string; isPrimary: boolean }) => {\n      const { error } = await supabase\n        .from('user_profile_roles')\n        .insert({\n          user_id: userId,\n          role_id: roleId,\n          is_primary: isPrimary,\n          assigned_by: userId // In a real app, this would be the current admin user\n        });\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['user-roles', userId] });\n      setSelectedRole('');\n      setIsAddingRole(false);\n      toast({\n        title: \"Role added\",\n        description: \"The role has been successfully added.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to add role\",\n        variant: \"destructive\",\n      });\n    }\n  });\n\n  // Remove role mutation\n  const removeRoleMutation = useMutation({\n    mutationFn: async (roleId: string) => {\n      const { error } = await supabase\n        .from('user_profile_roles')\n        .delete()\n        .eq('id', roleId);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['user-roles', userId] });\n      toast({\n        title: \"Role removed\",\n        description: \"The role has been successfully removed.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to remove role\",\n        variant: \"destructive\",\n      });\n    }\n  });\n\n  // Set primary role mutation\n  const setPrimaryRoleMutation = useMutation({\n    mutationFn: async (roleId: string) => {\n      // First, unset all primary roles for this user\n      await supabase\n        .from('user_profile_roles')\n        .update({ is_primary: false })\n        .eq('user_id', userId);\n\n      // Then set the selected role as primary\n      const { error } = await supabase\n        .from('user_profile_roles')\n        .update({ is_primary: true })\n        .eq('id', roleId);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['user-roles', userId] });\n      toast({\n        title: \"Primary role updated\",\n        description: \"The primary role has been updated.\",\n      });\n    }\n  });\n\n  const handleAddRole = () => {\n    if (!selectedRole) return;\n    \n    const isPrimary = !userRoles || userRoles.length === 0;\n    addRoleMutation.mutate({ roleId: selectedRole, isPrimary });\n  };\n\n  const handleRemoveRole = (roleId: string) => {\n    removeRoleMutation.mutate(roleId);\n  };\n\n  const handleSetPrimary = (roleId: string) => {\n    setPrimaryRoleMutation.mutate(roleId);\n  };\n\n  if (rolesLoading) {\n    return <div className=\"text-sm text-muted-foreground\">Loading roles...</div>;\n  }\n\n  return (\n    <div className=\"space-y-2\">\n      <div className=\"flex items-center gap-2 flex-wrap\">\n        {userRoles?.map((userRole) => (\n          <div key={userRole.id} className=\"flex items-center gap-1\">\n            <Badge \n              variant={userRole.is_primary ? \"default\" : \"secondary\"}\n              className=\"flex items-center gap-1\"\n            >\n              {userRole.role_name}\n              {userRole.is_primary && (\n                <span className=\"text-xs font-normal\">(Primary)</span>\n              )}\n              {isEditing && (\n                <Button\n                  size=\"sm\"\n                  variant=\"ghost\"\n                  onClick={() => handleRemoveRole(userRole.id)}\n                  className=\"h-4 w-4 p-0 ml-1 hover:bg-destructive hover:text-destructive-foreground\"\n                >\n                  <X className=\"h-3 w-3\" />\n                </Button>\n              )}\n            </Badge>\n            {isEditing && !userRole.is_primary && userRoles.length > 1 && (\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={() => handleSetPrimary(userRole.id)}\n                className=\"h-6 px-2 text-xs\"\n              >\n                Set Primary\n              </Button>\n            )}\n          </div>\n        ))}\n        \n        {isEditing && (\n          <Button\n            size=\"sm\"\n            variant=\"outline\"\n            onClick={() => setIsAddingRole(true)}\n            className=\"h-6 w-6 p-0\"\n          >\n            <Plus className=\"h-3 w-3\" />\n          </Button>\n        )}\n      </div>\n\n      <Dialog open={isAddingRole} onOpenChange={setIsAddingRole}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle>Add Role</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <Select value={selectedRole} onValueChange={setSelectedRole}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select a role\" />\n              </SelectTrigger>\n              <SelectContent>\n                {availableRoles?.filter(role => \n                  !userRoles?.some(userRole => userRole.role_id === role.role_id)\n                ).map((role) => (\n                  <SelectItem key={role.role_id} value={role.role_id}>\n                    {role.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            <div className=\"flex justify-end gap-2\">\n              <Button variant=\"outline\" onClick={() => setIsAddingRole(false)}>\n                Cancel\n              </Button>\n              <Button \n                onClick={handleAddRole} \n                disabled={!selectedRole || addRoleMutation.isPending}\n              >\n                Add Role\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default MultipleRolesField;"],"names":["forwardRef","createElement","createContext","useContext","toast","supabase","useNavigate","useState","useQuery","jsx","Card","jsxs","CardContent","Avatar","AvatarImage","AvatarFallback","DepartmentRolePairsDisplay","Badge","EditableField","Button","Edit","EditableTable","input","Dialog","DialogTrigger","DialogContent","DialogHeader","DialogTitle","DialogDescription","Label","Input","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","Textarea","DialogFooter","Fragment","useUserProfiles","useCallback","useDropzone","useToast","useViewPreference","useUserManagement","ImportErrorReport","ToggleGroup","ToggleGroupItem","DeleteUserDialog","useQueryClient","useMutation","CardHeader","CardTitle","CardDescription","Switch","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","Loader2","error","useEffect","E","$t","re","X","xt","fe","Popover","PopoverTrigger","PopoverContent","Command","CommandInput","CommandList","CommandEmpty","CommandGroup","CommandItem","cn","Separator","Tabs","TabsList","label","Icon","TabsTrigger","TabsContent","useUserRole","OrganisationProvider","OrganisationPanel","useRef","UserDepartmentsRolesManager","_a","useUserDepartments","useUserProfileRoles","useUserPhysicalLocations","ProfileAvatar","ProfileContactInfo","useProfile","useUserAssets","useMemo","useParams","React","userProfile","EditableProfileHeader","PersonaDetailsTabs","useUserRoleById","userId"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,55]}