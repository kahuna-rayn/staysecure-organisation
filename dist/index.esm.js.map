{"version":3,"file":"index.esm.js","sources":["../node_modules/lucide-react/dist/esm/shared/src/utils.js","../node_modules/lucide-react/dist/esm/defaultAttributes.js","../node_modules/lucide-react/dist/esm/Icon.js","../node_modules/lucide-react/dist/esm/createLucideIcon.js","../node_modules/lucide-react/dist/esm/icons/arrow-down.js","../node_modules/lucide-react/dist/esm/icons/arrow-left.js","../node_modules/lucide-react/dist/esm/icons/arrow-up.js","../node_modules/lucide-react/dist/esm/icons/award.js","../node_modules/lucide-react/dist/esm/icons/book-open.js","../node_modules/lucide-react/dist/esm/icons/building-2.js","../node_modules/lucide-react/dist/esm/icons/building.js","../node_modules/lucide-react/dist/esm/icons/calendar.js","../node_modules/lucide-react/dist/esm/icons/check.js","../node_modules/lucide-react/dist/esm/icons/chevrons-up-down.js","../node_modules/lucide-react/dist/esm/icons/circle-alert.js","../node_modules/lucide-react/dist/esm/icons/clock.js","../node_modules/lucide-react/dist/esm/icons/download.js","../node_modules/lucide-react/dist/esm/icons/eye.js","../node_modules/lucide-react/dist/esm/icons/file-text.js","../node_modules/lucide-react/dist/esm/icons/graduation-cap.js","../node_modules/lucide-react/dist/esm/icons/hash.js","../node_modules/lucide-react/dist/esm/icons/id-card.js","../node_modules/lucide-react/dist/esm/icons/key.js","../node_modules/lucide-react/dist/esm/icons/laptop.js","../node_modules/lucide-react/dist/esm/icons/layout-grid.js","../node_modules/lucide-react/dist/esm/icons/list.js","../node_modules/lucide-react/dist/esm/icons/loader-circle.js","../node_modules/lucide-react/dist/esm/icons/mail.js","../node_modules/lucide-react/dist/esm/icons/map-pin.js","../node_modules/lucide-react/dist/esm/icons/monitor-smartphone.js","../node_modules/lucide-react/dist/esm/icons/network.js","../node_modules/lucide-react/dist/esm/icons/phone.js","../node_modules/lucide-react/dist/esm/icons/play.js","../node_modules/lucide-react/dist/esm/icons/plus.js","../node_modules/lucide-react/dist/esm/icons/save.js","../node_modules/lucide-react/dist/esm/icons/settings.js","../node_modules/lucide-react/dist/esm/icons/shield.js","../node_modules/lucide-react/dist/esm/icons/square-pen.js","../node_modules/lucide-react/dist/esm/icons/star.js","../node_modules/lucide-react/dist/esm/icons/trash-2.js","../node_modules/lucide-react/dist/esm/icons/triangle-alert.js","../node_modules/lucide-react/dist/esm/icons/upload.js","../node_modules/lucide-react/dist/esm/icons/user-check.js","../node_modules/lucide-react/dist/esm/icons/user.js","../node_modules/lucide-react/dist/esm/icons/users.js","../node_modules/lucide-react/dist/esm/icons/x.js","../src/context/OrganisationContext.tsx","../src/config/clients.ts","../src/utils/env.ts","../src/utils/userManagementActions.ts","../src/components/profile/EditableField.tsx","../src/components/organisational/DepartmentRolePairsDisplay.tsx","../src/components/admin/UserCard.tsx","../src/components/admin/UserList.tsx","../src/components/admin/UserTable.tsx","../src/components/admin/CreateUserDialog.tsx","../src/components/admin/EditUserDialog.tsx","../src/utils/managerValidation.ts","../src/components/admin/ImportUsersDialog.tsx","../src/components/admin/UserManagement.tsx","../src/components/organisational/ImportRolesDialog.tsx","../src/components/organisational/RoleManagement.tsx","../src/components/organisational/ImportDepartmentsDialog.tsx","../src/components/organisational/DepartmentManagement.tsx","../src/components/organisational/LocationManagement.tsx","../src/components/certificates/AddOrganisationCertificateDialog.tsx","../src/components/certificates/OrganisationCertificates.tsx","../node_modules/sonner/dist/index.mjs","../src/components/profile/SearchableProfileField.tsx","../src/components/OrganisationProfile.tsx","../src/components/OrganisationPanel.tsx","../src/components/OrganisationWrapper.tsx","../src/components/certificates/EditableCertificates.tsx","../src/components/admin/AssignPhysicalLocationDialog.tsx","../src/components/profile/PhysicalLocationTab.tsx","../src/components/admin/AssignHardwareDialog.tsx","../src/components/admin/AssignSoftwareDialog.tsx","../src/components/certificates/AddCertificatesDialog.tsx","../src/components/organisational/UserDepartmentsRolesTable.tsx","../src/components/organisational/UserDepartmentsRolesManager.tsx","../src/components/profile/PersonaDetailsTabs.tsx","../src/components/profile/ProfileAvatar.tsx","../src/components/profile/UserRoleField.tsx","../src/components/profile/ProfileContactInfo.tsx","../src/components/profile/EditableProfileHeader.tsx","../src/components/profile/PersonaProfile.tsx","../src/components/admin/UserDetailView.tsx","../src/components/certificates/Certificates.tsx","../src/components/admin/AddPhysicalLocationDialog.tsx","../src/components/profile/ProfileBasicInfo.tsx","../src/components/profile/MultipleRolesField.tsx","../src/components/import/ImportErrorReport.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\n\nexport { mergeClasses, toKebabCase };\n//# sourceMappingURL=utils.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\nimport { mergeClasses } from './shared/src/utils.js';\n\nconst Icon = forwardRef(\n  ({\n    color = \"currentColor\",\n    size = 24,\n    strokeWidth = 2,\n    absoluteStrokeWidth,\n    className = \"\",\n    children,\n    iconNode,\n    ...rest\n  }, ref) => {\n    return createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: mergeClasses(\"lucide\", className),\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...Array.isArray(children) ? children : [children]\n      ]\n    );\n  }\n);\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport { mergeClasses, toKebabCase } from './shared/src/utils.js';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ className, ...props }, ref) => createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(`lucide-${toKebabCase(iconName)}`, className),\n      ...props\n    })\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowDown = createLucideIcon(\"ArrowDown\", [\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }],\n  [\"path\", { d: \"m19 12-7 7-7-7\", key: \"1idqje\" }]\n]);\n\nexport { ArrowDown as default };\n//# sourceMappingURL=arrow-down.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowLeft = createLucideIcon(\"ArrowLeft\", [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n]);\n\nexport { ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowUp = createLucideIcon(\"ArrowUp\", [\n  [\"path\", { d: \"m5 12 7-7 7 7\", key: \"hav0vg\" }],\n  [\"path\", { d: \"M12 19V5\", key: \"x0mq9r\" }]\n]);\n\nexport { ArrowUp as default };\n//# sourceMappingURL=arrow-up.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Award = createLucideIcon(\"Award\", [\n  [\n    \"path\",\n    {\n      d: \"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526\",\n      key: \"1yiouv\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"8\", r: \"6\", key: \"1vp47v\" }]\n]);\n\nexport { Award as default };\n//# sourceMappingURL=award.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BookOpen = createLucideIcon(\"BookOpen\", [\n  [\"path\", { d: \"M12 7v14\", key: \"1akyts\" }],\n  [\n    \"path\",\n    {\n      d: \"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z\",\n      key: \"ruj8y\"\n    }\n  ]\n]);\n\nexport { BookOpen as default };\n//# sourceMappingURL=book-open.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Building2 = createLucideIcon(\"Building2\", [\n  [\"path\", { d: \"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z\", key: \"1b4qmf\" }],\n  [\"path\", { d: \"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2\", key: \"i71pzd\" }],\n  [\"path\", { d: \"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2\", key: \"10jefs\" }],\n  [\"path\", { d: \"M10 6h4\", key: \"1itunk\" }],\n  [\"path\", { d: \"M10 10h4\", key: \"tcdvrf\" }],\n  [\"path\", { d: \"M10 14h4\", key: \"kelpxr\" }],\n  [\"path\", { d: \"M10 18h4\", key: \"1ulq68\" }]\n]);\n\nexport { Building2 as default };\n//# sourceMappingURL=building-2.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Building = createLucideIcon(\"Building\", [\n  [\"rect\", { width: \"16\", height: \"20\", x: \"4\", y: \"2\", rx: \"2\", ry: \"2\", key: \"76otgf\" }],\n  [\"path\", { d: \"M9 22v-4h6v4\", key: \"r93iot\" }],\n  [\"path\", { d: \"M8 6h.01\", key: \"1dz90k\" }],\n  [\"path\", { d: \"M16 6h.01\", key: \"1x0f13\" }],\n  [\"path\", { d: \"M12 6h.01\", key: \"1vi96p\" }],\n  [\"path\", { d: \"M12 10h.01\", key: \"1nrarc\" }],\n  [\"path\", { d: \"M12 14h.01\", key: \"1etili\" }],\n  [\"path\", { d: \"M16 10h.01\", key: \"1m94wz\" }],\n  [\"path\", { d: \"M16 14h.01\", key: \"1gbofw\" }],\n  [\"path\", { d: \"M8 10h.01\", key: \"19clt8\" }],\n  [\"path\", { d: \"M8 14h.01\", key: \"6423bh\" }]\n]);\n\nexport { Building as default };\n//# sourceMappingURL=building.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Calendar = createLucideIcon(\"Calendar\", [\n  [\"path\", { d: \"M8 2v4\", key: \"1cmpym\" }],\n  [\"path\", { d: \"M16 2v4\", key: \"4m81vk\" }],\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"4\", rx: \"2\", key: \"1hopcy\" }],\n  [\"path\", { d: \"M3 10h18\", key: \"8toen8\" }]\n]);\n\nexport { Calendar as default };\n//# sourceMappingURL=calendar.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"Check\", [[\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronsUpDown = createLucideIcon(\"ChevronsUpDown\", [\n  [\"path\", { d: \"m7 15 5 5 5-5\", key: \"1hf1tw\" }],\n  [\"path\", { d: \"m7 9 5-5 5 5\", key: \"sgt6xg\" }]\n]);\n\nexport { ChevronsUpDown as default };\n//# sourceMappingURL=chevrons-up-down.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CircleAlert = createLucideIcon(\"CircleAlert\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n]);\n\nexport { CircleAlert as default };\n//# sourceMappingURL=circle-alert.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Clock = createLucideIcon(\"Clock\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16 14\", key: \"68esgv\" }]\n]);\n\nexport { Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Download = createLucideIcon(\"Download\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"7 10 12 15 17 10\", key: \"2ggqvy\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"15\", y2: \"3\", key: \"1vk2je\" }]\n]);\n\nexport { Download as default };\n//# sourceMappingURL=download.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Eye = createLucideIcon(\"Eye\", [\n  [\n    \"path\",\n    {\n      d: \"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0\",\n      key: \"1nclc0\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Eye as default };\n//# sourceMappingURL=eye.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileText = createLucideIcon(\"FileText\", [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\"path\", { d: \"M10 9H8\", key: \"b1mrlr\" }],\n  [\"path\", { d: \"M16 13H8\", key: \"t4e002\" }],\n  [\"path\", { d: \"M16 17H8\", key: \"z1uh3a\" }]\n]);\n\nexport { FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst GraduationCap = createLucideIcon(\"GraduationCap\", [\n  [\n    \"path\",\n    {\n      d: \"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z\",\n      key: \"j76jl0\"\n    }\n  ],\n  [\"path\", { d: \"M22 10v6\", key: \"1lu8f3\" }],\n  [\"path\", { d: \"M6 12.5V16a6 3 0 0 0 12 0v-3.5\", key: \"1r8lef\" }]\n]);\n\nexport { GraduationCap as default };\n//# sourceMappingURL=graduation-cap.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Hash = createLucideIcon(\"Hash\", [\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"9\", y2: \"9\", key: \"4lhtct\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"15\", y2: \"15\", key: \"vyu0kd\" }],\n  [\"line\", { x1: \"10\", x2: \"8\", y1: \"3\", y2: \"21\", key: \"1ggp8o\" }],\n  [\"line\", { x1: \"16\", x2: \"14\", y1: \"3\", y2: \"21\", key: \"weycgp\" }]\n]);\n\nexport { Hash as default };\n//# sourceMappingURL=hash.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst IdCard = createLucideIcon(\"IdCard\", [\n  [\"path\", { d: \"M16 10h2\", key: \"8sgtl7\" }],\n  [\"path\", { d: \"M16 14h2\", key: \"epxaof\" }],\n  [\"path\", { d: \"M6.17 15a3 3 0 0 1 5.66 0\", key: \"n6f512\" }],\n  [\"circle\", { cx: \"9\", cy: \"11\", r: \"2\", key: \"yxgjnd\" }],\n  [\"rect\", { x: \"2\", y: \"5\", width: \"20\", height: \"14\", rx: \"2\", key: \"qneu4z\" }]\n]);\n\nexport { IdCard as default };\n//# sourceMappingURL=id-card.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Key = createLucideIcon(\"Key\", [\n  [\"path\", { d: \"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4\", key: \"g0fldk\" }],\n  [\"path\", { d: \"m21 2-9.6 9.6\", key: \"1j0ho8\" }],\n  [\"circle\", { cx: \"7.5\", cy: \"15.5\", r: \"5.5\", key: \"yqb3hr\" }]\n]);\n\nexport { Key as default };\n//# sourceMappingURL=key.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Laptop = createLucideIcon(\"Laptop\", [\n  [\n    \"path\",\n    {\n      d: \"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16\",\n      key: \"tarvll\"\n    }\n  ]\n]);\n\nexport { Laptop as default };\n//# sourceMappingURL=laptop.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LayoutGrid = createLucideIcon(\"LayoutGrid\", [\n  [\"rect\", { width: \"7\", height: \"7\", x: \"3\", y: \"3\", rx: \"1\", key: \"1g98yp\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"14\", y: \"3\", rx: \"1\", key: \"6d4xhi\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"14\", y: \"14\", rx: \"1\", key: \"nxv5o0\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"3\", y: \"14\", rx: \"1\", key: \"1bb6yr\" }]\n]);\n\nexport { LayoutGrid as default };\n//# sourceMappingURL=layout-grid.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst List = createLucideIcon(\"List\", [\n  [\"path\", { d: \"M3 12h.01\", key: \"nlz23k\" }],\n  [\"path\", { d: \"M3 18h.01\", key: \"1tta3j\" }],\n  [\"path\", { d: \"M3 6h.01\", key: \"1rqtza\" }],\n  [\"path\", { d: \"M8 12h13\", key: \"1za7za\" }],\n  [\"path\", { d: \"M8 18h13\", key: \"1lx6n3\" }],\n  [\"path\", { d: \"M8 6h13\", key: \"ik3vkj\" }]\n]);\n\nexport { List as default };\n//# sourceMappingURL=list.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LoaderCircle = createLucideIcon(\"LoaderCircle\", [\n  [\"path\", { d: \"M21 12a9 9 0 1 1-6.219-8.56\", key: \"13zald\" }]\n]);\n\nexport { LoaderCircle as default };\n//# sourceMappingURL=loader-circle.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Mail = createLucideIcon(\"Mail\", [\n  [\"rect\", { width: \"20\", height: \"16\", x: \"2\", y: \"4\", rx: \"2\", key: \"18n3k1\" }],\n  [\"path\", { d: \"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\", key: \"1ocrg3\" }]\n]);\n\nexport { Mail as default };\n//# sourceMappingURL=mail.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MapPin = createLucideIcon(\"MapPin\", [\n  [\n    \"path\",\n    {\n      d: \"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0\",\n      key: \"1r0f0z\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"10\", r: \"3\", key: \"ilqhr7\" }]\n]);\n\nexport { MapPin as default };\n//# sourceMappingURL=map-pin.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MonitorSmartphone = createLucideIcon(\"MonitorSmartphone\", [\n  [\"path\", { d: \"M18 8V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h8\", key: \"10dyio\" }],\n  [\"path\", { d: \"M10 19v-3.96 3.15\", key: \"1irgej\" }],\n  [\"path\", { d: \"M7 19h5\", key: \"qswx4l\" }],\n  [\"rect\", { width: \"6\", height: \"10\", x: \"16\", y: \"12\", rx: \"2\", key: \"1egngj\" }]\n]);\n\nexport { MonitorSmartphone as default };\n//# sourceMappingURL=monitor-smartphone.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Network = createLucideIcon(\"Network\", [\n  [\"rect\", { x: \"16\", y: \"16\", width: \"6\", height: \"6\", rx: \"1\", key: \"4q2zg0\" }],\n  [\"rect\", { x: \"2\", y: \"16\", width: \"6\", height: \"6\", rx: \"1\", key: \"8cvhb9\" }],\n  [\"rect\", { x: \"9\", y: \"2\", width: \"6\", height: \"6\", rx: \"1\", key: \"1egb70\" }],\n  [\"path\", { d: \"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3\", key: \"1jsf9p\" }],\n  [\"path\", { d: \"M12 12V8\", key: \"2874zd\" }]\n]);\n\nexport { Network as default };\n//# sourceMappingURL=network.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Phone = createLucideIcon(\"Phone\", [\n  [\n    \"path\",\n    {\n      d: \"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\",\n      key: \"foiqr5\"\n    }\n  ]\n]);\n\nexport { Phone as default };\n//# sourceMappingURL=phone.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Play = createLucideIcon(\"Play\", [\n  [\"polygon\", { points: \"6 3 20 12 6 21 6 3\", key: \"1oa8hb\" }]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Plus = createLucideIcon(\"Plus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n]);\n\nexport { Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Save = createLucideIcon(\"Save\", [\n  [\n    \"path\",\n    {\n      d: \"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z\",\n      key: \"1c8476\"\n    }\n  ],\n  [\"path\", { d: \"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7\", key: \"1ydtos\" }],\n  [\"path\", { d: \"M7 3v4a1 1 0 0 0 1 1h7\", key: \"t51u73\" }]\n]);\n\nexport { Save as default };\n//# sourceMappingURL=save.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings = createLucideIcon(\"Settings\", [\n  [\n    \"path\",\n    {\n      d: \"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z\",\n      key: \"1qme2f\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shield = createLucideIcon(\"Shield\", [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ]\n]);\n\nexport { Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst SquarePen = createLucideIcon(\"SquarePen\", [\n  [\"path\", { d: \"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\", key: \"1m0v6g\" }],\n  [\n    \"path\",\n    {\n      d: \"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z\",\n      key: \"ohrbg2\"\n    }\n  ]\n]);\n\nexport { SquarePen as default };\n//# sourceMappingURL=square-pen.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Star = createLucideIcon(\"Star\", [\n  [\n    \"path\",\n    {\n      d: \"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z\",\n      key: \"r04s7s\"\n    }\n  ]\n]);\n\nexport { Star as default };\n//# sourceMappingURL=star.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trash2 = createLucideIcon(\"Trash2\", [\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\", key: \"4alrt4\" }],\n  [\"path\", { d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\", key: \"v07s0e\" }],\n  [\"line\", { x1: \"10\", x2: \"10\", y1: \"11\", y2: \"17\", key: \"1uufr5\" }],\n  [\"line\", { x1: \"14\", x2: \"14\", y1: \"11\", y2: \"17\", key: \"xtxkd\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TriangleAlert = createLucideIcon(\"TriangleAlert\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\",\n      key: \"wmoenq\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { TriangleAlert as default };\n//# sourceMappingURL=triangle-alert.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"Upload\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"17 8 12 3 7 8\", key: \"t8dd8p\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"3\", y2: \"15\", key: \"widbto\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst UserCheck = createLucideIcon(\"UserCheck\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"polyline\", { points: \"16 11 18 13 22 9\", key: \"1pwet4\" }]\n]);\n\nexport { UserCheck as default };\n//# sourceMappingURL=user-check.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst User = createLucideIcon(\"User\", [\n  [\"path\", { d: \"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\", key: \"975kel\" }],\n  [\"circle\", { cx: \"12\", cy: \"7\", r: \"4\", key: \"17ys0d\" }]\n]);\n\nexport { User as default };\n//# sourceMappingURL=user.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Users = createLucideIcon(\"Users\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"path\", { d: \"M16 3.13a4 4 0 0 1 0 7.75\", key: \"1da9ce\" }]\n]);\n\nexport { Users as default };\n//# sourceMappingURL=users.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","import React, { createContext, useContext, ReactNode } from 'react';\nimport type { OrganisationConfig } from '../types';\n\ninterface OrganisationContextValue extends OrganisationConfig {\n  isTabEnabled: (tab: string) => boolean;\n  hasPermission: (permission: keyof NonNullable<OrganisationConfig['permissions']>) => boolean;\n}\n\nconst OrganisationContext = createContext<OrganisationContextValue | null>(null);\n\ninterface OrganisationProviderProps {\n  config: OrganisationConfig;\n  children: ReactNode;\n}\n\nconst defaultPermissions = {\n  canCreateUsers: true,\n  canEditUsers: true,\n  canDeleteUsers: true,\n  canManageRoles: true,\n  canManageDepartments: true,\n  canManageLocations: true,\n  canManageCertificates: true,\n  canManageProfile: true,\n};\n\nconst defaultEnabledTabs = ['users', 'roles', 'departments', 'locations', 'certificates', 'profile'];\n\nexport const OrganisationProvider: React.FC<OrganisationProviderProps> = ({ config, children }) => {\n  const isTabEnabled = (tab: string): boolean => {\n    const enabledTabs = config.enabledTabs || defaultEnabledTabs;\n    return enabledTabs.includes(tab);\n  };\n\n  const hasPermission = (permission: keyof NonNullable<OrganisationConfig['permissions']>): boolean => {\n    const permissions = { ...defaultPermissions, ...config.permissions };\n    return permissions[permission] ?? true;\n  };\n\n  const contextValue: OrganisationContextValue = {\n    ...config,\n    isTabEnabled,\n    hasPermission,\n  };\n\n  return (\n    <OrganisationContext.Provider value={contextValue}>\n      {children}\n    </OrganisationContext.Provider>\n  );\n};\n\nexport const useOrganisationContext = (): OrganisationContextValue => {\n  const context = useContext(OrganisationContext);\n  if (!context) {\n    throw new Error('useOrganisationContext must be used within OrganisationProvider');\n  }\n  return context;\n};","// Stub config for organisation module\n// This should be provided by the consuming application\nexport const CLIENT_CONFIGS: Record<string, { supabaseAnonKey?: string }> = {\n  default: {}\n};\n\n","/**\n * Environment variable utility\n * Works in both Vite (import.meta.env) and Jest (process.env) contexts\n */\n\n// Check if we're in a test environment (Jest sets NODE_ENV to 'test')\nconst isTestEnvironment = typeof process !== 'undefined' && \n  (process.env.NODE_ENV === 'test' || process.env.JEST_WORKER_ID !== undefined);\n\n/**\n * Get an environment variable value\n * @param key - The environment variable key (e.g., 'VITE_SUPABASE_URL')\n * @returns The environment variable value or undefined\n */\nexport const getEnvVar = (key: string): string | undefined => {\n  // In Jest/test time - use process.env\n  if (isTestEnvironment && typeof process !== 'undefined' && process.env) {\n    return process.env[key];\n  }\n  \n  // In Vite/build time - use import.meta.env\n  // We use a dynamic check to avoid parsing import.meta in Jest\n  // @ts-expect-error - import.meta is available in Vite but not in Jest/Node\n  const metaEnv = typeof globalThis !== 'undefined' && (globalThis as any).__VITE_META_ENV__;\n  if (metaEnv) {\n    return metaEnv[key];\n  }\n  \n  // Direct access to import.meta.env (only works in Vite, will fail in Jest but that's ok)\n  // We wrap it in a way that Jest's transformer can handle\n  try {\n    // @ts-expect-error - import.meta is not available in Jest\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    return import.meta.env[key];\n  } catch {\n    // import.meta not available (e.g., in Jest) - fallback to process.env\n    if (typeof process !== 'undefined' && process.env) {\n      return process.env[key];\n    }\n  }\n  \n  return undefined;\n};\n\n/**\n * Get Supabase URL from environment\n */\nexport const getSupabaseUrl = (): string | undefined => {\n  return getEnvVar('VITE_SUPABASE_URL');\n};\n\n/**\n * Get Supabase anon key from environment\n * Tries multiple possible keys\n */\nexport const getSupabaseAnonKey = (): string | undefined => {\n  return (\n    getEnvVar('VITE_SUPABASE_ANON_KEY') ||\n    getEnvVar('VITE_SUPABASE_PUB_KEY') ||\n    getEnvVar('VITE_SB_PUB_KEY')\n  );\n};\n\n","import { supabase, getCurrentClientId } from '@/integrations/supabase/client';\nimport { CLIENT_CONFIGS } from '@/config/clients';\nimport { toast } from '@/components/ui/use-toast';\nimport type { UserProfile } from '@/hooks/useUserProfiles';\nimport { getSupabaseUrl, getSupabaseAnonKey } from '@/utils/env';\n\n// Define NewUser type locally since it's not exported from useUserManagement\ninterface NewUser {\n  full_name: string;\n  first_name?: string;\n  last_name?: string;\n  username?: string;\n  email: string;\n  phone?: string;\n  location?: string;\n  location_id?: string;\n  status?: string;\n  access_level?: string;\n  bio?: string;\n  employee_id?: string;\n  role?: string;\n  department?: string;\n}\n\nexport const handleSaveUser = async (\n  editingUser: any, // Use any to work around type conflicts\n  updateProfile: (id: string, updates: Partial<UserProfile>) => Promise<void>,\n  onSuccess: () => void\n) => {\n  try {\n    await updateProfile(editingUser.id, editingUser);\n    toast({\n      title: \"Success\",\n      description: \"User updated successfully\",\n    });\n    onSuccess();\n  } catch (error: any) {\n    toast({\n      title: \"Error\",\n      description: error.message,\n      variant: \"destructive\",\n    });\n  }\n};\n\nexport const handleCreateUser = async (\n  newUser: NewUser,\n  updateProfile: (id: string, updates: Partial<UserProfile>) => Promise<void>,\n  onSuccess: () => void\n) => {\n  try {\n    // Extract client path using the same logic as client.ts\n    const clientId = getCurrentClientId();\n    const clientPath = clientId ? `/${clientId}` : '';\n    \n    const { data: sessionData, error: sessionError } = await supabase.auth.getSession();\n    if (sessionError || !sessionData?.session?.access_token) {\n      throw new Error('Unable to determine current session. Please refresh and try again.');\n    }\n\n    const accessToken = sessionData.session.access_token;\n\n    const clientConfig =\n      (clientId && CLIENT_CONFIGS[clientId]) ||\n      CLIENT_CONFIGS['default'];\n\n    const anonKey =\n      clientConfig?.supabaseAnonKey ||\n      getSupabaseAnonKey();\n\n    // Build Edge Function URL using the project URL\n    const baseUrl = getSupabaseUrl()?.replace(/\\/$/, '');\n    if (!baseUrl) {\n      throw new Error('Supabase base URL is not configured.');\n    }\n\n    const createUserUrl = `${baseUrl}/functions/v1/create-user`;\n\n    console.log('[handleCreateUser] Invoking create-user Edge Function', {\n      createUserUrl,\n      hasAnonKey: !!anonKey,\n      hasAccessToken: !!accessToken,\n      clientId,\n    });\n\n    const response = await fetch(createUserUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        ...(anonKey ? { apikey: anonKey } : {}),\n        ...(accessToken ? { Authorization: `Bearer ${accessToken}` } : {}),\n      },\n      body: JSON.stringify({\n        email: newUser.email,\n        full_name: newUser.full_name,\n        first_name: newUser.first_name || '',\n        last_name: newUser.last_name || '',\n        username: '',\n        phone: newUser.phone || '',\n        location: newUser.location || '',\n        location_id: newUser.location_id || null,\n        status: 'Pending',\n        access_level: newUser.access_level || 'User',\n        bio: newUser.bio || '',\n        employee_id: newUser.employee_id || '',\n        clientPath // Pass client path explicitly\n      })\n    });\n\n    const rawText = await response.text();\n    let data: any = null;\n    try {\n      data = rawText ? JSON.parse(rawText) : null;\n    } catch (parseError) {\n      console.warn('[handleCreateUser] Failed to parse Edge Function response as JSON', {\n        parseError,\n        rawText,\n        status: response.status,\n      });\n    }\n\n    console.log('[handleCreateUser] Edge Function response summary', {\n      status: response.status,\n      ok: response.ok,\n      dataPreview: data ? JSON.stringify(data).slice(0, 200) : rawText?.slice(0, 200),\n    });\n\n    const error = !response.ok\n      ? { message: data?.error || rawText || response.statusText || `Request failed with status ${response.status}` }\n      : null;\n\n    if (error) {\n      throw new Error(error.message || 'Failed to create user');\n    }\n\n    // Check if the function returned an error (since Edge Functions return 200 even for errors)\n    if (data?.error) {\n      console.error('Edge Function returned error:', data.error);\n      console.error('Full Edge Function response:', data);\n      throw new Error(data.error);\n    }\n\n    if (!data || !data.user) {\n      throw new Error('No user data returned from create-user function');\n    }\n\n    const { user } = data;\n\n    // Update profile with additional data (except status - let Edge Function handle it)\n    if (user?.id) {\n      await updateProfile(user.id, {\n        full_name: newUser.full_name,\n        first_name: newUser.first_name,\n        last_name: newUser.last_name,\n        username: newUser.email, \n        phone: newUser.phone,\n        location: newUser.location,\n        location_id: newUser.location_id || null,\n        // Don't update status - Edge Function sets it to 'Pending' for activation\n        bio: newUser.bio,\n        employee_id: newUser.employee_id,\n      });\n\n            // Assign physical location access if location is selected\n      if (newUser.location_id) {\n        try {\n          const locationData = {\n            user_id: user.id,\n            location_id: newUser.location_id,\n            full_name: newUser.full_name,\n            access_purpose: 'General Access',\n            status: 'Active',\n            date_access_created: new Date().toISOString()\n          };\n\n          const { data: locationDataResult, error: locationError } = await supabase\n            .from('physical_location_access')\n            .insert(locationData)\n            .select();\n\n          if (locationError) {\n            console.error('❌ Error assigning physical location access:', locationError);\n          }\n        } catch (locationError) {\n          console.error('❌ Exception assigning physical location access:', locationError);\n        }\n      }\n    }\n\n    toast({\n      title: \"Success\",\n      description: \"User created successfully\",\n    });\n    \n    onSuccess();\n  } catch (error: any) {\n    console.error('Error creating user:', error);\n    toast({\n      title: \"Error\",\n      description: error.message || \"Failed to create user\",\n      variant: \"destructive\",\n    });\n  }\n};\n\nexport const handleDeleteUser = async (userId: string, userName: string, reason?: string): Promise<{ success: boolean; deletedUser?: any; error?: string }> => {\n  try {\n    // Call the delete-user Edge Function\n    const { data, error } = await supabase.functions.invoke('delete-user', {\n      body: {\n        userId,\n        reason: reason || undefined\n      }\n    });\n\n    if (error) {\n      console.error('Error calling delete function:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete user\",\n        variant: \"destructive\",\n      });\n      return { success: false, error: \"Failed to delete user\" };\n    }\n\n    if (!data.success) {\n      console.error('Delete function returned error:', data.error);\n      toast({\n        title: \"Error\",\n        description: data.error || \"Failed to delete user\",\n        variant: \"destructive\",\n      });\n      return { success: false, error: data.error || \"Failed to delete user\" };\n    }\n\n    return { success: true, deletedUser: data.deletedUser };\n  } catch (error: any) {\n    console.error('Error deleting user:', error);\n    toast({\n      title: \"Error\",\n      description: \"Failed to delete user\",\n      variant: \"destructive\",\n    });\n    return { success: false, error: \"Failed to delete user\" };\n  }\n};","import React from 'react';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\n\ninterface EditableFieldProps {\n  value: string;\n  fieldKey?: string;\n  label?: string;\n  placeholder?: string;\n  className?: string;\n  inputClassName?: string;\n  locationId?: string;\n  isEditing: boolean;\n  onEdit: (field: string) => void;\n  onSave: (field: string, value: string) => Promise<void>;\n  onCancel: () => void;\n  saving: boolean;\n  type?: 'text' | 'select' | 'date';\n  options?: string[];\n  asyncOptions?: { value: string; label: string; id?: string }[];\n  isLoading?: boolean;\n  onSelectChange?: (value: string, selectedOption?: { value: string; label: string; id?: string }) => void;\n}\n\nconst EditableField: React.FC<EditableFieldProps> = ({\n  value,\n  fieldKey,\n  label,\n  placeholder,\n  className,\n  inputClassName,\n  locationId,\n  isEditing,\n  onEdit,\n  onSave,\n  onCancel,\n  type = 'text',\n  options,\n  asyncOptions,\n  isLoading,\n  onSelectChange,\n}) => {\n  const [editValue, setEditValue] = React.useState(value);\n\n  React.useEffect(() => {\n    setEditValue(value);\n  }, [value, isEditing]);\n\n  // Phone number validation function\n  const validatePhoneInput = (input: string): string => {\n    // Only allow numbers, +, spaces, and common phone separators\n    return input.replace(/[^0-9+\\s\\-\\(\\)]/g, '');\n  };\n\n  const handleSave = async () => {\n    if (fieldKey) {\n      await onSave(fieldKey, editValue);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      handleSave();\n    } else if (e.key === 'Escape') {\n      onCancel();\n    }\n  };\n\n  // Handle input change with phone validation\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.value;\n    \n    // Apply phone validation only for phone fields\n    if (fieldKey === 'phone') {\n      const validatedValue = validatePhoneInput(newValue);\n      setEditValue(validatedValue);\n    } else {\n      setEditValue(newValue);\n    }\n  };\n\n  if (isEditing) {\n    if (type === 'select' && (options || asyncOptions)) {\n      const selectOptions = asyncOptions || options?.map(opt => ({ value: opt, label: opt })) || [];\n      \n      return (\n        <Select \n          value={editValue} \n          onValueChange={(newValue) => {\n            setEditValue(newValue);\n            const selectedOption = selectOptions.find(opt => opt.value === newValue);\n            if (onSelectChange && selectedOption) {\n              onSelectChange(newValue, selectedOption);\n            } else {\n              handleSave();\n            }\n          }}\n          disabled={isLoading}\n        >\n          <SelectTrigger className={inputClassName || \"w-48\"}>\n            <SelectValue placeholder={isLoading ? \"Loading...\" : \"Select location\"} />\n          </SelectTrigger>\n          <SelectContent>\n            {selectOptions.length === 0 && !isLoading && (\n              <SelectItem value=\"none\" disabled>No locations assigned</SelectItem>\n            )}\n            {selectOptions.map(option => (\n              <SelectItem key={option.value} value={option.value}>\n                {option.label}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      );\n    }\n\n    return (\n      <Input\n        type={type}\n        value={editValue}\n        placeholder={placeholder}\n        onChange={handleInputChange} // Use the new handler\n        onBlur={handleSave}\n        onKeyDown={handleKeyDown}\n        className={inputClassName || \"h-6 text-sm w-32\"}\n        autoFocus\n      />\n    );\n  }\n\n  return (\n    <div className={className}>\n      {label && <span className=\"text-sm text-muted-foreground mr-2\">{label}</span>}\n      <span \n        className=\"cursor-pointer hover:bg-muted/50 px-2 py-1 rounded transition-colors\"\n        onClick={() => fieldKey && onEdit(fieldKey)}\n      >\n        {value || placeholder}\n      </span>\n    </div>\n  );\n};\n\nexport default EditableField;","import React from 'react';\nimport { Badge } from '@/components/ui/badge';\n\ninterface DepartmentRolePair {\n  department: string;\n  role: string;\n}\n\ninterface DepartmentRolePairsDisplayProps {\n  pairs?: DepartmentRolePair[];\n  userId?: string;\n}\n\nexport const DepartmentRolePairsDisplay: React.FC<DepartmentRolePairsDisplayProps> = ({ pairs, userId }) => {\n  // If userId is provided, we could fetch the pairs here\n  // For now, just display the pairs if provided\n  if (!pairs || pairs.length === 0) {\n    return <span className=\"text-muted-foreground\">No assignments</span>;\n  }\n\n  return (\n    <div className=\"flex flex-wrap gap-1\">\n      {pairs.map((pair, index) => (\n        <Badge key={index} variant=\"secondary\" className=\"text-xs\">\n          {pair.department} - {pair.role}\n        </Badge>\n      ))}\n    </div>\n  );\n};","\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useQuery } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { Edit, Trash2, Phone, MapPin, IdCard, Mail, Eye, Settings } from 'lucide-react';\nimport EditableField from '../profile/EditableField';\nimport { toast } from '@/components/ui/use-toast';\nimport { DepartmentRolePairsDisplay } from '../organisational/DepartmentRolePairsDisplay';\nimport type { UserProfile } from '@/hooks/useUserProfiles';\n\ninterface UserCardProps {\n  user: UserProfile;\n  onEdit: (user: UserProfile) => void;\n  onDelete: (userId: string) => void;\n}\n\nconst UserCard: React.FC<UserCardProps> = ({ user, onEdit, onDelete }) => {\n  const navigate = useNavigate();\n  const [editingField, setEditingField] = useState<string | null>(null);\n  const [saving, setSaving] = useState(false);\n\n  const initials = user.full_name \n    ? user.full_name.split(' ').map(n => n.charAt(0)).join('').slice(0, 2)\n    : user.username?.slice(0, 2) || 'U';\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'Active': return 'bg-green-500';\n      case 'Inactive': return 'bg-red-500';\n      case 'OnLeave': return 'bg-yellow-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  // Fetch physical location access for this user\n  const { data: locationAccess = [] } = useQuery({\n    queryKey: ['user-location-access', user.email],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('physical_location_access')\n        .select('access_purpose, status')\n        .eq('user_id', user.id)\n        .eq('status', 'Active');\n      \n      if (error) throw error;\n      return data;\n    },\n  });\n\n  const handleFieldSave = async (fieldKey: string, value: string) => {\n    setSaving(true);\n    try {\n      if (fieldKey === 'email') {\n        toast({\n          title: \"Email Update Limitation\",\n          description: \"Email addresses are managed by authentication and cannot be updated directly from this interface.\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      \n      const updatedUser = { ...user, [fieldKey]: value };\n      onEdit(updatedUser);\n      \n      toast({\n        title: \"Field updated\",\n        description: `${fieldKey} has been updated successfully.`,\n      });\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    } finally {\n      setSaving(false);\n      setEditingField(null);\n    }\n  };\n\n  const handleViewDetails = () => {\n    navigate(`/admin/users/${user.id}`);\n  };\n\n  return (\n    <Card className=\"cursor-pointer hover:shadow-md transition-shadow\" onClick={handleViewDetails}>\n      <CardContent className=\"p-4\">\n        <div className=\"flex items-start justify-between mb-3\">\n          <div className=\"flex items-center gap-3\">\n            <Avatar className=\"h-10 w-10\">\n              <AvatarImage src={user.avatar_url} />\n              <AvatarFallback>{initials}</AvatarFallback>\n            </Avatar>\n            <div>\n              <h3 className=\"font-medium\">{user.full_name || 'No name'}</h3>\n              <div className=\"text-sm text-muted-foreground\">\n                <DepartmentRolePairsDisplay userId={user.id} />\n              </div>\n            </div>\n          </div>\n          <Badge className={`${getStatusColor(user.status || 'Active')} text-white`}>\n            {user.status || 'Active'}\n          </Badge>\n        </div>\n\n        <div className=\"space-y-2 text-sm\">\n          <div className=\"flex items-center gap-2\">\n            <Mail className=\"h-3 w-3 text-muted-foreground\" />\n            <EditableField\n              value={user.email || 'No email'}\n              fieldKey=\"email\"\n              placeholder=\"Enter email\"\n              className=\"flex-1\"\n              inputClassName=\"text-sm\"\n              onSave={handleFieldSave}\n              isEditing={editingField === 'email'}\n              onEdit={setEditingField}\n              onCancel={() => setEditingField(null)}\n              saving={saving}\n            />\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <IdCard className=\"h-3 w-3 text-muted-foreground\" />\n            <span className=\"text-muted-foreground\">ID: {user.employee_id || 'Not set'}</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Phone className=\"h-3 w-3 text-muted-foreground\" />\n            <span className=\"text-muted-foreground\">{user.phone || 'No phone'}</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <MapPin className=\"h-3 w-3 text-muted-foreground\" />\n            <span className=\"text-muted-foreground\">{user.location || 'No location'}</span>\n          </div>\n          \n          {/* Physical Location Access Section */}\n          {locationAccess.length > 0 && (\n            <div className=\"mt-3 pt-3 border-t\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <MapPin className=\"h-3 w-3 text-muted-foreground\" />\n                <span className=\"text-xs font-medium text-muted-foreground\">Physical Access:</span>\n              </div>\n              <div className=\"flex flex-wrap gap-1\">\n                {locationAccess.slice(0, 3).map((access, index) => (\n                  <Badge key={index} variant=\"outline\" className=\"text-xs\">\n                    {access.access_purpose || 'Unknown Purpose'}\n                  </Badge>\n                ))}\n                {locationAccess.length > 3 && (\n                  <Badge variant=\"outline\" className=\"text-xs\">\n                    +{locationAccess.length - 3} more\n                  </Badge>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex gap-2 mt-4\" onClick={(e) => e.stopPropagation()}>\n          <Button size=\"sm\" variant=\"outline\" onClick={handleViewDetails}>\n            <Eye className=\"h-3 w-3\" />\n          </Button>\n          <Button size=\"sm\" variant=\"outline\" onClick={() => navigate(`/admin/users/${user.id}`)}>\n            <Settings className=\"h-3 w-3\" />\n          </Button>\n          <Button size=\"sm\" variant=\"outline\" onClick={() => onEdit(user)}>\n            <Edit className=\"h-3 w-3\" />\n          </Button>\n          <Button size=\"sm\" variant=\"outline\" onClick={() => onDelete(user.id)}>\n            <Trash2 className=\"h-3 w-3\" />\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default UserCard;\n","\nimport React from 'react';\nimport UserCard from './UserCard';\nimport type { UserProfile } from '@/hooks/useUserProfiles';\n\ninterface UserListProps {\n  profiles: UserProfile[];\n  onEdit: (user: UserProfile) => void;\n  onDelete: (userId: string) => void;\n}\n\nconst UserList: React.FC<UserListProps> = ({ profiles, onEdit, onDelete }) => {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n      {profiles.map((user) => (\n        <UserCard\n          key={user.id}\n          user={user}\n          onEdit={onEdit}\n          onDelete={onDelete}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default UserList;\n","\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { EditableTable } from '@/components/ui/editable-table';\nimport type { UserProfile } from '@/hooks/useUserProfiles';\n\ninterface UserTableProps {\n  profiles: UserProfile[];\n  onEdit: (user: UserProfile) => void;\n  onDelete: (userId: string) => void;\n  onUpdate: (id: string, updates: Partial<UserProfile>) => Promise<{ success: boolean; error?: string }>;\n  onCreate?: (data: Partial<UserProfile>) => Promise<{ success: boolean; error?: string }>;\n}\n\nconst UserTable: React.FC<UserTableProps> = ({ \n  profiles, \n  onUpdate,\n  onDelete,\n  onCreate \n}) => {\n  const navigate = useNavigate();\n\n  const columns = [\n    { \n      key: 'full_name', \n      header: 'Full Name', \n      type: 'text' as const, \n      editable: true, \n      required: true,\n      sortable: true,\n      width: '300px'\n    },\n    { \n      key: 'username', \n      header: 'Username', \n      type: 'text' as const, \n      editable: true,\n      sortable: true,\n      width: '200px'\n    },\n    { \n      key: 'phone', \n      header: 'Phone', \n      type: 'text' as const, \n      editable: true,\n      sortable: false,\n      width: '150px'\n    },\n    { \n      key: 'location', \n      header: 'Location', \n      type: 'text' as const, \n      editable: true,\n      sortable: true,\n      width: '150px'\n    },\n    { \n      key: 'status', \n      header: 'Status', \n      type: 'badge' as const, \n      editable: true,\n      sortable: true,\n      options: ['Active', 'Inactive', 'OnLeave'],\n      width: '120px'\n    }\n  ];\n\n  const handleDelete = async (id: string) => {\n    return new Promise<{ success: boolean; error?: string }>((resolve) => {\n      onDelete(id);\n      resolve({ success: true });\n    });\n  };\n\n  const handleViewUser = (user: UserProfile) => {\n    navigate(`/admin/users/${user.id}`);\n  };\n\n  return (\n    <div className=\"w-full\">\n      <EditableTable\n        data={profiles}\n        columns={columns}\n        onUpdate={onUpdate}\n        onDelete={handleDelete}\n        onCreate={onCreate}\n        onViewUser={handleViewUser}\n        allowAdd={true}\n        allowDelete={true}\n        allowView={true}\n        className=\"w-full\"\n      />\n    </div>\n  );\n};\n\nexport default UserTable;\n","import React from 'react';\nimport { useState } from 'react';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Plus, X, Save } from 'lucide-react';\nimport { useQuery } from '@tanstack/react-query';\nimport { useOrganisationContext } from '../../context/OrganisationContext';\nimport type { NewUser } from '../../types';\nimport EditableField from '../profile/EditableField';\nimport { useAuth } from 'staysecure-auth';\n\ninterface CreateUserDialogProps {\n  isOpen: boolean;\n  onOpenChange: (open: boolean) => void;\n  newUser: NewUser;\n  onUserChange: (user: NewUser) => void;\n  onSubmit: (e: React.FormEvent) => void;\n  loading?: boolean;\n}\n\n\nconst CreateUserDialog: React.FC<CreateUserDialogProps> = ({\n  isOpen,\n  onOpenChange,\n  newUser,\n  onUserChange,\n  onSubmit,\n  loading = false\n}) => {\nconst [editingField, setEditingField] = useState<string | null>(null);\nconst [saving, setSaving] = useState(false);\nconst { supabaseClient } = useOrganisationContext();\nconst [isFullNameManuallyEdited, setIsFullNameManuallyEdited] = useState(false);\nconst { user } = useAuth();\n\n// Check if current user is super_admin\nconst { data: currentUserRole } = useQuery({\n  queryKey: ['user-role', user?.id],\n  queryFn: async () => {\n    if (!user?.id) return null;\n    const { data } = await supabaseClient\n      .from('user_roles')\n      .select('role')\n      .eq('user_id', user.id)\n      .single();\n    return data?.role;\n  },\n  enabled: !!user?.id\n});\n\nconst isSuperAdmin = currentUserRole === 'super_admin';\n\n  // Form validation\n  const isFormValid = () => {\n    const requiredFields = [\n      newUser.first_name?.trim(),\n      newUser.last_name?.trim(),\n      newUser.email?.trim(),\n      newUser.access_level,\n      newUser.location_id\n    ];\n    \n    // Check if all required fields have values\n    const allFieldsFilled = requiredFields.every(field => field && field.length > 0);\n    \n    // Check email format\n    const emailValid = newUser.email?.trim() && /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(newUser.email.trim());\n    \n    return allFieldsFilled && emailValid;\n  };\n\n  // Fetch locations for dropdown\n  const { data: locations } = useQuery({\n    queryKey: ['locations'],\n    queryFn: async () => {\n      const { data } = await supabaseClient\n        .from('locations')\n        .select('id, name')\n        .eq('status', 'Active')\n        .order('name');\n      return data || [];\n    },\n  });\n\n  // Phone validation function\n  const validatePhoneInput = (input: string): string => {\n    return input.replace(/[^0-9+\\s\\-\\(\\)]/g, '');\n  };\n\n  const updateField = (field: string, value: string) => {\n    // Apply phone validation for phone field\n    if (field === 'phone') {\n      const validatedValue = validatePhoneInput(value);\n      onUserChange({ ...newUser, [field]: validatedValue });\n    } else {\n      onUserChange({ ...newUser, [field]: value });\n    }\n  };\n\n  const handleLocationChange = (locationId: string) => {\n    const selectedLocation = locations?.find(loc => loc.id === locationId);\n    if (selectedLocation) {\n      onUserChange({ \n        ...newUser, \n        location_id: locationId,\n        location: selectedLocation.name \n      });\n    }\n  };\n\n  const handleNameChange = (field: 'first_name' | 'last_name', value: string) => {\n  //console.log('handleNameChange called:', { field, value, currentFullName: newUser.full_name, isManuallyEdited: isFullNameManuallyEdited });\n  const updatedUser = { ...newUser, [field]: value };\n  \n  // Only auto-update full_name if it has NOT been manually edited by the user\n  if (!isFullNameManuallyEdited) {\n    const firstName = field === 'first_name' ? value : updatedUser.first_name || '';\n    const lastName = field === 'last_name' ? value : updatedUser.last_name || '';\n    updatedUser.full_name = `${firstName} ${lastName}`.trim();\n    //console.log('Auto-generating full_name:', { firstName, lastName, fullName: updatedUser.full_name });\n  }\n  \n  onUserChange(updatedUser);\n};\n\nconst handleFullNameChange = (value: string) => {\n  // Mark that user has manually edited the full name\n  setIsFullNameManuallyEdited(true);\n  onUserChange({ ...newUser, full_name: value });\n};\n\n  const handleFieldEdit = (field: string) => {\n    setEditingField(field);\n  };\n  const handleFieldCancel = () => {\n    setEditingField(null);\n  };\n\n  const handleDialogClose = (open: boolean) => {\n    if (!open) {\n      const resetUser: NewUser = {\n        first_name: '',\n        last_name: '',\n        full_name: '',\n        email: '',\n        password: '',\n        username: '',\n        phone: '',\n        employee_id: '',\n        status: 'Active',\n        access_level: 'User',\n        location_id: '',\n        location: '',\n        bio: ''\n      };\n      onUserChange(resetUser);\n      setIsFullNameManuallyEdited(false); \n      setEditingField(null);\n      setSaving(false);\n    }\n    onOpenChange(open);\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleDialogClose}>\n      <DialogTrigger asChild>\n        <Button>\n          <Plus className=\"h-4 w-4 mr-2\" />\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Create New User</DialogTitle>\n          <DialogDescription>\n            Add a new user to your organization. The user will receive an activation email to set their password.\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={onSubmit} className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"first_name\">First Name <span className=\"text-red-500\">*</span></Label>\n              <Input\n                id=\"first_name\"\n                value={newUser.first_name}\n                onChange={(e) => handleNameChange('first_name', e.target.value)}\n                placeholder=\"Enter first name\"\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"last_name\">Last Name <span className=\"text-red-500\">*</span></Label>\n              <Input\n                id=\"last_name\"\n                value={newUser.last_name}\n                onChange={(e) => handleNameChange('last_name', e.target.value)}\n                placeholder=\"Enter last name\"\n                required\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"full_name\">Full Name (Auto-generated, editable)</Label>\n              <Input\n                id=\"full_name\"\n                value={newUser.full_name || `${newUser.first_name} ${newUser.last_name}`.trim()}\n                onChange={(e) => handleFullNameChange(e.target.value)}\n                placeholder=\"Enter full name\"\n                className=\"flex-1\"\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Email Address <span className=\"text-red-500\">*</span></Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                value={newUser.email}\n                onChange={(e) => updateField('email', e.target.value)}\n                placeholder=\"Enter email address\"\n                required\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"access_level\">Access Level <span className=\"text-red-500\">*</span></Label>\n              <Select \n                value={newUser.access_level} \n                onValueChange={(value) => {\n                  // Map display values to backend values\n                  const backendValue = value === 'Admin' ? 'client_admin' : value.toLowerCase();\n                  updateField('access_level', backendValue);\n                }}\n                required\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select access level\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"user\">User</SelectItem>\n                  <SelectItem value=\"manager\">Manager</SelectItem>\n                  <SelectItem value=\"client_admin\">Admin</SelectItem>\n                  {isSuperAdmin && <SelectItem value=\"author\">Author</SelectItem>}\n                  {isSuperAdmin && <SelectItem value=\"super_admin\">Super Admin</SelectItem>}\n                </SelectContent>\n              </Select>\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"location\">Location <span className=\"text-red-500\">*</span></Label>\n              <Select value={newUser.location_id || ''} onValueChange={handleLocationChange} required>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select a location\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {locations?.map((location) => (\n                    <SelectItem key={location.id} value={location.id}>\n                      {location.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"phone\">Phone</Label>\n              <Input\n                id=\"phone\"\n                value={newUser.phone}\n                onChange={(e) => updateField('phone', e.target.value)}\n                placeholder=\"Enter phone number\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"employee_id\">Employee ID</Label>\n              <Input\n                id=\"employee_id\"\n                value={newUser.employee_id}\n                onChange={(e) => updateField('employee_id', e.target.value)}\n                placeholder=\"Enter employee ID\"\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"bio\">Bio</Label>\n            <Textarea\n              id=\"bio\"\n              value={newUser.bio}\n              onChange={(e) => updateField('bio', e.target.value)}\n              placeholder=\"Enter bio (optional)\"\n              rows={3}\n            />\n          </div>\n\n          <div className=\"text-sm text-muted-foreground\">\n            <span className=\"text-red-500\">*</span> Required fields\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => handleDialogClose(false)} disabled={loading} size=\"icon\">\n              <X className=\"h-4 w-4\" />\n            </Button>\n            <Button type=\"submit\" disabled={loading || !isFormValid()} size=\"icon\">\n              {loading ? (\n                <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n              ) : (\n                <Save className=\"h-4 w-4\" />\n              )}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}; \nexport default CreateUserDialog;","import React from 'react';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\nimport { X, Save } from 'lucide-react';\nimport { useQuery } from '@tanstack/react-query';\nimport { useOrganisationContext } from '../../context/OrganisationContext';\nimport type { UserProfile } from '../../types';\n\ninterface EditUserDialogProps {\n  isOpen: boolean;\n  onOpenChange: (open: boolean) => void;\n  editingUser: UserProfile | null;\n  onUserChange: (user: UserProfile | null) => void;\n  onSubmit: (e: React.FormEvent) => void;\n}\n\nconst EditUserDialog: React.FC<EditUserDialogProps> = ({\n  isOpen,\n  onOpenChange,\n  editingUser,\n  onUserChange,\n  onSubmit\n}) => {\n  const { supabaseClient } = useOrganisationContext();\n\n  // Fetch locations for dropdown\n  const { data: locations } = useQuery({\n    queryKey: ['locations'],\n    queryFn: async () => {\n      const { data } = await supabaseClient\n        .from('locations')\n        .select('id, name')\n        .eq('status', 'Active')\n        .order('name');\n      return data || [];\n    },\n  });\n\n  if (!editingUser) return null;\n\n  const updateField = (field: keyof UserProfile, value: string) => {\n    onUserChange({ ...editingUser, [field]: value });\n  };\n\n  const handleLocationChange = (locationId: string) => {\n    const selectedLocation = locations?.find(loc => loc.id === locationId);\n    if (selectedLocation) {\n      onUserChange({ \n        ...editingUser, \n        location_id: locationId,\n        location: selectedLocation.name \n      });\n    }\n  };\n\n  // Find the correct location_id if it's missing but location name exists\n  const getLocationId = () => {\n    if (editingUser.location_id) {\n      return editingUser.location_id;\n    }\n    if (editingUser.location && locations) {\n      const foundLocation = locations.find(loc => loc.name === editingUser.location);\n      return foundLocation?.id || '';\n    }\n    return '';\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Edit User</DialogTitle>\n          <DialogDescription>\n            Update user information\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={onSubmit} className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_full_name\">Full Name</Label>\n              <Input\n                id=\"edit_full_name\"\n                value={editingUser.full_name || ''}\n                onChange={(e) => updateField('full_name', e.target.value)}\n                placeholder=\"Enter full name\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_username\">Username</Label>\n              <Input\n                id=\"edit_username\"\n                value={editingUser.username || ''}\n                onChange={(e) => updateField('username', e.target.value)}\n                placeholder=\"Enter username\"\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_email\">Email</Label>\n              <Input\n                id=\"edit_email\"\n                type=\"email\"\n                value={editingUser.email || ''}\n                onChange={(e) => updateField('email', e.target.value)}\n                placeholder=\"Enter email address\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_phone\">Phone</Label>\n              <Input\n                id=\"edit_phone\"\n                value={editingUser.phone || ''}\n                onChange={(e) => updateField('phone', e.target.value)}\n                placeholder=\"Enter phone number\"\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_role\">Role</Label>\n              <Input\n                id=\"edit_role\"\n                value={editingUser.role || ''}\n                onChange={(e) => updateField('role', e.target.value)}\n                placeholder=\"Enter user role\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_department\">Department</Label>\n              <Input\n                id=\"edit_department\"\n                value={editingUser.department || ''}\n                onChange={(e) => updateField('department', e.target.value)}\n                placeholder=\"Enter department\"\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_employee_id\">Employee ID</Label>\n              <Input\n                id=\"edit_employee_id\"\n                value={editingUser.employee_id || ''}\n                onChange={(e) => updateField('employee_id', e.target.value)}\n                placeholder=\"Enter employee ID\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_location\">Location</Label>\n              <Select value={getLocationId()} onValueChange={handleLocationChange}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select a location\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {locations?.map((location) => (\n                    <SelectItem key={location.id} value={location.id}>\n                      {location.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_status\">Status</Label>\n              <Select \n                value={editingUser.status || 'Active'} \n                onValueChange={(value) => updateField('status', value)}\n              >\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"Active\">Active</SelectItem>\n                  <SelectItem value=\"Inactive\">Inactive</SelectItem>\n                  <SelectItem value=\"Pending\">Pending</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_access_level\">Access Level</Label>\n              <Select \n                value={editingUser.access_level || 'User'} \n                onValueChange={(value) => updateField('access_level', value)}\n              >\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"User\">User</SelectItem>\n                  <SelectItem value=\"Manager\">Manager</SelectItem>\n                  <SelectItem value=\"Admin\">Admin</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"edit_bio\">Bio</Label>\n            <Textarea\n              id=\"edit_bio\"\n              value={editingUser.bio || ''}\n              onChange={(e) => updateField('bio', e.target.value)}\n              placeholder=\"Enter bio (optional)\"\n              rows={3}\n            />\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)} size=\"icon\">\n              <X className=\"h-4 w-4\" />\n            </Button>\n            <Button type=\"submit\" size=\"icon\">\n              <Save className=\"h-4 w-4\" />\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\nexport default EditUserDialog;","/**\n * Utility functions for validating manager assignments in user imports\n */\n\nexport interface Profile {\n  id: string;\n  email?: string;\n  full_name?: string;\n  username?: string;\n}\n\n/**\n * Validates if a manager identifier matches an existing profile\n * @param managerIdentifier - Email, full name, or username to search for\n * @param existingProfiles - Array of existing profiles to search\n * @returns Object with isValid flag and managerId if found\n */\nexport const validateManager = (\n  managerIdentifier: string,\n  existingProfiles: Profile[] | undefined\n): { isValid: boolean; managerId?: string } => {\n  if (!managerIdentifier || !existingProfiles) {\n    return { isValid: false };\n  }\n\n  const trimmedIdentifier = managerIdentifier.trim().toLowerCase();\n  \n  // Try to find manager by email, full_name, or username (case-insensitive)\n  const manager = existingProfiles.find((profile: Profile) => {\n    const email = (profile.email || '').toLowerCase();\n    const fullName = (profile.full_name || '').toLowerCase();\n    const username = (profile.username || '').toLowerCase();\n    \n    return email === trimmedIdentifier || \n           fullName === trimmedIdentifier || \n           username === trimmedIdentifier;\n  });\n\n  return {\n    isValid: !!manager,\n    managerId: manager?.id\n  };\n};\n\n","import React, { useState, useCallback } from 'react';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { useDropzone } from 'react-dropzone';\nimport { Upload, FileText, Download } from 'lucide-react';\nimport { toast } from '@/hooks/use-toast';\nimport { useUserProfiles } from '@/hooks/useUserProfiles';\nimport { supabase, getCurrentClientId } from '@/integrations/supabase/client';\nimport Papa from 'papaparse';\nimport { ImportError } from '@/components/import/ImportErrorReport';\nimport { useQuery } from '@tanstack/react-query';\nimport { validateManager as validateManagerUtil } from '@/utils/managerValidation';\n\ninterface ImportUsersDialogProps {\n  onImportComplete?: () => Promise<void>;\n  onImportError?: (errors: ImportError[], warnings: ImportError[], stats: { success: number; total: number }) => void;\n}\n\ninterface LocationWarning extends ImportError {\n  type: 'warning';\n}\n\nconst ImportUsersDialog: React.FC<ImportUsersDialogProps> = ({ onImportComplete, onImportError }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [uploadedFile, setUploadedFile] = useState<File | null>(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const { createProfile } = useUserProfiles();\n\n  // Fetch valid locations for validation\n  const { data: validLocations } = useQuery({\n    queryKey: ['locations'],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('locations')\n        .select('id, name')\n        .eq('status', 'Active')\n        .order('name');\n      if (error) throw error;\n      return data || [];\n    },\n  });\n\n  // Fetch valid departments for validation\n  const { data: validDepartments } = useQuery({\n    queryKey: ['departments'],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('departments')\n        .select('id, name')\n        .order('name');\n      if (error) throw error;\n      return data || [];\n    },\n  });\n\n  // Fetch valid roles for validation\n  const { data: validRoles } = useQuery({\n    queryKey: ['roles'],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('roles')\n        .select('role_id, name, department_id, is_active')\n        .eq('is_active', true)\n        .order('name');\n      if (error) throw error;\n      return data || [];\n    },\n  });\n\n  // Fetch all existing profiles for manager validation\n  const { data: existingProfiles } = useQuery({\n    queryKey: ['profiles-for-manager-validation'],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('profiles')\n        .select('id, full_name, username')\n        .order('full_name');\n      if (error) throw error;\n      return data || [];\n    },\n  });\n\n\n  const onDrop = useCallback((acceptedFiles: File[]) => {\n    const file = acceptedFiles[0];\n    if (file) {\n      if (!file.name.endsWith('.csv') && file.type !== 'text/csv') {\n        toast({\n          title: \"Invalid file type\",\n          description: \"Please upload a CSV file (.csv)\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      \n      setUploadedFile(file);\n      toast({\n        title: \"File uploaded\",\n        description: `${file.name} is ready for import`,\n      });\n    }\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'text/csv': ['.csv']\n    },\n    multiple: false\n  });\n\n    const generateSampleCSV = () => {\n    const headers = ['Email', 'Full Name', 'First Name', 'Last Name', 'Phone', 'Employee ID', 'Access Level', 'Location', 'Department', 'Role', 'Manager'];\n    const sampleData = [\n      ['john.doe@company.com', 'John Doe', 'John', 'Doe', '+1-555-0123', 'EMP-2024-001', 'User', 'Main Office', 'Engineering', 'Software Engineer', 'jane.smith@company.com'],\n      ['jane.smith@company.com', 'Jane Smith', 'Jane', 'Smith', '+1-555-0124', 'EMP-2024-002', 'Manager', 'Branch Office', 'Human Resources', 'HR Manager', '']\n    ];\n    \n    const csvContent = [headers, ...sampleData]\n      .map(row => row.map(field => `\"${field}\"`).join(','))\n      .join('\\n');\n    \n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', 'user_import_template.csv');\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n\n  // Helper function to validate location\n  const validateLocation = (locationName: string): { isValid: boolean; locationId?: string } => {\n    if (!locationName || !validLocations) {\n      console.log('Location validation: No location name or validLocations not loaded', { locationName, validLocations });\n      return { isValid: false };\n    }\n\n    const trimmedLocation = locationName.trim();\n    console.log('Location validation: Checking location', { \n      providedLocation: trimmedLocation, \n      availableLocations: validLocations.map((l: { name: string }) => l.name) \n    });\n    \n    const validLocation = validLocations.find(\n      (loc: { name: string }) => loc.name.toLowerCase() === trimmedLocation.toLowerCase()\n    );\n\n    console.log('Location validation result:', { \n      location: trimmedLocation, \n      found: !!validLocation, \n      validLocation \n    });\n\n    return {\n      isValid: !!validLocation,\n      locationId: validLocation?.id\n    };\n  };\n\n  // Helper function to validate department\n  const validateDepartment = (departmentName: string): { isValid: boolean; departmentId?: string } => {\n    if (!departmentName || !validDepartments) {\n      return { isValid: false };\n    }\n\n    const trimmedName = departmentName.trim().toLowerCase();\n    const department = validDepartments.find(\n      (dept: { name: string }) => dept.name.toLowerCase() === trimmedName\n    );\n\n    return {\n      isValid: !!department,\n      departmentId: department?.id\n    };\n  };\n\n  // Helper function to validate role\n  const validateRole = (roleName: string): { isValid: boolean; roleId?: string; departmentId?: string | null } => {\n    if (!roleName || !validRoles) {\n      return { isValid: false };\n    }\n\n    const trimmedName = roleName.trim().toLowerCase();\n    const role = validRoles.find(\n      (r: { name: string }) => r.name.toLowerCase() === trimmedName\n    );\n\n    return {\n      isValid: !!role,\n      roleId: role?.role_id,\n      departmentId: role?.department_id || null\n    };\n  };\n\n  // Helper function to validate department-role pair\n  const validateDepartmentRolePair = (\n    departmentName: string,\n    roleName: string\n  ): { isValid: boolean; error?: string; departmentId?: string; roleId?: string } => {\n    // Validate department\n    const deptValidation = validateDepartment(departmentName);\n    if (!deptValidation.isValid) {\n      return { isValid: false, error: `Department \"${departmentName}\" does not exist` };\n    }\n\n    // Validate role\n    const roleValidation = validateRole(roleName);\n    if (!roleValidation.isValid) {\n      return { isValid: false, error: `Role \"${roleName}\" does not exist or is not active` };\n    }\n\n    // Check if role belongs to department or is a general role\n    if (roleValidation.departmentId === null) {\n      // General role (no department) - valid for any department\n      return {\n        isValid: true,\n        departmentId: deptValidation.departmentId,\n        roleId: roleValidation.roleId\n      };\n    }\n\n    // Role has a department - must match\n    if (roleValidation.departmentId !== deptValidation.departmentId) {\n      return {\n        isValid: false,\n        error: `Role \"${roleName}\" does not belong to department \"${departmentName}\"`\n      };\n    }\n\n    return {\n      isValid: true,\n      departmentId: deptValidation.departmentId,\n      roleId: roleValidation.roleId\n    };\n  };\n\n\n  // Helper function to validate manager (using utility function)\n  const validateManager = (managerIdentifier: string): { isValid: boolean; managerId?: string } => {\n    return validateManagerUtil(managerIdentifier, existingProfiles);\n  };\n\n  // Helper function to validate access level\n  const validateAccessLevel = (accessLevel: string): { isValid: boolean; value?: string } => {\n    if (!accessLevel) {\n      return { isValid: false };\n    }\n\n    const trimmedLevel = accessLevel.trim().toLowerCase();\n    const validLevels = ['user', 'manager', 'client_admin', 'admin', 'author'];\n    \n    // Map display values to backend values\n    const levelMapping: { [key: string]: string } = {\n      'admin': 'client_admin',\n      'client admin': 'client_admin'\n    };\n\n    const backendValue = levelMapping[trimmedLevel] || trimmedLevel;\n    const isValid = validLevels.includes(backendValue);\n\n    return {\n      isValid,\n      value: isValid ? backendValue : undefined\n    };\n  };\n\n  // Helper function to translate technical errors to user-friendly messages\n  const translateError = (error: any): string => {\n    const errorMessage = error?.message || error?.error || 'Unknown error';\n    \n    console.log('Translating error:', { originalError: error, errorMessage });\n    \n    // Handle specific Supabase/Edge Function errors\n    if (errorMessage.includes('Edge Function returned a non-2xx status code')) {\n      return 'Server error occurred while creating user. Please try again or contact support.';\n    }\n    \n    // Check for \"already registered\" patterns first (most common case)\n    if (errorMessage.includes('already registered') || errorMessage.includes('User already registered') || \n        errorMessage.includes('has already been registered')) {\n      return 'A user with this email address already exists.';\n    }\n    \n    if (errorMessage.includes('Failed to create user:')) {\n      if (errorMessage.includes('User already registered') || errorMessage.includes('already registered')) {\n        return 'A user with this email address already exists.';\n      }\n      if (errorMessage.includes('Invalid email')) {\n        return 'The email address format is invalid.';\n      }\n      if (errorMessage.includes('Password should be at least')) {\n        return 'Password does not meet security requirements.';\n      }\n      return 'Failed to create user account. Please check the email address and try again.';\n    }\n    \n    // Handle Supabase Auth specific errors - check the original error object too\n    const fullErrorMessage = JSON.stringify(error);\n    if (fullErrorMessage.includes('already registered') || fullErrorMessage.includes('User already registered') || \n        fullErrorMessage.includes('has already been registered')) {\n      return 'A user with this email address already exists.';\n    }\n    \n    if (fullErrorMessage.includes('Invalid email') || fullErrorMessage.includes('invalid email') ||\n        errorMessage.includes('Invalid email') || errorMessage.includes('invalid email')) {\n      return 'The email address format is invalid.';\n    }\n    \n    if (errorMessage.includes('Profile creation failed')) {\n      return 'User account was created but profile setup failed. Please contact support.';\n    }\n    \n    if (errorMessage.includes('Database error')) {\n      return 'Database error occurred. Please try again or contact support.';\n    }\n    \n    if (errorMessage.includes('Missing email')) {\n      return 'Email address is required for all users.';\n    }\n    \n    // Handle network/connection errors\n    if (errorMessage.includes('fetch')) {\n      return 'Network error occurred. Please check your connection and try again.';\n    }\n    \n    // Handle timeout errors\n    if (errorMessage.includes('timeout')) {\n      return 'Request timed out. Please try again.';\n    }\n    \n    // Handle FunctionsHttpError specifically\n    if (errorMessage === 'Unknown error' && fullErrorMessage.includes('FunctionsHttpError')) {\n      // This is likely a user already exists error that's not being properly translated\n      // Check if we can extract more info from the error object\n      if (error?.context || error?.hint) {\n        const context = error.context || '';\n        const hint = error.hint || '';\n        if (context.includes('already') || hint.includes('already')) {\n          return 'A user with this email address already exists.';\n        }\n      }\n      return 'Server error occurred while creating user. Please try again or contact support.';\n    }\n    \n    // Default fallback - return a more user-friendly version of the original error\n    return errorMessage.length > 100 \n      ? 'An unexpected error occurred while creating the user. Please try again.'\n      : errorMessage;\n  };\n\n  const processUserImport = async (row: any) => {\n    const email = row['Email'] || row['email'];\n    \n    if (!email) {\n      console.error('Missing email for row:', row);\n      throw new Error('Email address is required for all users.');\n    }\n\n    console.log('Processing user:', email);\n\n    // Validate all fields BEFORE creating user\n    const accessLevelValue = row['Access Level'] || row['access_level'] || '';\n    const accessLevelValidation = validateAccessLevel(accessLevelValue);\n\n    const locationName = row['Location'] || row['location'] || '';\n    const departmentName = row['Department'] || row['department'] || '';\n    const roleName = row['Role'] || row['role'] || '';\n\n    // Validate location if provided\n    if (locationName) {\n      const locationValidation = validateLocation(locationName);\n      if (!locationValidation.isValid) {\n        throw new Error(`Location \"${locationName}\" does not exist`);\n      }\n    }\n\n    // Validate department if provided\n    let departmentId: string | undefined;\n    if (departmentName) {\n      const deptValidation = validateDepartment(departmentName);\n      if (!deptValidation.isValid) {\n        throw new Error(`Department \"${departmentName}\" does not exist`);\n      }\n      departmentId = deptValidation.departmentId;\n    }\n\n    // Validate role if provided\n    let roleId: string | undefined;\n    let roleDepartmentId: string | null | undefined;\n    if (roleName) {\n      const roleValidation = validateRole(roleName);\n      if (!roleValidation.isValid) {\n        throw new Error(`Role \"${roleName}\" does not exist or is not active`);\n      }\n      roleId = roleValidation.roleId;\n      roleDepartmentId = roleValidation.departmentId;\n    }\n\n    // Validate department-role pair if both provided\n    if (departmentName && roleName) {\n      const pairValidation = validateDepartmentRolePair(departmentName, roleName);\n      if (!pairValidation.isValid) {\n        throw new Error(pairValidation.error || 'Invalid department-role pair');\n      }\n      // Use validated IDs from pair validation\n      departmentId = pairValidation.departmentId;\n      roleId = pairValidation.roleId;\n    } else if (roleName && roleDepartmentId !== null) {\n      // Role-only but role has a department - invalid\n      throw new Error(`Role \"${roleName}\" belongs to a department. Please specify the department or use a general role.`);\n    }\n\n    // Validate manager if provided\n    const managerName = row['Manager'] || row['manager'] || '';\n    let managerId: string | undefined;\n    let managerWarning: any = null;\n    if (managerName) {\n      const managerValidation = validateManager(managerName);\n      if (!managerValidation.isValid) {\n        // Manager doesn't exist - create user anyway but add warning\n        managerWarning = {\n          field: 'Manager',\n          value: managerName,\n          message: `Manager \"${managerName}\" does not exist in the system - user created without manager assignment`\n        };\n      } else {\n        managerId = managerValidation.managerId;\n      }\n    }\n\n    // Extract client path using the same logic as client.ts\n    const clientId = getCurrentClientId();\n    const clientPath = clientId ? `/${clientId}` : '';\n    \n    // Use our create-user edge function instead of direct signUp\n    const { data: authData, error: authError } = await supabase.functions.invoke('create-user', {\n      body: {\n        email: email,\n        full_name: row['Full Name'] || row['full_name'] || 'Unknown User',\n        first_name: row['First Name'] || row['first_name'] || '',\n        last_name: row['Last Name'] || row['last_name'] || '',\n        username: row['Username'] || row['username'] || '',\n        phone: row['Phone'] || row['phone'] || '',\n        status: 'Pending',\n        employee_id: row['Employee ID'] || row['employee_id'] || '',\n        access_level: accessLevelValidation.isValid ? accessLevelValidation.value : 'user',\n        manager: managerId || null, // Include manager if validated\n        clientPath // Pass client path explicitly\n      }\n    });\n\n    if (authError) {\n      console.error('Auth error for user:', email, authError);\n      const friendlyError = translateError(authError);\n      throw new Error(friendlyError);\n    }\n\n    if (authData && authData.user) {\n      console.log('User created successfully:', email);\n    } else if (authData && authData.error) {\n      console.error('Create user error:', authData.error);\n      const friendlyError = translateError(authData.error);\n      throw new Error(friendlyError);\n    }\n\n    const userId = authData?.user?.id;\n    if (!userId) {\n      throw new Error('User created but user ID not returned');\n    }\n\n    // Collect all warnings\n    const warnings = [];\n    \n    if (!accessLevelValidation.isValid && accessLevelValue) {\n      warnings.push({\n        field: 'Access Level',\n        value: accessLevelValue,\n        message: `Access Level \"${accessLevelValue}\" is invalid - user created with default \"User\" access level`\n      });\n    }\n\n    // Add manager warning if manager doesn't exist\n    if (managerWarning) {\n      warnings.push(managerWarning);\n    }\n\n    // Assign location if provided\n    if (locationName) {\n      const locationValidation = validateLocation(locationName);\n      if (locationValidation.isValid && locationValidation.locationId) {\n        try {\n          const locationData = {\n            user_id: userId,\n            location_id: locationValidation.locationId,\n            full_name: row['Full Name'] || row['full_name'] || 'Unknown User',\n            access_purpose: 'General Access',\n            status: 'Active',\n            date_access_created: new Date().toISOString()\n          };\n\n          const { error: locationError } = await supabase\n            .from('physical_location_access')\n            .insert(locationData);\n\n          if (locationError) {\n            console.error('Error assigning location:', locationError);\n            warnings.push({\n              field: 'Location',\n              value: locationName,\n              message: `Location \"${locationName}\" could not be assigned: ${locationError.message}`\n            });\n          }\n        } catch (locationError: any) {\n          console.error('Exception assigning location:', locationError);\n          warnings.push({\n            field: 'Location',\n            value: locationName,\n            message: `Location \"${locationName}\" could not be assigned: ${locationError.message}`\n          });\n        }\n      }\n    }\n\n    // Assign department and/or role if provided\n    if (departmentName || roleName) {\n      try {\n        // Generate pairing_id if both department and role are provided\n        const pairingId = (departmentId && roleId) ? crypto.randomUUID() : undefined;\n\n        // Assign department if provided\n        if (departmentId) {\n          const { error: deptError } = await supabase\n            .from('user_departments')\n            .insert({\n              user_id: userId,\n              department_id: departmentId,\n              is_primary: false, // Will be set to true if this is the first department\n              pairing_id: pairingId,\n              assigned_by: userId // In production, this should be the current admin user ID\n            });\n\n          if (deptError) {\n            console.error('Error assigning department:', deptError);\n            warnings.push({\n              field: 'Department',\n              value: departmentName,\n              message: `Department \"${departmentName}\" could not be assigned: ${deptError.message}`\n            });\n          } else {\n            // Set as primary if this is the first department (check if any exist)\n            const { data: existingDepts } = await supabase\n              .from('user_departments')\n              .select('id')\n              .eq('user_id', userId);\n            \n            if (existingDepts && existingDepts.length === 1) {\n              // This is the first department, set as primary\n              await supabase\n                .from('user_departments')\n                .update({ is_primary: true })\n                .eq('user_id', userId)\n                .eq('department_id', departmentId);\n            }\n          }\n        }\n\n        // Assign role if provided\n        if (roleId) {\n          const { error: roleError } = await supabase\n            .from('user_profile_roles')\n            .insert({\n              user_id: userId,\n              role_id: roleId,\n              is_primary: false, // Will be set to true if this is the first role\n              pairing_id: pairingId,\n              assigned_by: userId // In production, this should be the current admin user ID\n            });\n\n          if (roleError) {\n            console.error('Error assigning role:', roleError);\n            warnings.push({\n              field: 'Role',\n              value: roleName,\n              message: `Role \"${roleName}\" could not be assigned: ${roleError.message}`\n            });\n          } else {\n            // Set as primary if this is the first role (check if any exist)\n            const { data: existingRoles } = await supabase\n              .from('user_profile_roles')\n              .select('id')\n              .eq('user_id', userId);\n            \n            if (existingRoles && existingRoles.length === 1) {\n              // This is the first role, set as primary\n              await supabase\n                .from('user_profile_roles')\n                .update({ is_primary: true })\n                .eq('user_id', userId)\n                .eq('role_id', roleId);\n            }\n          }\n        }\n      } catch (assignmentError: any) {\n        console.error('Exception assigning department/role:', assignmentError);\n        warnings.push({\n          field: 'Department/Role',\n          value: `${departmentName || ''} / ${roleName || ''}`,\n          message: `Could not assign department/role: ${assignmentError.message}`\n        });\n      }\n    }\n\n    return { \n      email, \n      success: true, \n      warnings: warnings.length > 0 ? warnings : null\n    };\n  };\n\n  const handleImport = async () => {\n    if (!uploadedFile) {\n      toast({\n        title: \"No file selected\",\n        description: \"Please upload a file first\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsProcessing(true);\n\n    try {\n      const text = await uploadedFile.text();\n      \n      Papa.parse(text, {\n        header: true,\n        complete: async (results) => {\n          const data = results.data as any[];\n          \n          if (data.length === 0) {\n            toast({\n              title: \"Empty file\",\n              description: \"The uploaded file contains no data\",\n              variant: \"destructive\",\n            });\n            setIsProcessing(false);\n            return;\n          }\n\n          console.log('Processing', data.length, 'rows');\n          let successCount = 0;\n          const errors: ImportError[] = [];\n          const warnings: ImportError[] = [];\n\n          // Process users sequentially to avoid overwhelming the system\n          for (let i = 0; i < data.length; i++) {\n            const row = data[i];\n            \n            // Skip empty rows\n            if (!row['Email'] && !row['email'] && !row['Full Name'] && !row['full_name']) {\n              console.log('Skipping empty row at index', i);\n              continue;\n            }\n\n            const email = row['Email'] || row['email'] || 'Unknown';\n            \n            try {\n              console.log(`Processing user ${i + 1} of ${data.length}:`, email);\n              const result = await processUserImport(row);\n              successCount++;\n              console.log(`Successfully processed user ${i + 1}`);\n              \n              // Collect all warnings\n              if (result.warnings) {\n                result.warnings.forEach((warning: any) => {\n                  warnings.push({\n                    rowNumber: i + 2, // +2 because row 1 is headers, and i is 0-indexed\n                    identifier: email,\n                    field: warning.field,\n                    error: warning.message,\n                    rawData: row\n                  });\n                });\n              }\n            } catch (error: any) {\n              console.error(`Error importing user ${i + 1}:`, error);\n              const friendlyError = translateError(error);\n              errors.push({\n                rowNumber: i + 2, // +2 because row 1 is headers, and i is 0-indexed\n                identifier: email,\n                field: !row['Email'] && !row['email'] ? 'Email' : undefined,\n                error: friendlyError,\n                rawData: row\n              });\n            }\n\n            // Add a small delay between users to prevent rate limiting\n            if (i < data.length - 1) {\n              await new Promise(resolve => setTimeout(resolve, 500));\n            }\n          }\n\n          console.log('Import completed. Success:', successCount, 'Errors:', errors.length, 'Warnings:', warnings.length);\n\n          setUploadedFile(null);\n          setIsProcessing(false);\n          setIsOpen(false);\n\n          // Show combined error and warning report through parent component\n          if ((errors.length > 0 || warnings.length > 0) && onImportError) {\n            setTimeout(() => {\n              onImportError(errors, warnings, { success: successCount, total: data.length });\n            }, 300);\n            \n            if (errors.length > 0 && warnings.length > 0) {\n              toast({\n                title: \"Import completed with errors and warnings\",\n                description: `${successCount} users imported successfully. ${errors.length} failed, ${warnings.length} have validation warnings.`,\n                variant: \"destructive\",\n              });\n            } else if (errors.length > 0) {\n              toast({\n                title: \"Import completed with errors\",\n                description: `${successCount} users imported successfully. ${errors.length} failed. Opening error report...`,\n                variant: \"destructive\",\n              });\n            } else if (warnings.length > 0) {\n              toast({\n                title: \"Import completed with warnings\",\n                description: `${successCount} users imported successfully. ${warnings.length} users have validation warnings. Opening warning report...`,\n                variant: \"default\",\n              });\n            }\n          } else {\n            toast({\n              title: \"Import completed successfully\",\n              description: `All ${successCount} users imported successfully. Users will need to activate their accounts via email.`,\n            });\n          }\n          \n          // Refresh the user list after successful import\n          if (onImportComplete) {\n            await onImportComplete();\n          }\n        },\n        error: (error: any) => {\n          console.error('Parse error:', error);\n          toast({\n            title: \"Parse error\",\n            description: \"Failed to parse the CSV file\",\n            variant: \"destructive\",\n          });\n          setIsProcessing(false);\n        }\n      });\n    } catch (error) {\n      console.error('Import error:', error);\n      toast({\n        title: \"Import failed\",\n        description: \"An error occurred while importing the file\",\n        variant: \"destructive\",\n      });\n      setIsProcessing(false);\n    }\n  };\n\n  const handleDialogClose = (open: boolean) => {\n    if (!open && !isProcessing) {\n      setUploadedFile(null);\n    }\n    setIsOpen(open);\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleDialogClose}>\n      <DialogTrigger asChild>\n        <Button variant=\"outline\">\n          <Upload className=\"h-4 w-4 mr-2\" />\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Import Users</DialogTitle>\n          <DialogDescription>\n            Upload a CSV file to import users in bulk. Users will be created with authentication accounts and will receive an activation link via email. Departments, roles, and locations can be assigned during import.\n          </DialogDescription>\n        </DialogHeader>\n        \n        <div className=\"space-y-6\">\n          <div className=\"space-y-4\">\n            <div\n              {...getRootProps()}\n              className={`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ${\n                isDragActive\n                  ? 'border-blue-400 bg-blue-50'\n                  : uploadedFile\n                  ? 'border-green-400 bg-green-50'\n                  : 'border-gray-300 hover:border-gray-400'\n              }`}\n            >\n              <input {...getInputProps()} />\n              <Upload className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n              \n              {uploadedFile ? (\n                <div>\n                  <p className=\"text-lg font-medium text-green-700\">File Ready for Import</p>\n                  <p className=\"text-sm text-green-600 mt-1\">{uploadedFile.name}</p>\n                  <p className=\"text-xs text-gray-500 mt-2\">\n                    Click to select a different file or drop a new one here\n                  </p>\n                </div>\n              ) : isDragActive ? (\n                <p className=\"text-lg font-medium text-blue-700\">Drop your user file here</p>\n              ) : (\n                <div>\n                  <p className=\"text-lg font-medium\">Drag and drop your user file here, or browse</p>\n                        <p className=\"text-sm text-gray-500 mt-1\">Supports CSV files (.csv)</p>\n                </div>\n              )}\n            </div>\n\n            {uploadedFile && (\n              <div className=\"flex gap-3\">\n                <Button\n                  onClick={handleImport}\n                  disabled={isProcessing}\n                  className=\"flex items-center gap-2\"\n                >\n                  {isProcessing ? (\n                    <>\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                    </>\n                  ) : (\n                    <>\n                      <Upload className=\"h-4 w-4\" />\n                    </>\n                  )}\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setUploadedFile(null)}\n                  disabled={isProcessing}\n                >\n                  X\n                </Button>\n              </div>\n            )}\n          </div>\n\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n            <h4 className=\"text-sm font-medium text-yellow-800 mb-2\">User Import Template</h4>\n            <p className=\"text-sm text-yellow-700 mb-3\">Download a template for importing users with sample data.</p>\n            \n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between p-2 bg-white rounded border\">\n                <div className=\"flex items-center gap-2\">\n                  <FileText className=\"h-4 w-4\" />\n                  <span className=\"text-sm font-medium\">Users Template (CSV)</span>\n                  <Badge variant=\"secondary\" className=\"text-xs\">Ready to use template</Badge>\n                </div>\n                <Button size=\"sm\" variant=\"outline\" onClick={generateSampleCSV} className=\"gap-2\">\n                  <Download className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <h4 className=\"font-semibold text-blue-900 mb-2\">Available Columns</h4>\n            <div className=\"flex flex-wrap gap-2 mb-4\">\n              {[\n                'Email', 'Full Name', 'First Name', 'Last Name', \n                'Phone', 'Employee ID', 'Access Level', 'Location', 'Department', 'Role', 'Manager'\n              ].map((column) => (\n                <Badge key={column} variant=\"outline\" className=\"text-xs\">\n                  {column}\n                </Badge>\n              ))}\n            </div>\n            <div className=\"text-sm text-blue-800 space-y-1\">\n              <p>• <strong>Email</strong> is required for each user</p>\n              <p>• Users will be created with 'Pending' status and must activate via email</p>\n              <p>• <strong>Location</strong> (optional) - must match an existing active location</p>\n              <p>• <strong>Department</strong> (optional) - must match an existing department</p>\n              <p>• <strong>Role</strong> (optional) - must match an existing active role</p>\n              <p>• If both <strong>Department</strong> and <strong>Role</strong> are provided, the role must belong to that department (or be a general role)</p>\n              <p>• If only <strong>Role</strong> is provided, it must be a general role (not assigned to any department)</p>\n              <p>• <strong>Manager</strong> (optional) - can be identified by email, full name, or username. If manager doesn't exist, user will be created but a warning will be reported</p>\n              <p>• All other fields are optional and will use default values if not provided</p>\n            </div>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default ImportUsersDialog;","import React, { useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useUserProfiles } from '@/hooks/useUserProfiles';\nimport { useUserManagement } from '@/hooks/useUserManagement';\nimport { useViewPreference } from '@/hooks/useViewPreference';\nimport { handleSaveUser, handleCreateUser, handleDeleteUser } from '../../utils/userManagementActions';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { ToggleGroup, ToggleGroupItem } from '@/components/ui/toggle-group';\nimport { LayoutGrid, List, Users } from 'lucide-react';\nimport { useOrganisationContext } from '../../context/OrganisationContext';\nimport { DeleteUserDialog } from '@/components/ui/delete-user-dialog';\nimport { useToast } from '@/hooks/use-toast';\nimport UserList from './UserList';\nimport UserTable from './UserTable';\nimport CreateUserDialog from './CreateUserDialog';\nimport EditUserDialog from './EditUserDialog';\nimport ImportUsersDialog from './ImportUsersDialog';\nimport { ImportErrorReport, ImportError } from '@/components/import/ImportErrorReport';\n\n\nconst UserManagement: React.FC = () => {\n  const { hasPermission, onUserAction } = useOrganisationContext();\n  const { profiles, loading, updateProfile, refetch } = useUserProfiles();\n  const { toast } = useToast();\n  const [viewMode, setViewMode] = useViewPreference('userManagement', 'cards');\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n  const [userToDelete, setUserToDelete] = useState<{ id: string; name: string } | null>(null);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [showImportErrorReport, setShowImportErrorReport] = useState(false);\n  const [importErrors, setImportErrors] = useState<ImportError[]>([]);\n  const [importWarnings, setImportWarnings] = useState<ImportError[]>([]);\n  const [importStats, setImportStats] = useState({ success: 0, total: 0 });\n  const [isCreatingUser, setIsCreatingUser] = useState(false);\n  \n  const {\n    editingUser,\n    setEditingUser,\n    isEditDialogOpen,\n    setIsEditDialogOpen,\n    isCreateDialogOpen,\n    setIsCreateDialogOpen,\n    newUser,\n    setNewUser,\n    openEditDialog,\n    closeEditDialog,\n    resetNewUser\n  } = useUserManagement();\n\n  const onSaveUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!editingUser) return;\n\n    await handleSaveUser(editingUser, async (id, updates) => {\n      await updateProfile(id, updates);\n    }, closeEditDialog);\n  };\n\n  const onCreateUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    setIsCreatingUser(true);\n    \n    try {\n      await handleCreateUser(newUser, async (id, updates) => {\n        await updateProfile(id, updates);\n      }, async () => {\n        // Refresh the user list after successful creation\n        await refetch();\n      });\n      \n      // Close dialog and reset form only after successful creation\n      setIsCreateDialogOpen(false);\n      resetNewUser();\n    } catch (error) {\n      // Keep dialog open on error so user can see the error and retry\n      console.error('Error creating user:', error);\n    } finally {\n      setIsCreatingUser(false);\n    }\n  };\n\n  const onDeleteUser = (userId: string) => {\n    const user = profiles.find(p => p.id === userId);\n    setUserToDelete({ id: userId, name: user?.full_name || 'Unknown User' });\n    setIsDeleteDialogOpen(true);\n  };\n\n  const handleDeleteConfirm = async (reason: string) => {\n    if (!userToDelete) return;\n    setIsDeleting(true);\n    try {\n      const result = await handleDeleteUser(userToDelete.id, userToDelete.name, reason);\n      if (result.success) {\n        // Close dialog first\n        setIsDeleteDialogOpen(false);\n        setUserToDelete(null);\n        \n        // Show success toast after dialog is closed\n        toast({\n          title: \"Success\",\n          description: `User ${result.deletedUser?.name || userToDelete.name} has been successfully deleted`,\n        });\n        \n        // Refresh the user list after successful deletion\n        await refetch();\n      }\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  const onUpdateProfile = async (id: string, updates: any) => {\n    const result = await updateProfile(id, updates);\n    return { success: result.success, error: result.error };\n  };\n\n  if (loading) {\n    return <div>Loading users...</div>;\n  }\n\n  return (\n    <>\n      <ImportErrorReport\n        errors={importErrors}\n        warnings={importWarnings}\n        successCount={importStats.success}\n        totalCount={importStats.total}\n        isOpen={showImportErrorReport}\n        onClose={() => setShowImportErrorReport(false)}\n        importType=\"Users\"\n      />\n      \n      <div className=\"space-y-6\">\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Users className=\"h-5 w-5\" />\n                  User Management\n                </CardTitle>\n                <CardDescription>\n                  Manage user accounts, roles, and permissions\n                </CardDescription>\n              </div>\n              <div className=\"flex items-center gap-4\">\n                <ToggleGroup \n                  type=\"single\" \n                  value={viewMode} \n                  onValueChange={(value) => value && setViewMode(value as 'cards' | 'list')}\n                >\n                  <ToggleGroupItem value=\"cards\" aria-label=\"Card view\">\n                    <LayoutGrid className=\"h-4 w-4\" />\n                  </ToggleGroupItem>\n                  <ToggleGroupItem value=\"list\" aria-label=\"List view\">\n                    <List className=\"h-4 w-4\" />\n                  </ToggleGroupItem>\n                </ToggleGroup>\n                <ImportUsersDialog \n                  onImportComplete={refetch}\n                  onImportError={(errors, warnings, stats) => {\n                    setImportErrors(errors);\n                    setImportWarnings(warnings);\n                    setImportStats(stats);\n                    setShowImportErrorReport(true);\n                  }}\n                />\n                <CreateUserDialog\n                  isOpen={isCreateDialogOpen}\n                  onOpenChange={setIsCreateDialogOpen}\n                  newUser={newUser}\n                  onUserChange={setNewUser}\n                  onSubmit={onCreateUser}\n                  loading={isCreatingUser}\n                />\n              </div>\n            </div>\n          </CardHeader>\n          <CardContent>\n            {viewMode === 'cards' ? (\n              <UserList\n                profiles={profiles}\n                onEdit={openEditDialog}\n                onDelete={onDeleteUser}\n              />\n            ) : (\n              <UserTable\n                profiles={profiles}\n                onEdit={openEditDialog}\n                onDelete={onDeleteUser}\n                onUpdate={onUpdateProfile}\n              />\n            )}\n          </CardContent>\n        </Card>\n\n      <EditUserDialog\n        isOpen={isEditDialogOpen}\n        onOpenChange={setIsEditDialogOpen}\n        editingUser={editingUser}\n        onUserChange={setEditingUser}\n        onSubmit={onSaveUser}\n      />\n\n        <DeleteUserDialog\n          open={isDeleteDialogOpen}\n          onOpenChange={setIsDeleteDialogOpen}\n          userName={userToDelete?.name || ''}\n          onConfirm={handleDeleteConfirm}\n          loading={isDeleting}\n        />\n      </div>\n    </>\n  );\n};\nexport default UserManagement;","import React, { useState, useCallback } from 'react';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { useDropzone } from 'react-dropzone';\nimport { Upload, FileText, Download, Trash2 } from 'lucide-react';\nimport { toast } from '@/components/ui/use-toast';\nimport { useOrganisationContext } from '../../context/OrganisationContext';\nimport Papa from 'papaparse';\nimport { ImportError } from '../import/ImportErrorReport';\n\ninterface ImportRolesDialogProps {\n  onImportComplete?: () => Promise<void>;\n  onImportError?: (errors: ImportError[], warnings: ImportError[], stats: { success: number; total: number }) => void;\n}\n\nconst ImportRolesDialog: React.FC<ImportRolesDialogProps> = ({ onImportComplete, onImportError }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [uploadedFile, setUploadedFile] = useState<File | null>(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const { supabaseClient } = useOrganisationContext();\n\n  const onDrop = useCallback((acceptedFiles: File[]) => {\n    const file = acceptedFiles[0];\n    if (file) {\n      if (!file.name.endsWith('.csv') && file.type !== 'text/csv') {\n        toast({\n          title: \"Invalid file type\",\n          description: \"Please upload a CSV file (.csv)\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      \n      setUploadedFile(file);\n      toast({\n        title: \"File uploaded\",\n        description: `${file.name} is ready for import`,\n      });\n    }\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'text/csv': ['.csv']\n    },\n    multiple: false\n  });\n\n  const generateSampleCSV = () => {\n    const headers = ['Name', 'Description', 'Department'];\n    const sampleData = [\n      ['Senior Developer', 'Senior software developer role', 'Engineering'],\n      ['Sales Manager', 'Manages sales team and customer relations', 'Sales'],\n      ['HR Coordinator', 'Human resources coordination', 'HR'],\n      ['Intern', 'Internship role', '']\n    ];\n    \n    const csvContent = [headers, ...sampleData]\n      .map(row => row.map(field => `\"${field}\"`).join(','))\n      .join('\\n');\n    \n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', 'role_import_template.csv');\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  // Helper function to validate and find department\n  const validateDepartment = async (departmentName: string): Promise<{ isValid: boolean; departmentId?: string }> => {\n    if (!departmentName || !departmentName.trim()) {\n      return { isValid: false };\n    }\n\n    const trimmedName = departmentName.trim();\n    \n    const { data: department } = await supabaseClient\n      .from('departments')\n      .select('id')\n      .ilike('name', trimmedName)\n      .maybeSingle();\n\n    if (department) {\n      return { isValid: true, departmentId: department.id };\n    }\n\n    return { isValid: false };\n  };\n\n  const processRoleImport = async (row: any) => {\n    const name = row['Name'] || row['name'];\n    \n    if (!name || !name.trim()) {\n      throw new Error('Role name is required');\n    }\n\n    const description = row['Description'] || row['description'] || '';\n    const departmentName = row['Department'] || row['department'] || '';\n\n    const warnings = [];\n    let departmentId: string | null = null;\n\n    if (departmentName) {\n      const departmentValidation = await validateDepartment(departmentName);\n      if (departmentValidation.isValid) {\n        departmentId = departmentValidation.departmentId || null;\n      } else {\n        warnings.push({\n          field: 'Department',\n          value: departmentName,\n          message: `Department \"${departmentName}\" not found - role created without department`\n        });\n      }\n    }\n\n    // Check if role already exists\n    const { data: existingRole } = await supabaseClient\n      .from('roles')\n      .select('role_id')\n      .ilike('name', name.trim())\n      .maybeSingle();\n\n    if (existingRole) {\n      throw new Error(`Role \"${name}\" already exists`);\n    }\n\n    // Create role (always active)\n    const { error } = await supabaseClient\n      .from('roles')\n      .insert([{\n        name: name.trim(),\n        description: description.trim() || null,\n        department_id: departmentId,\n        is_active: true,\n      }]);\n\n    if (error) {\n      throw new Error(error.message || 'Failed to create role');\n    }\n\n    return { \n      name, \n      success: true, \n      warnings: warnings.length > 0 ? warnings : null\n    };\n  };\n\n  const handleImport = async () => {\n    if (!uploadedFile) {\n      toast({\n        title: \"No file selected\",\n        description: \"Please upload a file first\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsProcessing(true);\n\n    try {\n      const text = await uploadedFile.text();\n      \n      Papa.parse(text, {\n        header: true,\n        complete: async (results: Papa.ParseResult<any>) => {\n          const data = results.data as any[];\n          \n          if (data.length === 0) {\n            toast({\n              title: \"Empty file\",\n              description: \"The uploaded file contains no data\",\n              variant: \"destructive\",\n            });\n            setIsProcessing(false);\n            return;\n          }\n\n          console.log('Processing', data.length, 'roles');\n          let successCount = 0;\n          const errors: ImportError[] = [];\n          const warnings: ImportError[] = [];\n\n          // Process roles sequentially\n          for (let i = 0; i < data.length; i++) {\n            const row = data[i];\n            \n            // Skip empty rows\n            if (!row['Name'] && !row['name']) {\n              console.log('Skipping empty row at index', i);\n              continue;\n            }\n\n            const name = row['Name'] || row['name'] || 'Unknown';\n            \n            try {\n              console.log(`Processing role ${i + 1} of ${data.length}:`, name);\n              const result = await processRoleImport(row);\n              successCount++;\n              console.log(`Successfully processed role ${i + 1}`);\n              \n              // Collect warnings\n              if (result.warnings) {\n                result.warnings.forEach((warning: any) => {\n                  warnings.push({\n                    rowNumber: i + 2,\n                    identifier: name,\n                    field: warning.field,\n                    error: warning.message,\n                    rawData: row\n                  });\n                });\n              }\n            } catch (error: any) {\n              console.error(`Error importing role ${i + 1}:`, error);\n              errors.push({\n                rowNumber: i + 2,\n                identifier: name,\n                field: !row['Name'] && !row['name'] ? 'Name' : undefined,\n                error: error.message || 'Unknown error',\n                rawData: row\n              });\n            }\n\n            // Add a small delay between roles\n            if (i < data.length - 1) {\n              await new Promise(resolve => setTimeout(resolve, 300));\n            }\n          }\n\n          console.log('Import completed. Success:', successCount, 'Errors:', errors.length, 'Warnings:', warnings.length);\n\n          setUploadedFile(null);\n          setIsProcessing(false);\n          setIsOpen(false);\n\n          // Show error/warning report\n          if ((errors.length > 0 || warnings.length > 0) && onImportError) {\n            setTimeout(() => {\n              onImportError(errors, warnings, { success: successCount, total: data.length });\n            }, 300);\n            \n            if (errors.length > 0 && warnings.length > 0) {\n              toast({\n                title: \"Import completed with errors and warnings\",\n                description: `${successCount} roles imported successfully. ${errors.length} failed, ${warnings.length} have validation warnings.`,\n                variant: \"destructive\",\n              });\n            } else if (errors.length > 0) {\n              toast({\n                title: \"Import completed with errors\",\n                description: `${successCount} roles imported successfully. ${errors.length} failed.`,\n                variant: \"destructive\",\n              });\n            } else if (warnings.length > 0) {\n              toast({\n                title: \"Import completed with warnings\",\n                description: `${successCount} roles imported successfully. ${warnings.length} have validation warnings.`,\n                variant: \"default\",\n              });\n            }\n          } else {\n            toast({\n              title: \"Import completed successfully\",\n              description: `All ${successCount} roles imported successfully.`,\n            });\n          }\n          \n          // Refresh the role list\n          if (onImportComplete) {\n            await onImportComplete();\n          }\n        },\n        error: (error: Error) => {\n          console.error('Parse error:', error);\n          toast({\n            title: \"Parse error\",\n            description: \"Failed to parse the CSV file\",\n            variant: \"destructive\",\n          });\n          setIsProcessing(false);\n        }\n      });\n    } catch (error) {\n      console.error('Import error:', error);\n      toast({\n        title: \"Import failed\",\n        description: \"An error occurred while importing the file\",\n        variant: \"destructive\",\n      });\n      setIsProcessing(false);\n    }\n  };\n\n  const handleDialogClose = (open: boolean) => {\n    if (!open && !isProcessing) {\n      setUploadedFile(null);\n    }\n    setIsOpen(open);\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleDialogClose}>\n      <DialogTrigger asChild>\n        <Button variant=\"outline\" size=\"icon\">\n          <Upload className=\"h-4 w-4\" />\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Import Roles</DialogTitle>\n          <DialogDescription>\n            Upload a CSV or Excel file to import roles in bulk. Departments can be assigned by name.\n          </DialogDescription>\n        </DialogHeader>\n        \n        <div className=\"space-y-6\">\n          <div className=\"space-y-4\">\n            <div\n              {...getRootProps()}\n              className={`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ${\n                isDragActive\n                  ? 'border-blue-400 bg-blue-50'\n                  : uploadedFile\n                  ? 'border-green-400 bg-green-50'\n                  : 'border-gray-300 hover:border-gray-400'\n              }`}\n            >\n              <input {...getInputProps()} />\n              <Upload className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n              \n              {uploadedFile ? (\n                <div>\n                  <p className=\"text-lg font-medium text-green-700\">File Ready for Import</p>\n                  <p className=\"text-sm text-green-600 mt-1\">{uploadedFile.name}</p>\n                  <p className=\"text-xs text-gray-500 mt-2\">\n                    Click to select a different file or drop a new one here\n                  </p>\n                </div>\n              ) : isDragActive ? (\n                <p className=\"text-lg font-medium text-blue-700\">Drop your role file here</p>\n              ) : (\n                <div>\n                  <p className=\"text-lg font-medium\">Drag and drop your role file here, or browse</p>\n                        <p className=\"text-sm text-gray-500 mt-1\">Supports CSV files (.csv)</p>\n                </div>\n              )}\n            </div>\n\n            {uploadedFile && (\n              <div className=\"flex gap-3\">\n                <Button\n                  onClick={handleImport}\n                  disabled={isProcessing}\n                  size=\"icon\"\n                >\n                  {isProcessing ? (\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                  ) : (\n                    <Upload className=\"h-4 w-4\" />\n                  )}\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setUploadedFile(null)}\n                  disabled={isProcessing}\n                  size=\"icon\"\n                >\n                  <Trash2 className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            )}\n          </div>\n\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n            <h4 className=\"text-sm font-medium text-yellow-800 mb-2\">Role Import Template</h4>\n            <p className=\"text-sm text-yellow-700 mb-3\">Download a template for importing roles with sample data.</p>\n            \n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between p-2 bg-white rounded border\">\n                <div className=\"flex items-center gap-2\">\n                  <FileText className=\"h-4 w-4\" />\n                  <span className=\"text-sm font-medium\">Roles Template (CSV)</span>\n                  <Badge variant=\"secondary\" className=\"text-xs\">Ready to use template</Badge>\n                </div>\n                <Button size=\"sm\" variant=\"outline\" onClick={generateSampleCSV} className=\"gap-2\">\n                  <Download className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <h4 className=\"font-semibold text-blue-900 mb-2\">Available Columns</h4>\n            <div className=\"flex flex-wrap gap-2 mb-4\">\n              {['Name', 'Description', 'Department'].map((column) => (\n                <Badge key={column} variant=\"outline\" className=\"text-xs\">\n                  {column}\n                </Badge>\n              ))}\n            </div>\n            <div className=\"text-sm text-blue-800 space-y-1\">\n              <p>• <strong>Name</strong> is required for each role</p>\n              <p>• <strong>Description</strong> is optional</p>\n              <p>• <strong>Department</strong> is optional - must match an existing department name</p>\n              <p>• All imported roles will be created as <strong>active</strong> by default</p>\n              <p>• Duplicate role names will be rejected</p>\n            </div>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default ImportRolesDialog;\n\n","import React, { useState, useMemo } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Switch } from '@/components/ui/switch';\nimport { UserCheck, Plus, Edit, Trash2, X, Save, ArrowUp, ArrowDown } from 'lucide-react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { toast } from '@/components/ui/use-toast';\nimport { useOrganisationContext } from '../../context/OrganisationContext';\nimport type { Role, Department } from '../../types';\nimport ImportRolesDialog from './ImportRolesDialog';\nimport { ImportErrorReport, ImportError } from '@/components/import/ImportErrorReport';\n\nexport const RoleManagement: React.FC = () => {\n  const { supabaseClient, hasPermission } = useOrganisationContext();\n  const queryClient = useQueryClient();\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [editingRole, setEditingRole] = useState<Role | null>(null);\n  const [showImportErrorReport, setShowImportErrorReport] = useState(false);\n  const [importErrors, setImportErrors] = useState<ImportError[]>([]);\n  const [importWarnings, setImportWarnings] = useState<ImportError[]>([]);\n  const [importStats, setImportStats] = useState({ success: 0, total: 0 });\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    department_id: 'none',\n    is_active: true,\n  });\n  const [sortField, setSortField] = useState<'name' | 'department' | 'status' | 'created_at'>('name');\n  const [sortDirection, setSortDirection] = useState<'asc' | 'desc'>('asc');\n\n  const { data: rolesData, isLoading: rolesLoading } = useQuery({\n    queryKey: ['roles'],\n    queryFn: async () => {\n      const { data, error } = await supabaseClient\n        .from('roles')\n        .select('*');\n      \n      if (error) throw error;\n      return data as Role[];\n    },\n  });\n\n  const { data: departments } = useQuery({\n    queryKey: ['departments-for-roles'],\n    queryFn: async () => {\n      const { data, error } = await supabaseClient\n        .from('departments')\n        .select('id, name')\n        .order('name');\n      \n      if (error) throw error;\n      return data as Department[];\n    },\n  });\n\n  // Sort roles based on current sort configuration\n  const roles = useMemo(() => {\n    if (!rolesData) return [];\n    \n    return [...rolesData].sort((a, b) => {\n      let aValue: string | Date | number;\n      let bValue: string | Date | number;\n      \n      if (sortField === 'name') {\n        aValue = a.name.toLowerCase();\n        bValue = b.name.toLowerCase();\n      } else if (sortField === 'department') {\n        const aDept = departments?.find(d => d.id === a.department_id);\n        const bDept = departments?.find(d => d.id === b.department_id);\n        aValue = (aDept?.name || 'No department').toLowerCase();\n        bValue = (bDept?.name || 'No department').toLowerCase();\n      } else if (sortField === 'status') {\n        aValue = a.is_active ? 1 : 0; // Active = 1, Inactive = 0\n        bValue = b.is_active ? 1 : 0;\n      } else {\n        aValue = new Date(a.created_at);\n        bValue = new Date(b.created_at);\n      }\n      \n      if (aValue < bValue) return sortDirection === 'asc' ? -1 : 1;\n      if (aValue > bValue) return sortDirection === 'asc' ? 1 : -1;\n      return 0;\n    });\n  }, [rolesData, sortField, sortDirection, departments]);\n\n  const handleSort = (field: 'name' | 'department' | 'status' | 'created_at') => {\n    if (sortField === field) {\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortField(field);\n      setSortDirection('asc');\n    }\n  };\n\n  const createRoleMutation = useMutation({\n    mutationFn: async (roleData: typeof formData) => {\n      const { error } = await supabaseClient\n        .from('roles')\n        .insert([{\n          name: roleData.name,\n          description: roleData.description || null,\n          department_id: roleData.department_id === 'none' ? null : roleData.department_id || null,\n          is_active: roleData.is_active,\n        }]);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['roles'] });\n      toast({\n        title: \"Success\",\n        description: \"Role created successfully\",\n      });\n      setIsCreateDialogOpen(false);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateRoleMutation = useMutation({\n    mutationFn: async ({ role_id, ...roleData }: Role & typeof formData) => {\n      const { error } = await supabaseClient\n        .from('roles')\n        .update({\n          name: roleData.name,\n          description: roleData.description || null,\n          department_id: roleData.department_id === 'none' ? null : roleData.department_id || null,\n          is_active: roleData.is_active,\n        })\n        .eq('role_id', role_id);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['roles'] });\n      toast({\n        title: \"Success\",\n        description: \"Role updated successfully\",\n      });\n      setEditingRole(null);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteRoleMutation = useMutation({\n    mutationFn: async (roleId: string) => {\n      const { error } = await supabaseClient\n        .from('roles')\n        .delete()\n        .eq('role_id', roleId);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['roles'] });\n      toast({\n        title: \"Success\",\n        description: \"Role deleted successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      description: '',\n      department_id: 'none',\n      is_active: true,\n    });\n  };\n\n  const handleEdit = (role: Role) => {\n    setEditingRole(role);\n    setFormData({\n      name: role.name,\n      description: role.description || '',\n      department_id: role.department_id || 'none',\n      is_active: role.is_active,\n    });\n  };\n\n  const handleSubmit = () => {\n    if (editingRole) {\n      updateRoleMutation.mutate({ \n        ...editingRole,\n        ...formData \n      });\n    } else {\n      createRoleMutation.mutate(formData);\n    }\n  };\n\n  const getDepartmentName = (departmentId?: string) => {\n    if (!departmentId || departmentId === 'none') return 'No department';\n    const department = departments?.find(d => d.id === departmentId);\n    return department?.name || 'Unknown department';\n  };\n\n  if (rolesLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <ImportErrorReport\n        errors={importErrors}\n        warnings={importWarnings}\n        successCount={importStats.success}\n        totalCount={importStats.total}\n        isOpen={showImportErrorReport}\n        onClose={() => setShowImportErrorReport(false)}\n        importType=\"Roles\"\n      />\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"flex items-center gap-2\">\n                <UserCheck className=\"h-5 w-5\" />\n                Roles\n              </CardTitle>\n              <CardDescription>\n                Manage organizational roles and their department associations\n              </CardDescription>\n            </div>\n            {hasPermission('canManageRoles') && (\n              <div className=\"flex items-center gap-2\">\n                <ImportRolesDialog\n                  onImportComplete={async () => {\n                    await queryClient.invalidateQueries({ queryKey: ['roles'] });\n                  }}\n                  onImportError={(errors, warnings, stats) => {\n                    setImportErrors(errors);\n                    setImportWarnings(warnings);\n                    setImportStats(stats);\n                    setShowImportErrorReport(true);\n                  }}\n                />\n                <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n                  <DialogTrigger asChild>\n                    <Button size=\"icon\">\n                      <Plus className=\"h-4 w-4\" />\n                    </Button>\n                  </DialogTrigger>\n                <DialogContent>\n                  <DialogHeader>\n                    <DialogTitle>Create Role</DialogTitle>\n                    <DialogDescription>\n                      Add a new role to your organization\n                    </DialogDescription>\n                  </DialogHeader>\n                  <div className=\"grid gap-4 py-4\">\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"name\">Role Name</Label>\n                      <Input\n                        id=\"name\"\n                        value={formData.name}\n                        onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                        placeholder=\"Enter role name\"\n                      />\n                    </div>\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"description\">Description</Label>\n                      <Textarea\n                        id=\"description\"\n                        value={formData.description}\n                        onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                        placeholder=\"Enter role description (optional)\"\n                      />\n                    </div>\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"department\">Department</Label>\n                      <Select\n                        value={formData.department_id}\n                        onValueChange={(value) => setFormData(prev => ({ ...prev, department_id: value }))}\n                      >\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select department (optional)\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"none\">No department</SelectItem>\n                          {departments?.map((department) => (\n                            <SelectItem key={department.id} value={department.id}>\n                              {department.name}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <Switch\n                        id=\"is_active\"\n                        checked={formData.is_active}\n                        onCheckedChange={(checked) => setFormData(prev => ({ ...prev, is_active: checked }))}\n                      />\n                      <Label htmlFor=\"is_active\">Active Role</Label>\n                    </div>\n                  </div>\n                  <DialogFooter>\n                    <Button variant=\"outline\" onClick={() => setIsCreateDialogOpen(false)} size=\"icon\">\n                      <X className=\"h-4 w-4\" />\n                    </Button>\n                    <Button onClick={handleSubmit} disabled={!formData.name.trim()} size=\"icon\">\n                      <Save className=\"h-4 w-4\" />\n                    </Button>\n                  </DialogFooter>\n                </DialogContent>\n              </Dialog>\n              </div>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow className=\"bg-muted/50\">\n                <TableHead \n                  className=\"cursor-pointer hover:bg-muted/70 transition-colors\"\n                  onClick={() => handleSort('name')}\n                >\n                  <div className=\"flex items-center gap-2\">\n                    Name\n                    {sortField === 'name' && (\n                      sortDirection === 'asc' ? (\n                        <ArrowUp className=\"h-4 w-4\" />\n                      ) : (\n                        <ArrowDown className=\"h-4 w-4\" />\n                      )\n                    )}\n                  </div>\n                </TableHead>\n                <TableHead>Description</TableHead>\n                <TableHead \n                  className=\"cursor-pointer hover:bg-muted/70 transition-colors\"\n                  onClick={() => handleSort('department')}\n                >\n                  <div className=\"flex items-center gap-2\">\n                    Department\n                    {sortField === 'department' && (\n                      sortDirection === 'asc' ? (\n                        <ArrowUp className=\"h-4 w-4\" />\n                      ) : (\n                        <ArrowDown className=\"h-4 w-4\" />\n                      )\n                    )}\n                  </div>\n                </TableHead>\n                <TableHead \n                  className=\"cursor-pointer hover:bg-muted/70 transition-colors\"\n                  onClick={() => handleSort('status')}\n                >\n                  <div className=\"flex items-center gap-2\">\n                    Status\n                    {sortField === 'status' && (\n                      sortDirection === 'asc' ? (\n                        <ArrowUp className=\"h-4 w-4\" />\n                      ) : (\n                        <ArrowDown className=\"h-4 w-4\" />\n                      )\n                    )}\n                  </div>\n                </TableHead>\n                <TableHead \n                  className=\"cursor-pointer hover:bg-muted/70 transition-colors\"\n                  onClick={() => handleSort('created_at')}\n                >\n                  <div className=\"flex items-center gap-2\">\n                    Created\n                    {sortField === 'created_at' && (\n                      sortDirection === 'asc' ? (\n                        <ArrowUp className=\"h-4 w-4\" />\n                      ) : (\n                        <ArrowDown className=\"h-4 w-4\" />\n                      )\n                    )}\n                  </div>\n                </TableHead>\n                {hasPermission('canManageRoles') && (\n                  <TableHead className=\"text-right\">Actions</TableHead>\n                )}\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {roles?.map((role) => (\n                <TableRow key={role.role_id}>\n                  <TableCell className=\"font-medium\">\n                    {role.name}\n                  </TableCell>\n                  <TableCell>\n                    {role.description || <span className=\"text-muted-foreground\">No description</span>}\n                  </TableCell>\n                  <TableCell>\n                    {getDepartmentName(role.department_id)}\n                  </TableCell>\n                  <TableCell>\n                    <Badge variant={role.is_active ? \"default\" : \"secondary\"}>\n                      {role.is_active ? \"Active\" : \"Inactive\"}\n                    </Badge>\n                  </TableCell>\n                  <TableCell>\n                    {new Date(role.created_at).toLocaleDateString()}\n                  </TableCell>\n                  {hasPermission('canManageRoles') && (\n                    <TableCell className=\"text-right\">\n                      <div className=\"flex items-center justify-end gap-2\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => handleEdit(role)}\n                        >\n                          <Edit className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => deleteRoleMutation.mutate(role.role_id)}\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  )}\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          \n          {roles?.length === 0 && (\n            <div className=\"text-center py-8\">\n              <UserCheck className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n              <p className=\"text-muted-foreground\">No roles found</p>\n              <p className=\"text-sm text-muted-foreground\">Create your first role to get started</p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Edit Dialog */}\n      {hasPermission('canManageRoles') && (\n        <Dialog open={!!editingRole} onOpenChange={(open) => !open && setEditingRole(null)}>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Edit Role</DialogTitle>\n              <DialogDescription>\n                Update role information\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"grid gap-4 py-4\">\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-name\">Role Name</Label>\n                <Input\n                  id=\"edit-name\"\n                  value={formData.name}\n                  onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                  placeholder=\"Enter role name\"\n                />\n              </div>\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-description\">Description</Label>\n                <Textarea\n                  id=\"edit-description\"\n                  value={formData.description}\n                  onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                  placeholder=\"Enter role description (optional)\"\n                />\n              </div>\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-department\">Department</Label>\n                <Select\n                  value={formData.department_id}\n                  onValueChange={(value) => setFormData(prev => ({ ...prev, department_id: value }))}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select department (optional)\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"none\">No department</SelectItem>\n                    {departments?.map((department) => (\n                      <SelectItem key={department.id} value={department.id}>\n                        {department.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Switch\n                  id=\"edit-is_active\"\n                  checked={formData.is_active}\n                  onCheckedChange={(checked) => setFormData(prev => ({ ...prev, is_active: checked }))}\n                />\n                <Label htmlFor=\"edit-is_active\">Active Role</Label>\n              </div>\n            </div>\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setEditingRole(null)} size=\"icon\">\n                <X className=\"h-4 w-4\" />\n              </Button>\n              <Button onClick={handleSubmit} disabled={!formData.name.trim()} size=\"icon\">\n                <Save className=\"h-4 w-4\" />\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  );\n};","import React, { useState, useCallback } from 'react';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { useDropzone } from 'react-dropzone';\nimport { Upload, FileText, Download, Trash2 } from 'lucide-react';\nimport { toast } from '@/components/ui/use-toast';\nimport { useOrganisationContext } from '../../context/OrganisationContext';\nimport { useQuery } from '@tanstack/react-query';\nimport Papa from 'papaparse';\nimport { ImportError } from '../import/ImportErrorReport';\n\ninterface ImportDepartmentsDialogProps {\n  onImportComplete?: () => Promise<void>;\n  onImportError?: (errors: ImportError[], warnings: ImportError[], stats: { success: number; total: number }) => void;\n}\n\nconst ImportDepartmentsDialog: React.FC<ImportDepartmentsDialogProps> = ({ onImportComplete, onImportError }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [uploadedFile, setUploadedFile] = useState<File | null>(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const { supabaseClient } = useOrganisationContext();\n\n  const onDrop = useCallback((acceptedFiles: File[]) => {\n    const file = acceptedFiles[0];\n    if (file) {\n      if (!file.name.endsWith('.csv') && file.type !== 'text/csv') {\n        toast({\n          title: \"Invalid file type\",\n          description: \"Please upload a CSV file (.csv)\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      \n      setUploadedFile(file);\n      toast({\n        title: \"File uploaded\",\n        description: `${file.name} is ready for import`,\n      });\n    }\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'text/csv': ['.csv']\n    },\n    multiple: false\n  });\n\n  const generateSampleCSV = () => {\n    const headers = ['Name', 'Description', 'Manager'];\n    const sampleData = [\n      ['Engineering', 'Software development and technical operations', 'John Lim'],\n      ['Sales', 'Sales and customer relations', 'Jane Tan'],\n      ['HR', 'Human resources and recruitment', '']\n    ];\n    \n    const csvContent = [headers, ...sampleData]\n      .map(row => row.map(field => `\"${field}\"`).join(','))\n      .join('\\n');\n    \n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', 'department_import_template.csv');\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  // Helper function to validate and find manager\n  const validateManager = async (managerName: string): Promise<{ isValid: boolean; managerId?: string }> => {\n    if (!managerName || !managerName.trim()) {\n      return { isValid: false };\n    }\n\n    const trimmedName = managerName.trim();\n    \n    // Try to find by full name first\n    const { data: profileByName } = await supabaseClient\n      .from('profiles')\n      .select('id')\n      .ilike('full_name', trimmedName)\n      .maybeSingle();\n\n    if (profileByName) {\n      return { isValid: true, managerId: profileByName.id };\n    }\n\n    // Try to find by email\n    const { data: profileByEmail } = await supabaseClient\n      .from('profiles')\n      .select('id')\n      .ilike('email', trimmedName)\n      .maybeSingle();\n\n    if (profileByEmail) {\n      return { isValid: true, managerId: profileByEmail.id };\n    }\n\n    return { isValid: false };\n  };\n\n  const processDepartmentImport = async (row: any) => {\n    const name = row['Name'] || row['name'];\n    \n    if (!name || !name.trim()) {\n      throw new Error('Department name is required');\n    }\n\n    const description = row['Description'] || row['description'] || '';\n    const managerName = row['Manager'] || row['manager'] || '';\n\n    const warnings = [];\n    let managerId: string | null = null;\n\n    if (managerName) {\n      const managerValidation = await validateManager(managerName);\n      if (managerValidation.isValid) {\n        managerId = managerValidation.managerId || null;\n      } else {\n        warnings.push({\n          field: 'Manager',\n          value: managerName,\n          message: `Manager \"${managerName}\" not found - department created without manager`\n        });\n      }\n    }\n\n    // Check if department already exists\n    const { data: existingDept } = await supabaseClient\n      .from('departments')\n      .select('id')\n      .ilike('name', name.trim())\n      .maybeSingle();\n\n    if (existingDept) {\n      throw new Error(`Department \"${name}\" already exists`);\n    }\n\n    // Create department\n    const { error } = await supabaseClient\n      .from('departments')\n      .insert([{\n        name: name.trim(),\n        description: description.trim() || null,\n        manager_id: managerId,\n      }]);\n\n    if (error) {\n      throw new Error(error.message || 'Failed to create department');\n    }\n\n    return { \n      name, \n      success: true, \n      warnings: warnings.length > 0 ? warnings : null\n    };\n  };\n\n  const handleImport = async () => {\n    if (!uploadedFile) {\n      toast({\n        title: \"No file selected\",\n        description: \"Please upload a file first\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsProcessing(true);\n\n    try {\n      const text = await uploadedFile.text();\n      \n      Papa.parse(text, {\n        header: true,\n        complete: async (results: Papa.ParseResult<any>) => {\n          const data = results.data as any[];\n          \n          if (data.length === 0) {\n            toast({\n              title: \"Empty file\",\n              description: \"The uploaded file contains no data\",\n              variant: \"destructive\",\n            });\n            setIsProcessing(false);\n            return;\n          }\n\n          console.log('Processing', data.length, 'departments');\n          let successCount = 0;\n          const errors: ImportError[] = [];\n          const warnings: ImportError[] = [];\n\n          // Process departments sequentially\n          for (let i = 0; i < data.length; i++) {\n            const row = data[i];\n            \n            // Skip empty rows\n            if (!row['Name'] && !row['name']) {\n              console.log('Skipping empty row at index', i);\n              continue;\n            }\n\n            const name = row['Name'] || row['name'] || 'Unknown';\n            \n            try {\n              console.log(`Processing department ${i + 1} of ${data.length}:`, name);\n              const result = await processDepartmentImport(row);\n              successCount++;\n              console.log(`Successfully processed department ${i + 1}`);\n              \n              // Collect warnings\n              if (result.warnings) {\n                result.warnings.forEach((warning: any) => {\n                  warnings.push({\n                    rowNumber: i + 2,\n                    identifier: name,\n                    field: warning.field,\n                    error: warning.message,\n                    rawData: row\n                  });\n                });\n              }\n            } catch (error: any) {\n              console.error(`Error importing department ${i + 1}:`, error);\n              errors.push({\n                rowNumber: i + 2,\n                identifier: name,\n                field: !row['Name'] && !row['name'] ? 'Name' : undefined,\n                error: error.message || 'Unknown error',\n                rawData: row\n              });\n            }\n\n            // Add a small delay between departments\n            if (i < data.length - 1) {\n              await new Promise(resolve => setTimeout(resolve, 300));\n            }\n          }\n\n          console.log('Import completed. Success:', successCount, 'Errors:', errors.length, 'Warnings:', warnings.length);\n\n          setUploadedFile(null);\n          setIsProcessing(false);\n          setIsOpen(false);\n\n          // Show error/warning report\n          if ((errors.length > 0 || warnings.length > 0) && onImportError) {\n            setTimeout(() => {\n              onImportError(errors, warnings, { success: successCount, total: data.length });\n            }, 300);\n            \n            if (errors.length > 0 && warnings.length > 0) {\n              toast({\n                title: \"Import completed with errors and warnings\",\n                description: `${successCount} departments imported successfully. ${errors.length} failed, ${warnings.length} have validation warnings.`,\n                variant: \"destructive\",\n              });\n            } else if (errors.length > 0) {\n              toast({\n                title: \"Import completed with errors\",\n                description: `${successCount} departments imported successfully. ${errors.length} failed.`,\n                variant: \"destructive\",\n              });\n            } else if (warnings.length > 0) {\n              toast({\n                title: \"Import completed with warnings\",\n                description: `${successCount} departments imported successfully. ${warnings.length} have validation warnings.`,\n                variant: \"default\",\n              });\n            }\n          } else {\n            toast({\n              title: \"Import completed successfully\",\n              description: `All ${successCount} departments imported successfully.`,\n            });\n          }\n          \n          // Refresh the department list\n          if (onImportComplete) {\n            await onImportComplete();\n          }\n        },\n        error: (error: Error) => {\n          console.error('Parse error:', error);\n          toast({\n            title: \"Parse error\",\n            description: \"Failed to parse the CSV file\",\n            variant: \"destructive\",\n          });\n          setIsProcessing(false);\n        }\n      });\n    } catch (error) {\n      console.error('Import error:', error);\n      toast({\n        title: \"Import failed\",\n        description: \"An error occurred while importing the file\",\n        variant: \"destructive\",\n      });\n      setIsProcessing(false);\n    }\n  };\n\n  const handleDialogClose = (open: boolean) => {\n    if (!open && !isProcessing) {\n      setUploadedFile(null);\n    }\n    setIsOpen(open);\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleDialogClose}>\n      <DialogTrigger asChild>\n        <Button variant=\"outline\" size=\"icon\">\n          <Upload className=\"h-4 w-4\" />\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Import Departments</DialogTitle>\n          <DialogDescription>\n            Upload a CSV or Excel file to import departments in bulk. Managers can be assigned by name or email.\n          </DialogDescription>\n        </DialogHeader>\n        \n        <div className=\"space-y-6\">\n          <div className=\"space-y-4\">\n            <div\n              {...getRootProps()}\n              className={`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ${\n                isDragActive\n                  ? 'border-blue-400 bg-blue-50'\n                  : uploadedFile\n                  ? 'border-green-400 bg-green-50'\n                  : 'border-gray-300 hover:border-gray-400'\n              }`}\n            >\n              <input {...getInputProps()} />\n              <Upload className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n              \n              {uploadedFile ? (\n                <div>\n                  <p className=\"text-lg font-medium text-green-700\">File Ready for Import</p>\n                  <p className=\"text-sm text-green-600 mt-1\">{uploadedFile.name}</p>\n                  <p className=\"text-xs text-gray-500 mt-2\">\n                    Click to select a different file or drop a new one here\n                  </p>\n                </div>\n              ) : isDragActive ? (\n                <p className=\"text-lg font-medium text-blue-700\">Drop your department file here</p>\n              ) : (\n                <div>\n                  <p className=\"text-lg font-medium\">Drag and drop your department file here, or browse</p>\n                        <p className=\"text-sm text-gray-500 mt-1\">Supports CSV files (.csv)</p>\n                </div>\n              )}\n            </div>\n\n            {uploadedFile && (\n              <div className=\"flex gap-3\">\n                <Button\n                  onClick={handleImport}\n                  disabled={isProcessing}\n                  size=\"icon\"\n                >\n                  {isProcessing ? (\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                  ) : (\n                    <Upload className=\"h-4 w-4\" />\n                  )}\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setUploadedFile(null)}\n                  disabled={isProcessing}\n                  size=\"icon\"\n                >\n                  <Trash2 className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            )}\n          </div>\n\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n            <h4 className=\"text-sm font-medium text-yellow-800 mb-2\">Department Import Template</h4>\n            <p className=\"text-sm text-yellow-700 mb-3\">Download a template for importing departments with sample data.</p>\n            \n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between p-2 bg-white rounded border\">\n                <div className=\"flex items-center gap-2\">\n                  <FileText className=\"h-4 w-4\" />\n                  <span className=\"text-sm font-medium\">Departments Template (CSV)</span>\n                  <Badge variant=\"secondary\" className=\"text-xs\">Ready to use template</Badge>\n                </div>\n                <Button size=\"sm\" variant=\"outline\" onClick={generateSampleCSV} className=\"gap-2\">\n                  <Download className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <h4 className=\"font-semibold text-blue-900 mb-2\">Available Columns</h4>\n            <div className=\"flex flex-wrap gap-2 mb-4\">\n              {['Name', 'Description', 'Manager'].map((column) => (\n                <Badge key={column} variant=\"outline\" className=\"text-xs\">\n                  {column}\n                </Badge>\n              ))}\n            </div>\n            <div className=\"text-sm text-blue-800 space-y-1\">\n              <p>• <strong>Name</strong> is required for each department</p>\n              <p>• <strong>Description</strong> is optional</p>\n              <p>• <strong>Manager</strong> is optional - can be full name or email (must exist in system)</p>\n              <p>• Duplicate department names will be rejected</p>\n            </div>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default ImportDepartmentsDialog;\n\n","import React, { useState, useMemo } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Building2, Plus, Edit, Trash2, X, Save, ArrowUp, ArrowDown } from 'lucide-react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { toast } from '@/components/ui/use-toast';\nimport { useOrganisationContext } from '../../context/OrganisationContext';\nimport type { Department } from '../../types';\nimport ImportDepartmentsDialog from './ImportDepartmentsDialog';\nimport { ImportErrorReport, ImportError } from '@/components/import/ImportErrorReport';\n\ninterface Profile {\n  id: string;\n  full_name: string;\n}\n\nexport const DepartmentManagement: React.FC = () => {\n  const { supabaseClient, hasPermission } = useOrganisationContext();\n  const queryClient = useQueryClient();\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [editingDepartment, setEditingDepartment] = useState<Department | null>(null);\n  const [showImportErrorReport, setShowImportErrorReport] = useState(false);\n  const [importErrors, setImportErrors] = useState<ImportError[]>([]);\n  const [importWarnings, setImportWarnings] = useState<ImportError[]>([]);\n  const [importStats, setImportStats] = useState({ success: 0, total: 0 });\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    manager_id: 'none',\n  });\n  const [sortField, setSortField] = useState<'name' | 'created_at'>('name');\n  const [sortDirection, setSortDirection] = useState<'asc' | 'desc'>('asc');\n\n  const { data: departmentsData, isLoading: departmentsLoading } = useQuery({\n    queryKey: ['departments'],\n    queryFn: async () => {\n      const { data, error } = await supabaseClient\n        .from('departments')\n        .select('*');\n      \n      if (error) throw error;\n      return data as Department[];\n    },\n  });\n\n  // Sort departments based on current sort configuration\n  const departments = useMemo(() => {\n    if (!departmentsData) return [];\n    \n    return [...departmentsData].sort((a, b) => {\n      let aValue: string | Date;\n      let bValue: string | Date;\n      \n      if (sortField === 'name') {\n        aValue = a.name.toLowerCase();\n        bValue = b.name.toLowerCase();\n      } else {\n        aValue = new Date(a.created_at);\n        bValue = new Date(b.created_at);\n      }\n      \n      if (aValue < bValue) return sortDirection === 'asc' ? -1 : 1;\n      if (aValue > bValue) return sortDirection === 'asc' ? 1 : -1;\n      return 0;\n    });\n  }, [departmentsData, sortField, sortDirection]);\n\n  const handleSort = (field: 'name' | 'created_at') => {\n    if (sortField === field) {\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortField(field);\n      setSortDirection('asc');\n    }\n  };\n\n  const { data: profiles } = useQuery({\n    queryKey: ['profiles-for-managers'],\n    queryFn: async () => {\n      const { data, error } = await supabaseClient\n        .from('profiles')\n        .select('id, full_name')\n        .not('full_name', 'is', null)\n        .order('full_name');\n      \n      if (error) throw error;\n      return data as Profile[];\n    },\n  });\n\n  const createDepartmentMutation = useMutation({\n    mutationFn: async (departmentData: typeof formData) => {\n      const { error } = await supabaseClient\n        .from('departments')\n        .insert([{\n          name: departmentData.name,\n          description: departmentData.description || null,\n          manager_id: departmentData.manager_id === 'none' ? null : departmentData.manager_id || null,\n        }]);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['departments'] });\n      toast({\n        title: \"Success\",\n        description: \"Department created successfully\",\n      });\n      setIsCreateDialogOpen(false);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateDepartmentMutation = useMutation({\n    mutationFn: async ({ id, ...departmentData }: Department & typeof formData) => {\n      const { error } = await supabaseClient\n        .from('departments')\n        .update({\n          name: departmentData.name,\n          description: departmentData.description || null,\n          manager_id: departmentData.manager_id === 'none' ? null : departmentData.manager_id || null,\n        })\n        .eq('id', id);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['departments'] });\n      toast({\n        title: \"Success\",\n        description: \"Department updated successfully\",\n      });\n      setEditingDepartment(null);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteDepartmentMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const { error } = await supabaseClient\n        .from('departments')\n        .delete()\n        .eq('id', id);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['departments'] });\n      toast({\n        title: \"Success\",\n        description: \"Department deleted successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      description: '',\n      manager_id: 'none',\n    });\n  };\n\n  const handleEdit = (department: Department) => {\n    setEditingDepartment(department);\n    setFormData({\n      name: department.name,\n      description: department.description || '',\n      manager_id: department.manager_id || 'none',\n    });\n  };\n\n  const handleSubmit = () => {\n    if (editingDepartment) {\n      updateDepartmentMutation.mutate({ \n        ...editingDepartment,\n        ...formData \n      });\n    } else {\n      createDepartmentMutation.mutate(formData);\n    }\n  };\n\n  const getManagerName = (managerId?: string) => {\n    if (!managerId || managerId === 'none') return 'No manager assigned';\n    const manager = profiles?.find(p => p.id === managerId);\n    return manager?.full_name || 'Unknown manager';\n  };\n\n  if (departmentsLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <ImportErrorReport\n        errors={importErrors}\n        warnings={importWarnings}\n        successCount={importStats.success}\n        totalCount={importStats.total}\n        isOpen={showImportErrorReport}\n        onClose={() => setShowImportErrorReport(false)}\n        importType=\"Departments\"\n      />\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Building2 className=\"h-5 w-5\" />\n                Departments\n              </CardTitle>\n              <CardDescription>\n                Manage organizational departments and assign managers\n              </CardDescription>\n            </div>\n            {hasPermission('canManageDepartments') && (\n              <div className=\"flex items-center gap-2\">\n                <ImportDepartmentsDialog\n                  onImportComplete={async () => {\n                    await queryClient.invalidateQueries({ queryKey: ['departments'] });\n                  }}\n                  onImportError={(errors, warnings, stats) => {\n                    setImportErrors(errors);\n                    setImportWarnings(warnings);\n                    setImportStats(stats);\n                    setShowImportErrorReport(true);\n                  }}\n                />\n                <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n                  <DialogTrigger asChild>\n                    <Button size=\"icon\">\n                      <Plus className=\"h-4 w-4\" />\n                    </Button>\n                  </DialogTrigger>\n                <DialogContent>\n                  <DialogHeader>\n                    <DialogTitle>Create Department</DialogTitle>\n                    <DialogDescription>\n                      Add a new department to your organization\n                    </DialogDescription>\n                  </DialogHeader>\n                  <div className=\"grid gap-4 py-4\">\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"name\">Department Name</Label>\n                      <Input\n                        id=\"name\"\n                        value={formData.name}\n                        onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                        placeholder=\"Enter department name\"\n                      />\n                    </div>\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"description\">Description</Label>\n                      <Textarea\n                        id=\"description\"\n                        value={formData.description}\n                        onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                        placeholder=\"Enter department description (optional)\"\n                      />\n                    </div>\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"manager\">Manager</Label>\n                      <Select\n                        value={formData.manager_id}\n                        onValueChange={(value) => setFormData(prev => ({ ...prev, manager_id: value }))}\n                      >\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select manager (optional)\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"none\">No manager</SelectItem>\n                          {profiles?.map((profile) => (\n                            <SelectItem key={profile.id} value={profile.id}>\n                              {profile.full_name}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n                  <DialogFooter>\n                    <Button variant=\"outline\" onClick={() => setIsCreateDialogOpen(false)} size=\"icon\">\n                      <X className=\"h-4 w-4\" />\n                    </Button>\n                    <Button onClick={handleSubmit} disabled={!formData.name.trim()} size=\"icon\">\n                      <Save className=\"h-4 w-4\" />\n                    </Button>\n                  </DialogFooter>\n                </DialogContent>\n              </Dialog>\n              </div>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow className=\"bg-muted/50\">\n                <TableHead \n                  className=\"cursor-pointer hover:bg-muted/70 transition-colors\"\n                  onClick={() => handleSort('name')}\n                >\n                  <div className=\"flex items-center gap-2\">\n                    Name\n                    {sortField === 'name' && (\n                      sortDirection === 'asc' ? (\n                        <ArrowUp className=\"h-4 w-4\" />\n                      ) : (\n                        <ArrowDown className=\"h-4 w-4\" />\n                      )\n                    )}\n                  </div>\n                </TableHead>\n                <TableHead>Description</TableHead>\n                <TableHead>Manager</TableHead>\n                <TableHead \n                  className=\"cursor-pointer hover:bg-muted/70 transition-colors\"\n                  onClick={() => handleSort('created_at')}\n                >\n                  <div className=\"flex items-center gap-2\">\n                    Created\n                    {sortField === 'created_at' && (\n                      sortDirection === 'asc' ? (\n                        <ArrowUp className=\"h-4 w-4\" />\n                      ) : (\n                        <ArrowDown className=\"h-4 w-4\" />\n                      )\n                    )}\n                  </div>\n                </TableHead>\n                {hasPermission('canManageDepartments') && (\n                  <TableHead className=\"text-right\">Actions</TableHead>\n                )}\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {departments?.map((department) => (\n                <TableRow key={department.id}>\n                  <TableCell className=\"font-medium\">\n                    {department.name}\n                  </TableCell>\n                  <TableCell>\n                    {department.description || <span className=\"text-muted-foreground\">No description</span>}\n                  </TableCell>\n                  <TableCell>\n                    {getManagerName(department.manager_id)}\n                  </TableCell>\n                  <TableCell>\n                    {new Date(department.created_at).toLocaleDateString()}\n                  </TableCell>\n                  {hasPermission('canManageDepartments') && (\n                    <TableCell className=\"text-right\">\n                      <div className=\"flex items-center justify-end gap-2\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => handleEdit(department)}\n                        >\n                          <Edit className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => deleteDepartmentMutation.mutate(department.id)}\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  )}\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          \n          {departments?.length === 0 && (\n            <div className=\"text-center py-8\">\n              <Building2 className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n              <p className=\"text-muted-foreground\">No departments found</p>\n              <p className=\"text-sm text-muted-foreground\">Create your first department to get started</p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Edit Dialog */}\n      {hasPermission('canManageDepartments') && (\n        <Dialog open={!!editingDepartment} onOpenChange={(open) => !open && setEditingDepartment(null)}>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Edit Department</DialogTitle>\n              <DialogDescription>\n                Update department information\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"grid gap-4 py-4\">\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-name\">Department Name</Label>\n                <Input\n                  id=\"edit-name\"\n                  value={formData.name}\n                  onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                  placeholder=\"Enter department name\"\n                />\n              </div>\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-description\">Description</Label>\n                <Textarea\n                  id=\"edit-description\"\n                  value={formData.description}\n                  onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                  placeholder=\"Enter department description (optional)\"\n                />\n              </div>\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-manager\">Manager</Label>\n                <Select\n                  value={formData.manager_id}\n                  onValueChange={(value) => setFormData(prev => ({ ...prev, manager_id: value }))}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select manager (optional)\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"none\">No manager</SelectItem>\n                    {profiles?.map((profile) => (\n                      <SelectItem key={profile.id} value={profile.id}>\n                        {profile.full_name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setEditingDepartment(null)} size=\"icon\">\n                <X className=\"h-4 w-4\" />\n              </Button>\n              <Button onClick={handleSubmit} disabled={!formData.name.trim()} size=\"icon\">\n                <Save className=\"h-4 w-4\" />\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  );\n};","import React, { useState, useMemo } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Switch } from '@/components/ui/switch';\nimport { MapPin, Plus, Edit, Trash2, X, Save, ArrowUp, ArrowDown } from 'lucide-react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { toast } from '@/components/ui/use-toast';\nimport { useOrganisationContext } from '../../context/OrganisationContext';\nimport type { Location } from '../../types';\n\nexport const LocationManagement: React.FC = () => {\n  const { supabaseClient, hasPermission } = useOrganisationContext();\n  const queryClient = useQueryClient();\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [editingLocation, setEditingLocation] = useState<Location | null>(null);\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    building: '',\n    floor: '',\n    room: '',\n    status: 'Active',\n  });\n  const [sortField, setSortField] = useState<'name' | 'building' | 'status' | 'created_at'>('name');\n  const [sortDirection, setSortDirection] = useState<'asc' | 'desc'>('asc');\n\n  const { data: locationsData, isLoading: locationsLoading } = useQuery({\n    queryKey: ['locations'],\n    queryFn: async () => {\n      const { data, error } = await supabaseClient\n        .from('locations')\n        .select('*');\n      \n      if (error) throw error;\n      return data as Location[];\n    },\n  });\n\n  // Sort locations based on current sort configuration\n  const locations = useMemo(() => {\n    if (!locationsData) return [];\n    \n    return [...locationsData].sort((a, b) => {\n      let aValue: string | Date;\n      let bValue: string | Date;\n      \n      if (sortField === 'name') {\n        aValue = a.name.toLowerCase();\n        bValue = b.name.toLowerCase();\n      } else if (sortField === 'building') {\n        aValue = (a.building || '').toLowerCase();\n        bValue = (b.building || '').toLowerCase();\n      } else if (sortField === 'status') {\n        aValue = a.status.toLowerCase();\n        bValue = b.status.toLowerCase();\n      } else {\n        aValue = new Date(a.created_at);\n        bValue = new Date(b.created_at);\n      }\n      \n      if (aValue < bValue) return sortDirection === 'asc' ? -1 : 1;\n      if (aValue > bValue) return sortDirection === 'asc' ? 1 : -1;\n      return 0;\n    });\n  }, [locationsData, sortField, sortDirection]);\n\n  const handleSort = (field: 'name' | 'building' | 'status' | 'created_at') => {\n    if (sortField === field) {\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortField(field);\n      setSortDirection('asc');\n    }\n  };\n\n  const createLocationMutation = useMutation({\n    mutationFn: async (locationData: typeof formData) => {\n      const { error } = await supabaseClient\n        .from('locations')\n        .insert([{\n          name: locationData.name,\n          description: locationData.description || null,\n          building: locationData.building || null,\n          floor: locationData.floor || null,\n          room: locationData.room || null,\n          status: locationData.status,\n        }]);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['locations'] });\n      toast({\n        title: \"Success\",\n        description: \"Location created successfully\",\n      });\n      setIsCreateDialogOpen(false);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateLocationMutation = useMutation({\n    mutationFn: async ({ id, ...locationData }: Location & typeof formData) => {\n      const { error } = await supabaseClient\n        .from('locations')\n        .update({\n          name: locationData.name,\n          description: locationData.description || null,\n          building: locationData.building || null,\n          floor: locationData.floor || null,\n          room: locationData.room || null,\n          status: locationData.status,\n        })\n        .eq('id', id);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['locations'] });\n      toast({\n        title: \"Success\",\n        description: \"Location updated successfully\",\n      });\n      setEditingLocation(null);\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteLocationMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const { error } = await supabaseClient\n        .from('locations')\n        .delete()\n        .eq('id', id);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['locations'] });\n      toast({\n        title: \"Success\",\n        description: \"Location deleted successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      description: '',\n      building: '',\n      floor: '',\n      room: '',\n      status: 'Active',\n    });\n  };\n\n  const handleEdit = (location: Location) => {\n    setEditingLocation(location);\n    setFormData({\n      name: location.name,\n      description: location.description || '',\n      building: location.building || '',\n      floor: location.floor || '',\n      room: location.room || '',\n      status: location.status,\n    });\n  };\n\n  const handleSubmit = () => {\n    if (editingLocation) {\n      updateLocationMutation.mutate({ \n        ...editingLocation,\n        ...formData \n      });\n    } else {\n      createLocationMutation.mutate(formData);\n    }\n  };\n\n  if (locationsLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"flex items-center gap-2\">\n                <MapPin className=\"h-5 w-5\" />\n                Locations\n              </CardTitle>\n              <CardDescription>\n                Manage organizational locations and facilities\n              </CardDescription>\n            </div>\n            {hasPermission('canManageLocations') && (\n              <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n                <DialogTrigger asChild>\n                  <Button size=\"icon\">\n                    <Plus className=\"h-4 w-4\" />\n                  </Button>\n                </DialogTrigger>\n                <DialogContent>\n                  <DialogHeader>\n                    <DialogTitle>Create Location</DialogTitle>\n                    <DialogDescription>\n                      Add a new location to your organization\n                    </DialogDescription>\n                  </DialogHeader>\n                  <div className=\"grid gap-4 py-4\">\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"name\">Location Name</Label>\n                      <Input\n                        id=\"name\"\n                        value={formData.name}\n                        onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                        placeholder=\"Enter location name\"\n                      />\n                    </div>\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"description\">Description</Label>\n                      <Textarea\n                        id=\"description\"\n                        value={formData.description}\n                        onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                        placeholder=\"Enter location description (optional)\"\n                      />\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div className=\"grid gap-2\">\n                        <Label htmlFor=\"building\">Building</Label>\n                        <Input\n                          id=\"building\"\n                          value={formData.building}\n                          onChange={(e) => setFormData(prev => ({ ...prev, building: e.target.value }))}\n                          placeholder=\"Building name\"\n                        />\n                      </div>\n                      <div className=\"grid gap-2\">\n                        <Label htmlFor=\"floor\">Floor</Label>\n                        <Input\n                          id=\"floor\"\n                          value={formData.floor}\n                          onChange={(e) => setFormData(prev => ({ ...prev, floor: e.target.value }))}\n                          placeholder=\"Floor number\"\n                        />\n                      </div>\n                    </div>\n                    <div className=\"grid gap-2\">\n                      <Label htmlFor=\"room\">Room</Label>\n                      <Input\n                        id=\"room\"\n                        value={formData.room}\n                        onChange={(e) => setFormData(prev => ({ ...prev, room: e.target.value }))}\n                        placeholder=\"Room number/name\"\n                      />\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <Switch\n                        id=\"status\"\n                        checked={formData.status === 'Active'}\n                        onCheckedChange={(checked) => setFormData(prev => ({ ...prev, status: checked ? 'Active' : 'Inactive' }))}\n                      />\n                      <Label htmlFor=\"status\">Active Location</Label>\n                    </div>\n                  </div>\n                  <DialogFooter>\n                    <Button variant=\"outline\" onClick={() => setIsCreateDialogOpen(false)} size=\"icon\">\n                      <X className=\"h-4 w-4\" />\n                    </Button>\n                    <Button onClick={handleSubmit} disabled={!formData.name.trim()} size=\"icon\">\n                      <Save className=\"h-4 w-4\" />\n                    </Button>\n                  </DialogFooter>\n                </DialogContent>\n              </Dialog>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow className=\"bg-muted/50\">\n                <TableHead \n                  className=\"cursor-pointer hover:bg-muted/70 transition-colors\"\n                  onClick={() => handleSort('name')}\n                >\n                  <div className=\"flex items-center gap-2\">\n                    Name\n                    {sortField === 'name' && (\n                      sortDirection === 'asc' ? (\n                        <ArrowUp className=\"h-4 w-4\" />\n                      ) : (\n                        <ArrowDown className=\"h-4 w-4\" />\n                      )\n                    )}\n                  </div>\n                </TableHead>\n                <TableHead \n                  className=\"cursor-pointer hover:bg-muted/70 transition-colors\"\n                  onClick={() => handleSort('building')}\n                >\n                  <div className=\"flex items-center gap-2\">\n                    Building\n                    {sortField === 'building' && (\n                      sortDirection === 'asc' ? (\n                        <ArrowUp className=\"h-4 w-4\" />\n                      ) : (\n                        <ArrowDown className=\"h-4 w-4\" />\n                      )\n                    )}\n                  </div>\n                </TableHead>\n                <TableHead>Floor</TableHead>\n                <TableHead>Room</TableHead>\n                <TableHead \n                  className=\"cursor-pointer hover:bg-muted/70 transition-colors\"\n                  onClick={() => handleSort('status')}\n                >\n                  <div className=\"flex items-center gap-2\">\n                    Status\n                    {sortField === 'status' && (\n                      sortDirection === 'asc' ? (\n                        <ArrowUp className=\"h-4 w-4\" />\n                      ) : (\n                        <ArrowDown className=\"h-4 w-4\" />\n                      )\n                    )}\n                  </div>\n                </TableHead>\n                <TableHead \n                  className=\"cursor-pointer hover:bg-muted/70 transition-colors\"\n                  onClick={() => handleSort('created_at')}\n                >\n                  <div className=\"flex items-center gap-2\">\n                    Created\n                    {sortField === 'created_at' && (\n                      sortDirection === 'asc' ? (\n                        <ArrowUp className=\"h-4 w-4\" />\n                      ) : (\n                        <ArrowDown className=\"h-4 w-4\" />\n                      )\n                    )}\n                  </div>\n                </TableHead>\n                {hasPermission('canManageLocations') && (\n                  <TableHead className=\"text-right\">Actions</TableHead>\n                )}\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {locations?.map((location) => (\n                <TableRow key={location.id}>\n                  <TableCell className=\"font-medium\">\n                    <div>\n                      <div>{location.name}</div>\n                      {location.description && (\n                        <div className=\"text-sm text-muted-foreground\">{location.description}</div>\n                      )}\n                    </div>\n                  </TableCell>\n                  <TableCell>{location.building || '-'}</TableCell>\n                  <TableCell>{location.floor || '-'}</TableCell>\n                  <TableCell>{location.room || '-'}</TableCell>\n                  <TableCell>\n                    <span className={`px-2 py-1 rounded text-xs ${\n                      location.status === 'Active' \n                        ? 'bg-green-100 text-green-800' \n                        : 'bg-gray-100 text-gray-800'\n                    }`}>\n                      {location.status}\n                    </span>\n                  </TableCell>\n                  <TableCell>\n                    {new Date(location.created_at).toLocaleDateString()}\n                  </TableCell>\n                  {hasPermission('canManageLocations') && (\n                    <TableCell className=\"text-right\">\n                      <div className=\"flex items-center justify-end gap-2\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => handleEdit(location)}\n                        >\n                          <Edit className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => deleteLocationMutation.mutate(location.id)}\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  )}\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          \n          {locations?.length === 0 && (\n            <div className=\"text-center py-8\">\n              <MapPin className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n              <p className=\"text-muted-foreground\">No locations found</p>\n              <p className=\"text-sm text-muted-foreground\">Create your first location to get started</p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Edit Dialog */}\n      {hasPermission('canManageLocations') && (\n        <Dialog open={!!editingLocation} onOpenChange={(open) => !open && setEditingLocation(null)}>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Edit Location</DialogTitle>\n              <DialogDescription>\n                Update location information\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"grid gap-4 py-4\">\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-name\">Location Name</Label>\n                <Input\n                  id=\"edit-name\"\n                  value={formData.name}\n                  onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                  placeholder=\"Enter location name\"\n                />\n              </div>\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-description\">Description</Label>\n                <Textarea\n                  id=\"edit-description\"\n                  value={formData.description}\n                  onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                  placeholder=\"Enter location description (optional)\"\n                />\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"grid gap-2\">\n                  <Label htmlFor=\"edit-building\">Building</Label>\n                  <Input\n                    id=\"edit-building\"\n                    value={formData.building}\n                    onChange={(e) => setFormData(prev => ({ ...prev, building: e.target.value }))}\n                    placeholder=\"Building name\"\n                  />\n                </div>\n                <div className=\"grid gap-2\">\n                  <Label htmlFor=\"edit-floor\">Floor</Label>\n                  <Input\n                    id=\"edit-floor\"\n                    value={formData.floor}\n                    onChange={(e) => setFormData(prev => ({ ...prev, floor: e.target.value }))}\n                    placeholder=\"Floor number\"\n                  />\n                </div>\n              </div>\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"edit-room\">Room</Label>\n                <Input\n                  id=\"edit-room\"\n                  value={formData.room}\n                  onChange={(e) => setFormData(prev => ({ ...prev, room: e.target.value }))}\n                  placeholder=\"Room number/name\"\n                />\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Switch\n                  id=\"edit-status\"\n                  checked={formData.status === 'Active'}\n                  onCheckedChange={(checked) => setFormData(prev => ({ ...prev, status: checked ? 'Active' : 'Inactive' }))}\n                />\n                <Label htmlFor=\"edit-status\">Active Location</Label>\n              </div>\n            </div>\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setEditingLocation(null)} size=\"icon\">\n                <X className=\"h-4 w-4\" />\n              </Button>\n              <Button onClick={handleSubmit} disabled={!formData.name.trim()} size=\"icon\">\n                <Save className=\"h-4 w-4\" />\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  );\n};","import React, { useState } from 'react';\nimport { useOrganisationContext } from '../../context/OrganisationContext';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { toast } from '@/components/ui/use-toast';\nimport { Loader2, X, Plus } from 'lucide-react';\n\ninterface AddOrganisationCertificateDialogProps {\n  isOpen: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSuccess?: () => void;\n}\n\nconst AddOrganisationCertificateDialog: React.FC<AddOrganisationCertificateDialogProps> = ({\n  isOpen,\n  onOpenChange,\n  onSuccess,\n}) => {\n  const { supabaseClient } = useOrganisationContext();\n  const [loading, setLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    type: 'Certificate',\n    name: '',\n    issued_by: '',\n    date_acquired: '',\n    expiry_date: '',\n    credential_id: '',\n    status: 'Valid',\n  });\n\n  const resetForm = () => {\n    setFormData({\n      type: 'Certificate',\n      name: '',\n      issued_by: '',\n      date_acquired: '',\n      expiry_date: '',\n      credential_id: '',\n      status: 'Valid',\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    setLoading(true);\n    \n    try {\n      // Get current user\n      const { data: { user }, error: userError } = await supabaseClient.auth.getUser();\n      \n      if (userError || !user) {\n        throw new Error('User not authenticated');\n      }\n\n      const certificateData = {\n        user_id: user.id,\n        type: formData.type,\n        name: formData.name,\n        issued_by: formData.issued_by,\n        date_acquired: formData.date_acquired,\n        expiry_date: formData.expiry_date || null,\n        credential_id: formData.credential_id || null,\n        status: formData.status,\n        org_cert: true, // This is an organisation certificate\n      };\n      \n      const { error } = await supabaseClient\n        .from('certificates')\n        .insert([certificateData]);\n      \n      if (error) throw error;\n      \n      toast({\n        title: \"Organisation certificate added\",\n        description: \"Certificate has been successfully added to the organisation.\",\n      });\n      \n      onOpenChange(false);\n      resetForm();\n      onSuccess?.();\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Add Organisation Certificate</DialogTitle>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"type\">Type *</Label>\n            <Select value={formData.type} onValueChange={(value) => setFormData({ ...formData, type: value })}>\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"Certificate\">Certificate</SelectItem>\n                <SelectItem value=\"Document\">Document</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div>\n            <Label htmlFor=\"name\">Name *</Label>\n            <Input\n              id=\"name\"\n              value={formData.name}\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n              placeholder=\"e.g., ISO 27001, SOC 2, GDPR Compliance\"\n              required\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"issued_by\">Issued By *</Label>\n            <Input\n              id=\"issued_by\"\n              value={formData.issued_by}\n              onChange={(e) => setFormData({ ...formData, issued_by: e.target.value })}\n              placeholder=\"e.g., BSI, AICPA, TÜV SÜD\"\n              required\n            />\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"date_acquired\">Date Acquired *</Label>\n              <Input\n                id=\"date_acquired\"\n                type=\"date\"\n                value={formData.date_acquired}\n                onChange={(e) => setFormData({ ...formData, date_acquired: e.target.value })}\n                required\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"expiry_date\">Expiry Date</Label>\n              <Input\n                id=\"expiry_date\"\n                type=\"date\"\n                value={formData.expiry_date}\n                onChange={(e) => setFormData({ ...formData, expiry_date: e.target.value })}\n              />\n            </div>\n          </div>\n\n          <div>\n            <Label htmlFor=\"credential_id\">Credential ID</Label>\n            <Input\n              id=\"credential_id\"\n              value={formData.credential_id}\n              onChange={(e) => setFormData({ ...formData, credential_id: e.target.value })}\n              placeholder=\"Certificate or credential identifier\"\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"status\">Status</Label>\n            <Select value={formData.status} onValueChange={(value) => setFormData({ ...formData, status: value })}>\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"Valid\">Valid</SelectItem>\n                <SelectItem value=\"Expired\">Expired</SelectItem>\n                <SelectItem value=\"Pending\">Pending</SelectItem>\n                <SelectItem value=\"Revoked\">Revoked</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"flex gap-2 justify-end\">\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)} size=\"icon\">\n              <X className=\"h-4 w-4\" />\n            </Button>\n            <Button type=\"submit\" disabled={loading || !formData.name || !formData.issued_by || !formData.date_acquired} size=\"icon\">\n              {loading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Plus className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AddOrganisationCertificateDialog;","import React, { useState, useEffect } from \"react\";\nimport { Award, Calendar, Building, FileText, User, Plus } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useOrganisationContext } from \"../../context/OrganisationContext\";\nimport AddOrganisationCertificateDialog from \"./AddOrganisationCertificateDialog\";\n\ninterface OrgCertificate {\n  id: string;\n  type?: string;\n  name: string;\n  issued_by: string;\n  date_acquired: string;\n  expiry_date: string | null;\n  credential_id: string | null;\n  status: string;\n  org_cert?: boolean;\n  user_id: string;\n  created_at: string;\n  created_by?: string;\n}\n\ninterface UserProfile {\n  id: string;\n  full_name: string;\n  username: string;\n}\n\nconst OrganisationCertificates: React.FC = () => {\n  const { supabaseClient } = useOrganisationContext();\n  const [certificates, setCertificates] = useState<OrgCertificate[]>([]);\n  const [userProfiles, setUserProfiles] = useState<{ [key: string]: UserProfile }>({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);\n\n  const formatDate = (dateString: string | null) => {\n    if (!dateString) return \"No expiry\";\n    return new Date(dateString).toLocaleDateString();\n  };\n\n  const getTypeIcon = (type?: string) => {\n    return type === 'Document' ? <FileText className=\"h-5 w-5 text-primary flex-shrink-0\" /> : <Award className=\"h-5 w-5 text-primary flex-shrink-0\" />;\n  };\n\n  const getTypeColor = (type?: string) => {\n    return type === 'Document' ? 'bg-blue-500' : 'bg-purple-500';\n  };\n\n  const getValidityStatus = (expiryDate: string | null) => {\n    if (!expiryDate) return 'Valid';\n    \n    const expiry = new Date(expiryDate);\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    \n    if (expiry < today) {\n      return 'Expired';\n    } else if (expiry <= new Date(today.getTime() + 30 * 24 * 60 * 60 * 1000)) {\n      return 'Expiring Soon';\n    } else {\n      return 'Valid';\n    }\n  };\n\n  const getValidityStatusColor = (status: string) => {\n    switch (status) {\n      case 'Valid': return 'bg-green-500';\n      case 'Expired': return 'bg-red-500';\n      case 'Expiring Soon': return 'bg-yellow-500';\n      default: return 'bg-blue-500';\n    }\n  };\n\n  const getUserDisplayName = (userId: string) => {\n    const profile = userProfiles[userId];\n    return profile?.full_name || profile?.username || 'Unknown User';\n  };\n\n  const fetchOrganisationCertificates = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      // Fetch certificates where org_cert is TRUE\n      const { data: certificatesData, error: certificatesError } = await supabaseClient\n        .from('certificates')\n        .select('*')\n        .eq('org_cert', true)\n        .order('created_at', { ascending: false });\n\n      if (certificatesError) throw certificatesError;\n\n      // Get unique user IDs to fetch profile information\n      const userIds = [...new Set(certificatesData?.map(cert => cert.user_id) || [])];\n      \n      if (userIds.length > 0) {\n        const { data: profilesData, error: profilesError } = await supabaseClient\n          .from('profiles')\n          .select('id, full_name, username')\n          .in('id', userIds);\n\n        if (profilesError) throw profilesError;\n\n        // Create a map of user profiles\n        const profilesMap = (profilesData || []).reduce((acc, profile) => {\n          acc[profile.id] = profile;\n          return acc;\n        }, {} as { [key: string]: UserProfile });\n\n        setUserProfiles(profilesMap);\n      }\n\n      setCertificates(certificatesData || []);\n    } catch (error: any) {\n      setError(error.message);\n      console.error('Error fetching organisation certificates:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchOrganisationCertificates();\n  }, [supabaseClient]);\n\n  if (loading) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Award className=\"h-5 w-5\" />\n            Certificates\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex items-center justify-center py-8\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (error) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Award className=\"h-5 w-5\" />\n            Certificates\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-red-500\">Error loading certificates: {error}</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Award className=\"h-5 w-5\" />\n              Certificates\n            </CardTitle>\n            <CardDescription>\n              Manage organisation certificates\n            </CardDescription>\n          </div>\n          <Button onClick={() => setIsAddDialogOpen(true)} size=\"icon\">\n            <Plus className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-4\">\n          {certificates.length === 0 ? (\n            <p className=\"text-muted-foreground text-center py-8\">No organisation certificates found</p>\n          ) : (\n            certificates.map((cert) => {\n              const validityStatus = getValidityStatus(cert.expiry_date);\n              \n              return (\n                <div key={cert.id} className=\"border rounded-lg p-4\">\n                  {/* Top line with name and type badge */}\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <div className=\"flex items-center gap-3 min-w-0 flex-1\">\n                      {getTypeIcon(cert.type)}\n                      <h3 className=\"font-semibold text-lg truncate\">{cert.name}</h3>\n                    </div>\n                    \n                    <div className=\"flex items-center flex-shrink-0\">\n                      <Badge className={`${getTypeColor(cert.type)} text-white text-sm px-2 py-1`}>\n                        {cert.type || 'Certificate'}\n                      </Badge>\n                    </div>\n                  </div>\n                  \n                  {/* Main information row - Issuer, ID, Issued, Expires */}\n                  <div className=\"grid grid-cols-4 gap-4 text-sm ml-8\">\n                    <div className=\"flex items-center gap-2\">\n                      <Building className=\"h-4 w-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">Issuer:</span>\n                      <span className=\"font-medium text-foreground\">{cert.issued_by}</span>\n                    </div>\n                    \n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-muted-foreground\">ID:</span>\n                      <span className=\"font-medium\">{cert.credential_id || 'N/A'}</span>\n                    </div>\n                    \n                    <div className=\"flex items-center gap-2\">\n                      <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">Issued:</span>\n                      <span className=\"font-medium\">{formatDate(cert.date_acquired)}</span>\n                    </div>\n                    \n                    <div className=\"flex items-center gap-2\">\n                      <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">Expires:</span>\n                      <span className=\"font-medium\">{formatDate(cert.expiry_date)}</span>\n                    </div>\n                  </div>\n                  \n                  {/* Second row with Added by and Status */}\n                  <div className=\"flex items-center justify-between ml-8 mt-2\">\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <User className=\"h-4 w-4 text-muted-foreground\" />\n                      <span className=\"text-muted-foreground\">Added by:</span>\n                      <span className=\"font-medium\">{getUserDisplayName(cert.user_id)}</span>\n                    </div>\n                    \n                    <div className=\"flex items-center\">\n                      <Badge className={`${getValidityStatusColor(validityStatus)} text-white`}>\n                        {validityStatus}\n                      </Badge>\n                    </div>\n                  </div>\n                </div>\n              );\n            })\n          )}\n        </div>\n        \n        <AddOrganisationCertificateDialog\n          isOpen={isAddDialogOpen}\n          onOpenChange={setIsAddDialogOpen}\n          onSuccess={() => {\n            fetchOrganisationCertificates();\n          }}\n        />\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default OrganisationCertificates;","\"use client\";import o,{forwardRef as fe,isValidElement as xt}from\"react\";import vt from\"react-dom\";import E from\"react\";var jt=n=>{switch(n){case\"success\":return ee;case\"info\":return ae;case\"warning\":return oe;case\"error\":return se;default:return null}},te=Array(12).fill(0),Yt=({visible:n,className:e})=>E.createElement(\"div\",{className:[\"sonner-loading-wrapper\",e].filter(Boolean).join(\" \"),\"data-visible\":n},E.createElement(\"div\",{className:\"sonner-spinner\"},te.map((t,a)=>E.createElement(\"div\",{className:\"sonner-loading-bar\",key:`spinner-bar-${a}`})))),ee=E.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",fill:\"currentColor\",height:\"20\",width:\"20\"},E.createElement(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z\",clipRule:\"evenodd\"})),oe=E.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",fill:\"currentColor\",height:\"20\",width:\"20\"},E.createElement(\"path\",{fillRule:\"evenodd\",d:\"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z\",clipRule:\"evenodd\"})),ae=E.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",fill:\"currentColor\",height:\"20\",width:\"20\"},E.createElement(\"path\",{fillRule:\"evenodd\",d:\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z\",clipRule:\"evenodd\"})),se=E.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",fill:\"currentColor\",height:\"20\",width:\"20\"},E.createElement(\"path\",{fillRule:\"evenodd\",d:\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z\",clipRule:\"evenodd\"})),Ot=E.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"12\",height:\"12\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"1.5\",strokeLinecap:\"round\",strokeLinejoin:\"round\"},E.createElement(\"line\",{x1:\"18\",y1:\"6\",x2:\"6\",y2:\"18\"}),E.createElement(\"line\",{x1:\"6\",y1:\"6\",x2:\"18\",y2:\"18\"}));import $t from\"react\";var Ft=()=>{let[n,e]=$t.useState(document.hidden);return $t.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener(\"visibilitychange\",t),()=>window.removeEventListener(\"visibilitychange\",t)},[]),n};import re from\"react\";var bt=1,yt=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)});this.publish=e=>{this.subscribers.forEach(t=>t(e))};this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]};this.create=e=>{var S;let{message:t,...a}=e,u=typeof(e==null?void 0:e.id)==\"number\"||((S=e.id)==null?void 0:S.length)>0?e.id:bt++,f=this.toasts.find(g=>g.id===u),w=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(u)&&this.dismissedToasts.delete(u),f?this.toasts=this.toasts.map(g=>g.id===u?(this.publish({...g,...e,id:u,title:t}),{...g,...e,id:u,dismissible:w,title:t}):g):this.addToast({title:t,...a,dismissible:w,id:u}),u};this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(a=>a({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e);this.message=(e,t)=>this.create({...t,message:e});this.error=(e,t)=>this.create({...t,message:e,type:\"error\"});this.success=(e,t)=>this.create({...t,type:\"success\",message:e});this.info=(e,t)=>this.create({...t,type:\"info\",message:e});this.warning=(e,t)=>this.create({...t,type:\"warning\",message:e});this.loading=(e,t)=>this.create({...t,type:\"loading\",message:e});this.promise=(e,t)=>{if(!t)return;let a;t.loading!==void 0&&(a=this.create({...t,promise:e,type:\"loading\",message:t.loading,description:typeof t.description!=\"function\"?t.description:void 0}));let u=e instanceof Promise?e:e(),f=a!==void 0,w,S=u.then(async i=>{if(w=[\"resolve\",i],re.isValidElement(i))f=!1,this.create({id:a,type:\"default\",message:i});else if(ie(i)&&!i.ok){f=!1;let T=typeof t.error==\"function\"?await t.error(`HTTP error! status: ${i.status}`):t.error,F=typeof t.description==\"function\"?await t.description(`HTTP error! status: ${i.status}`):t.description;this.create({id:a,type:\"error\",message:T,description:F})}else if(t.success!==void 0){f=!1;let T=typeof t.success==\"function\"?await t.success(i):t.success,F=typeof t.description==\"function\"?await t.description(i):t.description;this.create({id:a,type:\"success\",message:T,description:F})}}).catch(async i=>{if(w=[\"reject\",i],t.error!==void 0){f=!1;let D=typeof t.error==\"function\"?await t.error(i):t.error,T=typeof t.description==\"function\"?await t.description(i):t.description;this.create({id:a,type:\"error\",message:D,description:T})}}).finally(()=>{var i;f&&(this.dismiss(a),a=void 0),(i=t.finally)==null||i.call(t)}),g=()=>new Promise((i,D)=>S.then(()=>w[0]===\"reject\"?D(w[1]):i(w[1])).catch(D));return typeof a!=\"string\"&&typeof a!=\"number\"?{unwrap:g}:Object.assign(a,{unwrap:g})};this.custom=(e,t)=>{let a=(t==null?void 0:t.id)||bt++;return this.create({jsx:e(a),id:a,...t}),a};this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id));this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},v=new yt,ne=(n,e)=>{let t=(e==null?void 0:e.id)||bt++;return v.addToast({title:n,...e,id:t}),t},ie=n=>n&&typeof n==\"object\"&&\"ok\"in n&&typeof n.ok==\"boolean\"&&\"status\"in n&&typeof n.status==\"number\",le=ne,ce=()=>v.toasts,de=()=>v.getActiveToasts(),ue=Object.assign(le,{success:v.success,info:v.info,warning:v.warning,error:v.error,custom:v.custom,message:v.message,promise:v.promise,dismiss:v.dismiss,loading:v.loading},{getHistory:ce,getToasts:de});function wt(n,{insertAt:e}={}){if(!n||typeof document==\"undefined\")return;let t=document.head||document.getElementsByTagName(\"head\")[0],a=document.createElement(\"style\");a.type=\"text/css\",e===\"top\"&&t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}wt(`:where(html[dir=\"ltr\"]),:where([data-sonner-toaster][dir=\"ltr\"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir=\"rtl\"]),:where([data-sonner-toaster][dir=\"rtl\"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted=\"true\"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted=\"true\"]){transform:none}}:where([data-sonner-toaster][data-x-position=\"right\"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position=\"left\"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position=\"center\"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position=\"top\"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position=\"bottom\"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled=\"true\"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position=\"top\"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position=\"bottom\"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise=\"true\"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme=\"dark\"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled=\"true\"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping=\"true\"]):before{content:\"\";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position=\"top\"][data-swiping=\"true\"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position=\"bottom\"][data-swiping=\"true\"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping=\"false\"][data-removed=\"true\"]):before{content:\"\";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:\"\";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted=\"true\"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded=\"false\"][data-front=\"false\"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded=\"false\"][data-front=\"false\"][data-styled=\"true\"])>*{opacity:0}:where([data-sonner-toast][data-visible=\"false\"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted=\"true\"][data-expanded=\"true\"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed=\"true\"][data-front=\"true\"][data-swipe-out=\"false\"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed=\"true\"][data-front=\"false\"][data-swipe-out=\"false\"][data-expanded=\"true\"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed=\"true\"][data-front=\"false\"][data-swipe-out=\"false\"][data-expanded=\"false\"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed=\"true\"][data-front=\"false\"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n`);function tt(n){return n.label!==void 0}var pe=3,me=\"32px\",ge=\"16px\",Wt=4e3,he=356,be=14,ye=20,we=200;function M(...n){return n.filter(Boolean).join(\" \")}function xe(n){let[e,t]=n.split(\"-\"),a=[];return e&&a.push(e),t&&a.push(t),a}var ve=n=>{var Dt,Pt,Nt,Bt,Ct,kt,It,Mt,Ht,At,Lt;let{invert:e,toast:t,unstyled:a,interacting:u,setHeights:f,visibleToasts:w,heights:S,index:g,toasts:i,expanded:D,removeToast:T,defaultRichColors:F,closeButton:et,style:ut,cancelButtonStyle:ft,actionButtonStyle:l,className:ot=\"\",descriptionClassName:at=\"\",duration:X,position:st,gap:pt,loadingIcon:rt,expandByDefault:B,classNames:s,icons:P,closeButtonAriaLabel:nt=\"Close toast\",pauseWhenPageIsHidden:it}=n,[Y,C]=o.useState(null),[lt,J]=o.useState(null),[W,H]=o.useState(!1),[A,mt]=o.useState(!1),[L,z]=o.useState(!1),[ct,d]=o.useState(!1),[h,y]=o.useState(!1),[R,j]=o.useState(0),[p,_]=o.useState(0),O=o.useRef(t.duration||X||Wt),G=o.useRef(null),k=o.useRef(null),Vt=g===0,Ut=g+1<=w,N=t.type,V=t.dismissible!==!1,Kt=t.className||\"\",Xt=t.descriptionClassName||\"\",dt=o.useMemo(()=>S.findIndex(r=>r.toastId===t.id)||0,[S,t.id]),Jt=o.useMemo(()=>{var r;return(r=t.closeButton)!=null?r:et},[t.closeButton,et]),Tt=o.useMemo(()=>t.duration||X||Wt,[t.duration,X]),gt=o.useRef(0),U=o.useRef(0),St=o.useRef(0),K=o.useRef(null),[Gt,Qt]=st.split(\"-\"),Rt=o.useMemo(()=>S.reduce((r,m,c)=>c>=dt?r:r+m.height,0),[S,dt]),Et=Ft(),qt=t.invert||e,ht=N===\"loading\";U.current=o.useMemo(()=>dt*pt+Rt,[dt,Rt]),o.useEffect(()=>{O.current=Tt},[Tt]),o.useEffect(()=>{H(!0)},[]),o.useEffect(()=>{let r=k.current;if(r){let m=r.getBoundingClientRect().height;return _(m),f(c=>[{toastId:t.id,height:m,position:t.position},...c]),()=>f(c=>c.filter(b=>b.toastId!==t.id))}},[f,t.id]),o.useLayoutEffect(()=>{if(!W)return;let r=k.current,m=r.style.height;r.style.height=\"auto\";let c=r.getBoundingClientRect().height;r.style.height=m,_(c),f(b=>b.find(x=>x.toastId===t.id)?b.map(x=>x.toastId===t.id?{...x,height:c}:x):[{toastId:t.id,height:c,position:t.position},...b])},[W,t.title,t.description,f,t.id]);let $=o.useCallback(()=>{mt(!0),j(U.current),f(r=>r.filter(m=>m.toastId!==t.id)),setTimeout(()=>{T(t)},we)},[t,T,f,U]);o.useEffect(()=>{if(t.promise&&N===\"loading\"||t.duration===1/0||t.type===\"loading\")return;let r;return D||u||it&&Et?(()=>{if(St.current<gt.current){let b=new Date().getTime()-gt.current;O.current=O.current-b}St.current=new Date().getTime()})():(()=>{O.current!==1/0&&(gt.current=new Date().getTime(),r=setTimeout(()=>{var b;(b=t.onAutoClose)==null||b.call(t,t),$()},O.current))})(),()=>clearTimeout(r)},[D,u,t,N,it,Et,$]),o.useEffect(()=>{t.delete&&$()},[$,t.delete]);function Zt(){var r,m,c;return P!=null&&P.loading?o.createElement(\"div\",{className:M(s==null?void 0:s.loader,(r=t==null?void 0:t.classNames)==null?void 0:r.loader,\"sonner-loader\"),\"data-visible\":N===\"loading\"},P.loading):rt?o.createElement(\"div\",{className:M(s==null?void 0:s.loader,(m=t==null?void 0:t.classNames)==null?void 0:m.loader,\"sonner-loader\"),\"data-visible\":N===\"loading\"},rt):o.createElement(Yt,{className:M(s==null?void 0:s.loader,(c=t==null?void 0:t.classNames)==null?void 0:c.loader),visible:N===\"loading\"})}return o.createElement(\"li\",{tabIndex:0,ref:k,className:M(ot,Kt,s==null?void 0:s.toast,(Dt=t==null?void 0:t.classNames)==null?void 0:Dt.toast,s==null?void 0:s.default,s==null?void 0:s[N],(Pt=t==null?void 0:t.classNames)==null?void 0:Pt[N]),\"data-sonner-toast\":\"\",\"data-rich-colors\":(Nt=t.richColors)!=null?Nt:F,\"data-styled\":!(t.jsx||t.unstyled||a),\"data-mounted\":W,\"data-promise\":!!t.promise,\"data-swiped\":h,\"data-removed\":A,\"data-visible\":Ut,\"data-y-position\":Gt,\"data-x-position\":Qt,\"data-index\":g,\"data-front\":Vt,\"data-swiping\":L,\"data-dismissible\":V,\"data-type\":N,\"data-invert\":qt,\"data-swipe-out\":ct,\"data-swipe-direction\":lt,\"data-expanded\":!!(D||B&&W),style:{\"--index\":g,\"--toasts-before\":g,\"--z-index\":i.length-g,\"--offset\":`${A?R:U.current}px`,\"--initial-height\":B?\"auto\":`${p}px`,...ut,...t.style},onDragEnd:()=>{z(!1),C(null),K.current=null},onPointerDown:r=>{ht||!V||(G.current=new Date,j(U.current),r.target.setPointerCapture(r.pointerId),r.target.tagName!==\"BUTTON\"&&(z(!0),K.current={x:r.clientX,y:r.clientY}))},onPointerUp:()=>{var x,Q,q,Z;if(ct||!V)return;K.current=null;let r=Number(((x=k.current)==null?void 0:x.style.getPropertyValue(\"--swipe-amount-x\").replace(\"px\",\"\"))||0),m=Number(((Q=k.current)==null?void 0:Q.style.getPropertyValue(\"--swipe-amount-y\").replace(\"px\",\"\"))||0),c=new Date().getTime()-((q=G.current)==null?void 0:q.getTime()),b=Y===\"x\"?r:m,I=Math.abs(b)/c;if(Math.abs(b)>=ye||I>.11){j(U.current),(Z=t.onDismiss)==null||Z.call(t,t),J(Y===\"x\"?r>0?\"right\":\"left\":m>0?\"down\":\"up\"),$(),d(!0),y(!1);return}z(!1),C(null)},onPointerMove:r=>{var Q,q,Z,zt;if(!K.current||!V||((Q=window.getSelection())==null?void 0:Q.toString().length)>0)return;let c=r.clientY-K.current.y,b=r.clientX-K.current.x,I=(q=n.swipeDirections)!=null?q:xe(st);!Y&&(Math.abs(b)>1||Math.abs(c)>1)&&C(Math.abs(b)>Math.abs(c)?\"x\":\"y\");let x={x:0,y:0};Y===\"y\"?(I.includes(\"top\")||I.includes(\"bottom\"))&&(I.includes(\"top\")&&c<0||I.includes(\"bottom\")&&c>0)&&(x.y=c):Y===\"x\"&&(I.includes(\"left\")||I.includes(\"right\"))&&(I.includes(\"left\")&&b<0||I.includes(\"right\")&&b>0)&&(x.x=b),(Math.abs(x.x)>0||Math.abs(x.y)>0)&&y(!0),(Z=k.current)==null||Z.style.setProperty(\"--swipe-amount-x\",`${x.x}px`),(zt=k.current)==null||zt.style.setProperty(\"--swipe-amount-y\",`${x.y}px`)}},Jt&&!t.jsx?o.createElement(\"button\",{\"aria-label\":nt,\"data-disabled\":ht,\"data-close-button\":!0,onClick:ht||!V?()=>{}:()=>{var r;$(),(r=t.onDismiss)==null||r.call(t,t)},className:M(s==null?void 0:s.closeButton,(Bt=t==null?void 0:t.classNames)==null?void 0:Bt.closeButton)},(Ct=P==null?void 0:P.close)!=null?Ct:Ot):null,t.jsx||xt(t.title)?t.jsx?t.jsx:typeof t.title==\"function\"?t.title():t.title:o.createElement(o.Fragment,null,N||t.icon||t.promise?o.createElement(\"div\",{\"data-icon\":\"\",className:M(s==null?void 0:s.icon,(kt=t==null?void 0:t.classNames)==null?void 0:kt.icon)},t.promise||t.type===\"loading\"&&!t.icon?t.icon||Zt():null,t.type!==\"loading\"?t.icon||(P==null?void 0:P[N])||jt(N):null):null,o.createElement(\"div\",{\"data-content\":\"\",className:M(s==null?void 0:s.content,(It=t==null?void 0:t.classNames)==null?void 0:It.content)},o.createElement(\"div\",{\"data-title\":\"\",className:M(s==null?void 0:s.title,(Mt=t==null?void 0:t.classNames)==null?void 0:Mt.title)},typeof t.title==\"function\"?t.title():t.title),t.description?o.createElement(\"div\",{\"data-description\":\"\",className:M(at,Xt,s==null?void 0:s.description,(Ht=t==null?void 0:t.classNames)==null?void 0:Ht.description)},typeof t.description==\"function\"?t.description():t.description):null),xt(t.cancel)?t.cancel:t.cancel&&tt(t.cancel)?o.createElement(\"button\",{\"data-button\":!0,\"data-cancel\":!0,style:t.cancelButtonStyle||ft,onClick:r=>{var m,c;tt(t.cancel)&&V&&((c=(m=t.cancel).onClick)==null||c.call(m,r),$())},className:M(s==null?void 0:s.cancelButton,(At=t==null?void 0:t.classNames)==null?void 0:At.cancelButton)},t.cancel.label):null,xt(t.action)?t.action:t.action&&tt(t.action)?o.createElement(\"button\",{\"data-button\":!0,\"data-action\":!0,style:t.actionButtonStyle||l,onClick:r=>{var m,c;tt(t.action)&&((c=(m=t.action).onClick)==null||c.call(m,r),!r.defaultPrevented&&$())},className:M(s==null?void 0:s.actionButton,(Lt=t==null?void 0:t.classNames)==null?void 0:Lt.actionButton)},t.action.label):null))};function _t(){if(typeof window==\"undefined\"||typeof document==\"undefined\")return\"ltr\";let n=document.documentElement.getAttribute(\"dir\");return n===\"auto\"||!n?window.getComputedStyle(document.documentElement).direction:n}function Te(n,e){let t={};return[n,e].forEach((a,u)=>{let f=u===1,w=f?\"--mobile-offset\":\"--offset\",S=f?ge:me;function g(i){[\"top\",\"right\",\"bottom\",\"left\"].forEach(D=>{t[`${w}-${D}`]=typeof i==\"number\"?`${i}px`:i})}typeof a==\"number\"||typeof a==\"string\"?g(a):typeof a==\"object\"?[\"top\",\"right\",\"bottom\",\"left\"].forEach(i=>{a[i]===void 0?t[`${w}-${i}`]=S:t[`${w}-${i}`]=typeof a[i]==\"number\"?`${a[i]}px`:a[i]}):g(S)}),t}function Oe(){let[n,e]=o.useState([]);return o.useEffect(()=>v.subscribe(t=>{if(t.dismiss){setTimeout(()=>{vt.flushSync(()=>{e(a=>a.filter(u=>u.id!==t.id))})});return}setTimeout(()=>{vt.flushSync(()=>{e(a=>{let u=a.findIndex(f=>f.id===t.id);return u!==-1?[...a.slice(0,u),{...a[u],...t},...a.slice(u+1)]:[t,...a]})})})}),[]),{toasts:n}}var $e=fe(function(e,t){let{invert:a,position:u=\"bottom-right\",hotkey:f=[\"altKey\",\"KeyT\"],expand:w,closeButton:S,className:g,offset:i,mobileOffset:D,theme:T=\"light\",richColors:F,duration:et,style:ut,visibleToasts:ft=pe,toastOptions:l,dir:ot=_t(),gap:at=be,loadingIcon:X,icons:st,containerAriaLabel:pt=\"Notifications\",pauseWhenPageIsHidden:rt}=e,[B,s]=o.useState([]),P=o.useMemo(()=>Array.from(new Set([u].concat(B.filter(d=>d.position).map(d=>d.position)))),[B,u]),[nt,it]=o.useState([]),[Y,C]=o.useState(!1),[lt,J]=o.useState(!1),[W,H]=o.useState(T!==\"system\"?T:typeof window!=\"undefined\"&&window.matchMedia&&window.matchMedia(\"(prefers-color-scheme: dark)\").matches?\"dark\":\"light\"),A=o.useRef(null),mt=f.join(\"+\").replace(/Key/g,\"\").replace(/Digit/g,\"\"),L=o.useRef(null),z=o.useRef(!1),ct=o.useCallback(d=>{s(h=>{var y;return(y=h.find(R=>R.id===d.id))!=null&&y.delete||v.dismiss(d.id),h.filter(({id:R})=>R!==d.id)})},[]);return o.useEffect(()=>v.subscribe(d=>{if(d.dismiss){s(h=>h.map(y=>y.id===d.id?{...y,delete:!0}:y));return}setTimeout(()=>{vt.flushSync(()=>{s(h=>{let y=h.findIndex(R=>R.id===d.id);return y!==-1?[...h.slice(0,y),{...h[y],...d},...h.slice(y+1)]:[d,...h]})})})}),[]),o.useEffect(()=>{if(T!==\"system\"){H(T);return}if(T===\"system\"&&(window.matchMedia&&window.matchMedia(\"(prefers-color-scheme: dark)\").matches?H(\"dark\"):H(\"light\")),typeof window==\"undefined\")return;let d=window.matchMedia(\"(prefers-color-scheme: dark)\");try{d.addEventListener(\"change\",({matches:h})=>{H(h?\"dark\":\"light\")})}catch(h){d.addListener(({matches:y})=>{try{H(y?\"dark\":\"light\")}catch(R){console.error(R)}})}},[T]),o.useEffect(()=>{B.length<=1&&C(!1)},[B]),o.useEffect(()=>{let d=h=>{var R,j;f.every(p=>h[p]||h.code===p)&&(C(!0),(R=A.current)==null||R.focus()),h.code===\"Escape\"&&(document.activeElement===A.current||(j=A.current)!=null&&j.contains(document.activeElement))&&C(!1)};return document.addEventListener(\"keydown\",d),()=>document.removeEventListener(\"keydown\",d)},[f]),o.useEffect(()=>{if(A.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,z.current=!1)}},[A.current]),o.createElement(\"section\",{ref:t,\"aria-label\":`${pt} ${mt}`,tabIndex:-1,\"aria-live\":\"polite\",\"aria-relevant\":\"additions text\",\"aria-atomic\":\"false\",suppressHydrationWarning:!0},P.map((d,h)=>{var j;let[y,R]=d.split(\"-\");return B.length?o.createElement(\"ol\",{key:d,dir:ot===\"auto\"?_t():ot,tabIndex:-1,ref:A,className:g,\"data-sonner-toaster\":!0,\"data-theme\":W,\"data-y-position\":y,\"data-lifted\":Y&&B.length>1&&!w,\"data-x-position\":R,style:{\"--front-toast-height\":`${((j=nt[0])==null?void 0:j.height)||0}px`,\"--width\":`${he}px`,\"--gap\":`${at}px`,...ut,...Te(i,D)},onBlur:p=>{z.current&&!p.currentTarget.contains(p.relatedTarget)&&(z.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:p=>{p.target instanceof HTMLElement&&p.target.dataset.dismissible===\"false\"||z.current||(z.current=!0,L.current=p.relatedTarget)},onMouseEnter:()=>C(!0),onMouseMove:()=>C(!0),onMouseLeave:()=>{lt||C(!1)},onDragEnd:()=>C(!1),onPointerDown:p=>{p.target instanceof HTMLElement&&p.target.dataset.dismissible===\"false\"||J(!0)},onPointerUp:()=>J(!1)},B.filter(p=>!p.position&&h===0||p.position===d).map((p,_)=>{var O,G;return o.createElement(ve,{key:p.id,icons:st,index:_,toast:p,defaultRichColors:F,duration:(O=l==null?void 0:l.duration)!=null?O:et,className:l==null?void 0:l.className,descriptionClassName:l==null?void 0:l.descriptionClassName,invert:a,visibleToasts:ft,closeButton:(G=l==null?void 0:l.closeButton)!=null?G:S,interacting:lt,position:d,style:l==null?void 0:l.style,unstyled:l==null?void 0:l.unstyled,classNames:l==null?void 0:l.classNames,cancelButtonStyle:l==null?void 0:l.cancelButtonStyle,actionButtonStyle:l==null?void 0:l.actionButtonStyle,removeToast:ct,toasts:B.filter(k=>k.position==p.position),heights:nt.filter(k=>k.position==p.position),setHeights:it,expandByDefault:w,gap:at,loadingIcon:X,expanded:Y,pauseWhenPageIsHidden:rt,swipeDirections:e.swipeDirections})})):null}))});export{$e as Toaster,ue as toast,Oe as useSonner};\n//# sourceMappingURL=index.mjs.map","import React, { useState, useEffect } from 'react';\nimport { Check, ChevronsUpDown, User } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { Button } from '@/components/ui/button';\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from '@/components/ui/command';\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from '@/components/ui/popover';\nimport { supabase } from '@/integrations/supabase/client';\n\ninterface Profile {\n  id: string;\n  full_name: string;\n  username: string;\n  email?: string;\n}\n\ninterface SearchableProfileFieldProps {\n  value?: string;\n  onSelect: (profile: Profile | null) => void;\n  placeholder?: string;\n  disabled?: boolean;\n}\n\nconst SearchableProfileField: React.FC<SearchableProfileFieldProps> = ({\n  value,\n  onSelect,\n  placeholder = \"Select profile...\",\n  disabled = false\n}) => {\n  const [open, setOpen] = useState(false);\n  const [profiles, setProfiles] = useState<Profile[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n\n  useEffect(() => {\n    fetchProfiles();\n  }, []);\n\n  const fetchProfiles = async () => {\n    try {\n      setLoading(true);\n      const { data, error } = await supabase\n        .from('profiles')\n        .select('id, full_name, username')\n        .not('full_name', 'is', null)\n        .order('full_name');\n\n      if (error) throw error;\n      setProfiles(data || []);\n    } catch (error) {\n      console.error('Error fetching profiles:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filteredProfiles = profiles.filter(profile =>\n    profile.full_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    profile.username?.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const selectedProfile = profiles.find(profile => profile.full_name === value);\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"outline\"\n          role=\"combobox\"\n          aria-expanded={open}\n          className=\"w-full justify-between\"\n          disabled={disabled}\n        >\n          {value ? (\n            <div className=\"flex items-center gap-2\">\n              <User className=\"h-4 w-4\" />\n              {value}\n            </div>\n          ) : (\n            placeholder\n          )}\n          <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-full p-0\">\n        <Command>\n          <CommandInput \n            placeholder=\"Search profiles...\" \n            value={searchTerm}\n            onValueChange={setSearchTerm}\n          />\n          <CommandList>\n            <CommandEmpty>\n              {loading ? \"Loading...\" : \"No profiles found.\"}\n            </CommandEmpty>\n            <CommandGroup>\n              {value && (\n                <CommandItem\n                  value=\"\"\n                  onSelect={() => {\n                    onSelect(null);\n                    setOpen(false);\n                  }}\n                >\n                  <Check\n                    className={cn(\n                      \"mr-2 h-4 w-4\",\n                      !value ? \"opacity-100\" : \"opacity-0\"\n                    )}\n                  />\n                  Clear selection\n                </CommandItem>\n              )}\n              {filteredProfiles.map((profile) => (\n                <CommandItem\n                  key={profile.id}\n                  value={profile.full_name}\n                  onSelect={(currentValue) => {\n                    const selected = profiles.find(p => p.full_name === currentValue);\n                    onSelect(selected || null);\n                    setOpen(false);\n                  }}\n                >\n                  <Check\n                    className={cn(\n                      \"mr-2 h-4 w-4\",\n                      value === profile.full_name ? \"opacity-100\" : \"opacity-0\"\n                    )}\n                  />\n                  <div className=\"flex flex-col\">\n                    <span>{profile.full_name}</span>\n                    {profile.username && (\n                      <span className=\"text-sm text-muted-foreground\">@{profile.username}</span>\n                    )}\n                  </div>\n                </CommandItem>\n              ))}\n            </CommandGroup>\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nexport default SearchableProfileField;","import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Separator } from '@/components/ui/separator';\nimport { Edit, Save, X } from 'lucide-react';\nimport { toast } from 'sonner';\nimport SearchableProfileField from './profile/SearchableProfileField';\nimport type { Database } from '@/integrations/supabase/types';\nimport { useUserRole } from '@/hooks/useUserRole';\nimport { useOrganisationContext } from '../context/OrganisationContext';\n\ntype OrgSigRole = Database['public']['Tables']['org_sig_roles']['Row'];\n\ninterface Profile {\n  id: string;\n  full_name: string;\n  username: string;\n  email?: string;\n}\n\ninterface OrganisationData {\n  id?: string;\n  org_name?: string;\n  org_short_name?: string;\n  acra_uen_number?: string;\n  charity_registration_number?: string;\n  address?: string;\n  telephone?: string;\n  annual_turnover?: string;\n  number_of_employees?: number;\n  number_of_executives?: number;\n  appointed_certification_body?: string;\n}\n\ninterface SignatoryRole {\n  id?: string;\n  role_type: string;\n  signatory_name?: string;\n  signatory_title?: string;\n  signatory_email?: string;\n}\n\ninterface SignatoryData {\n  name_signatory_cem?: string;\n  title_signatory_cem?: string;\n  email_signatory_cem?: string;\n  name_signatory_hib?: string;\n  title_signatory_hib?: string;\n  email_signatory_hib?: string;\n  name_signatory_dpe?: string;\n  title_signatory_dpe?: string;\n  email_signatory_dpe?: string;\n  dpo_name?: string;\n  dpo_email?: string;\n  iso_name?: string;\n  iso_email?: string;\n  head_it_name?: string;\n  head_it_email?: string;\n  it_manager_name?: string;\n  it_manager_email?: string;\n}\n\nconst OrganisationProfile: React.FC = () => {\n  const [isEditing, setIsEditing] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [organisationData, setOrganisationData] = useState<OrganisationData>({});\n  const [signatoryData, setSignatoryData] = useState<SignatoryData>({});\n  const { isSuperAdmin } = useUserRole();\n  const { supabaseClient } = useOrganisationContext();\n  \n  // Phone validation function\n  const validatePhoneInput = (input: string): string => {\n    return input.replace(/[^0-9+\\s\\-()]/g, '');\n  };\n\n  const handleTelephoneChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const validatedValue = validatePhoneInput(e.target.value);\n    setOrganisationData(prev => ({ ...prev, telephone: validatedValue }));\n  };\n  useEffect(() => {\n    fetchOrganisationData();\n  }, [supabaseClient]);\n\n  const fetchOrganisationData = async () => {\n    try {\n      setLoading(true);\n      \n      // Fetch organisation profile data\n      const { data: orgProfile, error: orgError } = await supabaseClient\n        .from('org_profile')\n        .select('*')\n        .maybeSingle();\n\n      if (orgError) {\n        throw orgError;\n      }\n\n      if (orgProfile) {\n        setOrganisationData(orgProfile);\n      }\n\n      // Fetch signatory roles data\n      const { data: sigRoles, error: sigError } = await supabaseClient\n        .from('org_sig_roles')\n        .select('*');\n\n      if (sigError) {\n        throw sigError;\n      }\n\n      if (sigRoles && sigRoles.length > 0) {\n        const sigData: SignatoryData = {};\n        \n        sigRoles.forEach((role: OrgSigRole) => {\n          switch (role.role_type) {\n            case 'cem':\n              sigData.name_signatory_cem = role.signatory_name;\n              sigData.title_signatory_cem = role.signatory_title;\n              sigData.email_signatory_cem = role.signatory_email;\n              break;\n            case 'hib':\n              sigData.name_signatory_hib = role.signatory_name;\n              sigData.title_signatory_hib = role.signatory_title;\n              sigData.email_signatory_hib = role.signatory_email;\n              break;\n            case 'dpe':\n              sigData.name_signatory_dpe = role.signatory_name;\n              sigData.title_signatory_dpe = role.signatory_title;\n              sigData.email_signatory_dpe = role.signatory_email;\n              break;\n            case 'dpo':\n              sigData.dpo_name = role.signatory_name;\n              sigData.dpo_email = role.signatory_email;\n              break;\n            case 'iso':\n              sigData.iso_name = role.signatory_name;\n              sigData.iso_email = role.signatory_email;\n              break;\n            case 'head_it':\n              sigData.head_it_name = role.signatory_name;\n              sigData.head_it_email = role.signatory_email;\n              break;\n            case 'it_manager':\n              sigData.it_manager_name = role.signatory_name;\n              sigData.it_manager_email = role.signatory_email;\n              break;\n          }\n        });\n        \n        setSignatoryData(sigData);\n      }\n\n    } catch (error) {\n      console.error('Error fetching organisation data:', error);\n      toast.error('Failed to load organisation data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSave = async () => {\n    try {\n      setSaving(true);\n      \n      // Save organisation profile data\n      const { error: orgError } = await supabaseClient\n        .from('org_profile')\n        .upsert(organisationData);\n\n      if (orgError) throw orgError;\n\n      // Update signatory roles data\n      const updates = [\n        { role_type: 'cem', signatory_name: signatoryData.name_signatory_cem, signatory_title: signatoryData.title_signatory_cem, signatory_email: signatoryData.email_signatory_cem },\n        { role_type: 'hib', signatory_name: signatoryData.name_signatory_hib, signatory_title: signatoryData.title_signatory_hib, signatory_email: signatoryData.email_signatory_hib },\n        { role_type: 'dpe', signatory_name: signatoryData.name_signatory_dpe, signatory_title: signatoryData.title_signatory_dpe, signatory_email: signatoryData.email_signatory_dpe },\n        { role_type: 'dpo', signatory_name: signatoryData.dpo_name, signatory_title: '', signatory_email: signatoryData.dpo_email },\n        { role_type: 'iso', signatory_name: signatoryData.iso_name, signatory_title: '', signatory_email: signatoryData.iso_email },\n        { role_type: 'head_it', signatory_name: signatoryData.head_it_name, signatory_title: '', signatory_email: signatoryData.head_it_email },\n        { role_type: 'it_manager', signatory_name: signatoryData.it_manager_name, signatory_title: '', signatory_email: signatoryData.it_manager_email }\n      ];\n\n      for (const update of updates) {\n        const { error: sigError } = await supabaseClient\n          .from('org_sig_roles')\n          .upsert(update, { onConflict: 'role_type' });\n\n        if (sigError) throw sigError;\n      }\n\n      toast.success('Organisation profile updated successfully');\n      setIsEditing(false);\n    } catch (error) {\n      console.error('Error saving organisation data:', error);\n      toast.error('Failed to save organisation data');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const fetchUserEmailAndRole = async (userId: string) => {\n    try {\n      // Get email using the database function\n      const { data: emailData, error: emailError } = await supabaseClient\n        .rpc('get_user_email_by_id', { user_id: userId });\n      \n      if (emailError) {\n        console.error('Error fetching user email:', emailError);\n        return { email: '', title: '' };\n      }\n      \n      // Get primary role from user_profile_roles + roles\n      const { data: roleData, error: roleError } = await supabaseClient\n        .from('user_profile_roles')\n        .select(`\n          roles(name)\n        `)\n        .eq('user_id', userId)\n        .eq('is_primary', true)\n        .maybeSingle();\n      \n      if (roleError) {\n        console.error('Error fetching user role:', roleError);\n        return { email: emailData || '', title: '' };\n      }\n      \n      return {\n        email: emailData || '',\n        title: (roleData?.roles as any)?.name || ''\n      };\n      \n    } catch (error) {\n      console.error('Error in fetchUserEmailAndRole:', error);\n      return { email: '', title: '' };\n    }\n  };\n\n  const handleProfileSelect = async (role: string, profile: Profile | null) => {\n    if (!profile) {\n      // Clear the selection\n      switch (role) {\n        case 'cem':\n          setSignatoryData(prev => ({ \n            ...prev, \n            name_signatory_cem: '', \n            title_signatory_cem: '',\n            email_signatory_cem: '' \n          }));\n          break;\n        case 'hib':\n          setSignatoryData(prev => ({ \n            ...prev, \n            name_signatory_hib: '', \n            title_signatory_hib: '',\n            email_signatory_hib: '' \n          }));\n          break;\n        case 'dpe':\n          setSignatoryData(prev => ({ \n            ...prev, \n            name_signatory_dpe: '', \n            title_signatory_dpe: '',\n            email_signatory_dpe: '' \n          }));\n          break;\n        case 'dpo':\n          setSignatoryData(prev => ({ \n            ...prev, \n            dpo_name: '', \n            dpo_email: '' \n          }));\n          break;\n        case 'iso':\n          setSignatoryData(prev => ({ \n            ...prev, \n            iso_name: '', \n            iso_email: '' \n          }));\n          break;\n        case 'head_it':\n          setSignatoryData(prev => ({ \n            ...prev, \n            head_it_name: '', \n            head_it_email: '' \n          }));\n          break;\n        case 'it_manager':\n          setSignatoryData(prev => ({ \n            ...prev, \n            it_manager_name: '', \n            it_manager_email: '' \n          }));\n          break;\n      }\n      return;\n    }\n\n    // Get user's email and primary role\n    const { email, title } = await fetchUserEmailAndRole(profile.id);\n    \n    switch (role) {\n      case 'cem':\n        setSignatoryData(prev => ({ \n          ...prev, \n          name_signatory_cem: profile.full_name, \n          title_signatory_cem: title,\n          email_signatory_cem: email \n        }));\n        break;\n      case 'hib':\n        setSignatoryData(prev => ({ \n          ...prev, \n          name_signatory_hib: profile.full_name, \n          title_signatory_hib: title,\n          email_signatory_hib: email \n        }));\n        break;\n      case 'dpe':\n        setSignatoryData(prev => ({ \n          ...prev, \n          name_signatory_dpe: profile.full_name, \n          title_signatory_dpe: title,\n          email_signatory_dpe: email \n        }));\n        break;\n      case 'dpo':\n        setSignatoryData(prev => ({ \n          ...prev, \n          dpo_name: profile.full_name, \n          dpo_email: email \n        }));\n        break;\n      case 'iso':\n        setSignatoryData(prev => ({ \n          ...prev, \n          iso_name: profile.full_name, \n          iso_email: email \n        }));\n        break;\n      case 'head_it':\n        setSignatoryData(prev => ({ \n          ...prev, \n          head_it_name: profile.full_name, \n          head_it_email: email \n        }));\n        break;\n      case 'it_manager':\n        setSignatoryData(prev => ({ \n          ...prev, \n          it_manager_name: profile.full_name, \n          it_manager_email: email \n        }));\n        break;\n    }\n  };\n\n  const handleCancel = () => {\n    setIsEditing(false);\n    fetchOrganisationData(); // Reset to original data\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6 text-left\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Organisation Profile</h2>\n          <p className=\"text-muted-foreground\">Manage organisation details and signatory information</p>\n        </div>\n        {!isEditing ? (\n          <Button onClick={() => setIsEditing(true)} variant=\"outline\" size=\"icon\">\n            <Edit className=\"h-4 w-4\" />\n          </Button>\n        ) : (\n          <div className=\"flex gap-2\">\n            <Button onClick={handleSave} disabled={saving} size=\"icon\">\n              <Save className=\"h-4 w-4\" />\n            </Button>\n            <Button onClick={handleCancel} variant=\"outline\" disabled={saving} size=\"icon\">\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        )}\n      </div>\n\n      {/* General Organisation Information */}\n      <Card>\n        <CardHeader>\n          <CardTitle>General Information</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4 text-left\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"org-name\">Organisation Name</Label>\n              <Input\n                id=\"org-name\"\n                value={organisationData.org_name || ''}\n                onChange={(e) => setOrganisationData(prev => ({ ...prev, org_name: e.target.value }))}\n                disabled={!isEditing}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"org-name-short\">Organisation Name (Short)</Label>\n              <Input\n                id=\"org-name-short\"\n                value={organisationData.org_short_name || ''}\n                onChange={(e) => setOrganisationData(prev => ({ ...prev, org_short_name: e.target.value }))}\n                disabled={!isEditing || !isSuperAdmin}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"acra-uen\">ACRA Number/Unique Entity Number (UEN)</Label>\n              <Input\n                id=\"acra-uen\"\n                value={organisationData.acra_uen_number || ''}\n                onChange={(e) => setOrganisationData(prev => ({ ...prev, acra_uen_number: e.target.value }))}\n                disabled={!isEditing}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"charity-reg\">Charity Registration Number</Label>\n              <Input\n                id=\"charity-reg\"\n                value={organisationData.charity_registration_number || ''}\n                onChange={(e) => setOrganisationData(prev => ({ ...prev, charity_registration_number: e.target.value }))}\n                disabled={!isEditing}\n              />\n            </div>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"address\">Address</Label>\n            <Textarea\n              id=\"address\"\n              value={organisationData.address || ''}\n              onChange={(e) => setOrganisationData(prev => ({ ...prev, address: e.target.value }))}\n              disabled={!isEditing}\n              rows={3}\n            />\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"telephone\">Telephone</Label>\n              <Input\n                id=\"telephone\"\n                value={organisationData.telephone || ''}\n                onChange={handleTelephoneChange} // Use the new handler\n                disabled={!isEditing}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"annual-turnover\">Annual Turnover</Label>\n              <Input\n                id=\"annual-turnover\"\n                value={organisationData.annual_turnover || ''}\n                onChange={(e) => setOrganisationData(prev => ({ ...prev, annual_turnover: e.target.value }))}\n                disabled={!isEditing}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"num-employees\">Number of Employees</Label>\n              <Input\n                id=\"num-employees\"\n                type=\"number\"\n                value={organisationData.number_of_employees || ''}\n                onChange={(e) => setOrganisationData(prev => ({ ...prev, number_of_employees: parseInt(e.target.value) || 0 }))}\n                disabled={!isEditing}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"num-executives\">Number of Executives</Label>\n              <Input\n                id=\"num-executives\"\n                type=\"number\"\n                value={organisationData.number_of_executives || ''}\n                onChange={(e) => setOrganisationData(prev => ({ ...prev, number_of_executives: parseInt(e.target.value) || 0 }))}\n                disabled={!isEditing}\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"cert-body\">Appointed Certification Body</Label>\n            <Input\n              id=\"cert-body\"\n              value={organisationData.appointed_certification_body || ''}\n              onChange={(e) => setOrganisationData(prev => ({ ...prev, appointed_certification_body: e.target.value }))}\n              disabled={!isEditing}\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Signatory Information */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Signatory Information</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-6 text-left\">\n          {/* CEM Declaration Signatory */}\n          <div className=\"space-y-4\">\n            <h4 className=\"font-semibold text-sm text-muted-foreground uppercase tracking-wide\">CEM Declaration</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"cem-name\">Name of Signatory to CEM Declaration</Label>\n                <SearchableProfileField\n                  value={signatoryData.name_signatory_cem}\n                  onSelect={(profile) => handleProfileSelect('cem', profile)}\n                  placeholder=\"Select CEM signatory...\"\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"cem-title\">Title of Signatory to CEM Declaration</Label>\n                <Input\n                  id=\"cem-title\"\n                  value={signatoryData.title_signatory_cem || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, title_signatory_cem: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"cem-email\">Email of Signatory to CEM Declaration</Label>\n                <Input\n                  id=\"cem-email\"\n                  type=\"email\"\n                  value={signatoryData.email_signatory_cem || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, email_signatory_cem: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n            </div>\n          </div>\n\n          <Separator />\n\n          {/* HIB Pledge Signatory */}\n          <div className=\"space-y-4\">\n            <h4 className=\"font-semibold text-sm text-muted-foreground uppercase tracking-wide\">HIB Pledge</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"hib-name\">Name of Signatory to HIB Pledge</Label>\n                <SearchableProfileField\n                  value={signatoryData.name_signatory_hib}\n                  onSelect={(profile) => handleProfileSelect('hib', profile)}\n                  placeholder=\"Select HIB signatory...\"\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"hib-title\">Title of Signatory to HIB Pledge</Label>\n                <Input\n                  id=\"hib-title\"\n                  value={signatoryData.title_signatory_hib || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, title_signatory_hib: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"hib-email\">Email of Signatory to HIB Pledge</Label>\n                <Input\n                  id=\"hib-email\"\n                  type=\"email\"\n                  value={signatoryData.email_signatory_hib || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, email_signatory_hib: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n            </div>\n          </div>\n\n          <Separator />\n\n          {/* DPE Pledge Signatory */}\n          <div className=\"space-y-4\">\n            <h4 className=\"font-semibold text-sm text-muted-foreground uppercase tracking-wide\">DPE Pledge</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"dpe-name\">Name of Signatory to DPE Pledge</Label>\n                <SearchableProfileField\n                  value={signatoryData.name_signatory_dpe}\n                  onSelect={(profile) => handleProfileSelect('dpe', profile)}\n                  placeholder=\"Select DPE signatory...\"\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"dpe-title\">Title of Signatory to DPE Pledge</Label>\n                <Input\n                  id=\"dpe-title\"\n                  value={signatoryData.title_signatory_dpe || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, title_signatory_dpe: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"dpe-email\">Email of Signatory to DPE Pledge</Label>\n                <Input\n                  id=\"dpe-email\"\n                  type=\"email\"\n                  value={signatoryData.email_signatory_dpe || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, email_signatory_dpe: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n            </div>\n          </div>\n\n          <Separator />\n\n          {/* Other Personnel */}\n          <div className=\"space-y-4\">\n            <h4 className=\"font-semibold text-sm text-muted-foreground uppercase tracking-wide\">Key Personnel</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"dpo-name\">DPO Name</Label>\n                <SearchableProfileField\n                  value={signatoryData.dpo_name}\n                  onSelect={(profile) => handleProfileSelect('dpo', profile)}\n                  placeholder=\"Select DPO...\"\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"dpo-email\">DPO Email</Label>\n                <Input\n                  id=\"dpo-email\"\n                  type=\"email\"\n                  value={signatoryData.dpo_email || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, dpo_email: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"iso-name\">ISO Name</Label>\n                <SearchableProfileField\n                  value={signatoryData.iso_name}\n                  onSelect={(profile) => handleProfileSelect('iso', profile)}\n                  placeholder=\"Select ISO...\"\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"iso-email\">ISO Email</Label>\n                <Input\n                  id=\"iso-email\"\n                  type=\"email\"\n                  value={signatoryData.iso_email || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, iso_email: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"head-it-name\">Head of IT Name</Label>\n                <SearchableProfileField\n                  value={signatoryData.head_it_name}\n                  onSelect={(profile) => handleProfileSelect('head_it', profile)}\n                  placeholder=\"Select Head of IT...\"\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"head-it-email\">Head of IT Email</Label>\n                <Input\n                  id=\"head-it-email\"\n                  type=\"email\"\n                  value={signatoryData.head_it_email || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, head_it_email: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"it-manager-name\">IT Manager Name</Label>\n                <SearchableProfileField\n                  value={signatoryData.it_manager_name}\n                  onSelect={(profile) => handleProfileSelect('it_manager', profile)}\n                  placeholder=\"Select IT Manager...\"\n                  disabled={!isEditing}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"it-manager-email\">IT Manager Email</Label>\n                <Input\n                  id=\"it-manager-email\"\n                  type=\"email\"\n                  value={signatoryData.it_manager_email || ''}\n                  onChange={(e) => setSignatoryData(prev => ({ ...prev, it_manager_email: e.target.value }))}\n                  disabled={!isEditing}\n                />\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default OrganisationProfile;\n","import React, { useState } from 'react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Badge } from '@/components/ui/badge';\nimport { Users, UserCheck, Building2, MapPin, Settings, Award, User } from 'lucide-react';\nimport { useOrganisationContext } from '../context/OrganisationContext';\nimport UserManagement from './admin/UserManagement';\nimport { RoleManagement } from './organisational/RoleManagement';\nimport { DepartmentManagement } from './organisational/DepartmentManagement';\nimport { LocationManagement } from './organisational/LocationManagement';\nimport OrganisationCertificates from './certificates/OrganisationCertificates';\nimport OrganisationProfile from './OrganisationProfile';\n\ninterface OrganisationPanelProps {\n  title?: string;\n  description?: string;\n  showAdminBadge?: boolean;\n  className?: string;\n}\n\nexport const OrganisationPanel: React.FC<OrganisationPanelProps> = ({ \n  title = \"Organisation\",\n  description = \"Manage users, roles, departments, and locations\",\n  showAdminBadge = true,\n  className = \"\"\n}) => {\n  const { isTabEnabled, onNavigate } = useOrganisationContext();\n  const [activeTab, setActiveTab] = useState(() => {\n    // Find the first enabled tab as default\n    const defaultTabs = ['users', 'roles', 'departments', 'locations', 'certificates', 'profile'];\n    return defaultTabs.find(tab => isTabEnabled(tab)) || 'users';\n  });\n\n  const handleTabChange = (value: string) => {\n    setActiveTab(value);\n    onNavigate?.(value);\n  };\n\n  const tabConfig = [\n    { id: 'users', label: 'User Management', icon: Users, component: UserManagement },\n    { id: 'roles', label: 'Roles', icon: UserCheck, component: RoleManagement },\n    { id: 'departments', label: 'Departments', icon: Building2, component: DepartmentManagement },\n    { id: 'locations', label: 'Locations', icon: MapPin, component: LocationManagement },\n    { id: 'certificates', label: 'Certificates', icon: Award, component: OrganisationCertificates },\n    { id: 'profile', label: 'Profile', icon: User, component: OrganisationProfile },\n  ];\n\n  const enabledTabs = tabConfig.filter(tab => isTabEnabled(tab.id));\n\n  return (\n    <div className={`w-full px-4 space-y-6 ${className}`}>\n      <div className=\"flex items-center justify-between\">\n        <div className=\"text-left\">\n          <h1 className=\"text-3xl font-bold\">{title}</h1>\n          <p className=\"text-muted-foreground\">{description}</p>\n        </div>\n        {showAdminBadge && (\n          <Badge variant=\"secondary\" className=\"flex items-center gap-2\">\n            <Settings className=\"h-4 w-4\" />\n            Administrator\n          </Badge>\n        )}\n      </div>\n\n      <Card>\n        <CardContent className=\"p-6\">\n          <Tabs value={activeTab} onValueChange={handleTabChange} className=\"w-full\">\n          <TabsList className=\"grid w-full\" style={{ gridTemplateColumns: `repeat(${enabledTabs.length}, 1fr)` }}>\n              {enabledTabs.map(({ id, label, icon: Icon }) => (\n                <TabsTrigger key={id} value={id} className=\"flex items-center gap-2\">\n                  <Icon className=\"h-4 w-4\" />\n                  {label}\n                </TabsTrigger>\n              ))}\n            </TabsList>\n\n            {enabledTabs.map(({ id, component: Component }) => (\n              <TabsContent key={id} value={id} className=\"space-y-4\">\n                <Component />\n              </TabsContent>\n            ))}\n          </Tabs>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};","import React from 'react';\nimport { OrganisationPanel } from './OrganisationPanel';\nimport { OrganisationProvider } from '../context/OrganisationContext';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useUserRole } from '@/hooks/useUserRole';\n\nexport const OrganisationWrapper: React.FC = () => {\n  const { hasAdminAccess } = useUserRole();\n  \n  const organisationConfig = {\n    supabaseClient: supabase,\n    enabledTabs: ['users', 'roles', 'departments', 'locations', 'certificates', 'profile'],\n    permissions: {\n      canCreateUsers: hasAdminAccess,\n      canEditUsers: hasAdminAccess,\n      canDeleteUsers: hasAdminAccess,\n      canManageRoles: hasAdminAccess,\n      canManageDepartments: hasAdminAccess,\n      canManageLocations: hasAdminAccess,\n      canManageCertificates: hasAdminAccess,\n      canManageProfile: hasAdminAccess,\n    },\n  };\n\n  return (\n    <OrganisationProvider config={organisationConfig}>\n      <OrganisationPanel \n        title=\"Organisation\"\n        description=\"Manage users, roles, departments, and locations\"\n        showAdminBadge={false}\n      />\n    </OrganisationProvider>\n  );\n};\n","\nimport React from \"react\";\nimport { Award, Calendar, Building, FileText } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Profile } from '@/hooks/useProfile';\n\ninterface Certificate {\n  name: string;\n  issuedBy: string;\n  dateAcquired: string;\n  expiryDate: string | null;\n  credentialId?: string;\n}\n\ninterface EditableCertificatesProps {\n  profile: Profile & {\n    certificates: Certificate[];\n  };\n  onUpdate?: (certificateId: string, updates: any) => void;\n  onDataChange?: () => void;\n}\n\nconst EditableCertificates: React.FC<EditableCertificatesProps> = ({ profile }) => {\n  const { certificates } = profile;\n\n  const formatDate = (dateString: string | null) => {\n    if (!dateString) return \"No expiry\";\n    return new Date(dateString).toLocaleDateString();\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'Valid': return 'bg-green-500';\n      case 'Expired': return 'bg-red-500';\n      case 'Pending': return 'bg-yellow-500';\n      default: return 'bg-blue-500';\n    }\n  };\n\n  const getTypeIcon = (type?: string) => {\n    return type === 'Document' ? <FileText className=\"h-5 w-5 text-primary flex-shrink-0\" /> : <Award className=\"h-5 w-5 text-primary flex-shrink-0\" />;\n  };\n\n  const getTypeColor = (type?: string) => {\n    return type === 'Document' ? 'bg-blue-500' : 'bg-purple-500';\n  };\n\n  // Determine validity based on expiry date\n  const getValidityStatus = (expiryDate: string | null) => {\n    if (!expiryDate) return 'Valid'; // No expiry means always valid\n    \n    const expiry = new Date(expiryDate);\n    const today = new Date();\n    today.setHours(0, 0, 0, 0); // Reset time to compare dates only\n    \n    if (expiry < today) {\n      return 'Expired';\n    } else if (expiry <= new Date(today.getTime() + 30 * 24 * 60 * 60 * 1000)) {\n      // Expires within 30 days\n      return 'Expiring Soon';\n    } else {\n      return 'Valid';\n    }\n  };\n\n  const getValidityStatusColor = (status: string) => {\n    switch (status) {\n      case 'Valid': return 'bg-green-500';\n      case 'Expired': return 'bg-red-500';\n      case 'Expiring Soon': return 'bg-yellow-500';\n      default: return 'bg-blue-500';\n    }\n  };\n\n  // Filter certificates to only show those where org_cert is false\n  const filteredCertificates = certificates.filter(cert => \n    (cert as any).org_cert === false\n  );\n\n  return (\n    <div className=\"space-y-4 animate-fade-in\">\n      {filteredCertificates.length === 0 ? (\n        <p className=\"text-muted-foreground text-center py-8\">No certificates yet</p>\n      ) : (\n        <div className=\"space-y-4\">\n          {filteredCertificates.map((cert, index) => {\n            const validityStatus = getValidityStatus(cert.expiryDate);\n            \n            return (\n              <div key={index} className=\"border rounded-lg p-4\">\n                {/* Top line with name and type badge */}\n                <div className=\"flex items-center justify-between mb-3\">\n                  <div className=\"flex items-center gap-3 min-w-0 flex-1\">\n                    {getTypeIcon((cert as any).type)}\n                    <h3 className=\"font-semibold text-lg truncate\">{cert.name}</h3>\n                  </div>\n                  \n                  <div className=\"flex items-center flex-shrink-0\">\n                    <Badge className={`${getTypeColor((cert as any).type)} text-white text-sm px-2 py-1`}>\n                      {(cert as any).type || 'Certificate'}\n                    </Badge>\n                  </div>\n                </div>\n                \n                {/* Bottom section with aligned information */}\n                <div className=\"grid grid-cols-4 gap-4 text-sm ml-8\">\n                  <div className=\"flex items-center gap-2\">\n                    <Building className=\"h-4 w-4 text-muted-foreground\" />\n                    <span className=\"font-medium text-foreground\">{cert.issuedBy}</span>\n                  </div>\n                  \n                  <div className=\"flex items-center gap-2\">\n                    <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                    <span className=\"text-muted-foreground\">Issued:</span>\n                    <span className=\"font-medium\">{formatDate(cert.dateAcquired)}</span>\n                  </div>\n                  \n                  <div className=\"flex items-center gap-2\">\n                    <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                    <span className=\"text-muted-foreground\">Expires:</span>\n                    <span className=\"font-medium\">{formatDate(cert.expiryDate)}</span>\n                  </div>\n                  \n                  <div className=\"flex items-center justify-end\">\n                    <Badge className={`${getValidityStatusColor(validityStatus)} text-white`}>\n                      {validityStatus}\n                    </Badge>\n                  </div>\n                </div>\n                \n                {/* ID information on separate line if present */}\n                {cert.credentialId && (\n                  <div className=\"text-sm ml-8 mt-2\">\n                    <span className=\"text-muted-foreground\">ID: </span>\n                    <span className=\"font-medium\">{cert.credentialId}</span>\n                  </div>\n                )}\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default EditableCertificates;\n","\nimport React, { useState } from 'react';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useUserProfiles } from '@/hooks/useUserProfiles';\nimport { useQuery } from '@tanstack/react-query';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { toast } from '@/components/ui/use-toast';\nimport { Loader2, X, Plus } from 'lucide-react';\n\ninterface AssignPhysicalLocationDialogProps {\n  isOpen: boolean;\n  onOpenChange: (open: boolean) => void;\n  prefilledUser?: {\n    user_id?: string;\n    full_name: string;\n    email: string;\n    department: string;\n    role: string;\n  };\n  onSuccess?: () => void;\n}\n\nconst AssignPhysicalLocationDialog: React.FC<AssignPhysicalLocationDialogProps> = ({\n  isOpen,\n  onOpenChange,\n  prefilledUser,\n  onSuccess,\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [selectedUserId, setSelectedUserId] = useState('');\n  const { profiles } = useUserProfiles();\n  \n  // Fetch locations for dropdown\n  const { data: locations } = useQuery({\n    queryKey: ['locations'],\n    queryFn: async () => {\n      const { data } = await supabase\n        .from('locations')\n        .select('id, name')\n        .eq('status', 'Active')\n        .order('name');\n      return data || [];\n    },\n  });\n  \n  const [formData, setFormData] = useState({\n    full_name: prefilledUser?.full_name || '',\n    email: prefilledUser?.email || '',\n    department: prefilledUser?.department || '',\n    role_account_type: prefilledUser?.role || '',\n    location: '',\n    access_purpose: '',\n    status: 'Active',\n  });\n\n  const handleUserSelection = (userId: string) => {\n    setSelectedUserId(userId);\n    if (userId === 'none') {\n      // Clear user data when \"Create without user\" is selected\n      setFormData(prev => ({\n        ...prev,\n        full_name: '',\n        email: '',\n        department: '',\n        role_account_type: '',\n      }));\n    } else {\n      const selectedUser = profiles.find(profile => profile.id === userId);\n      if (selectedUser) {\n        setFormData(prev => ({\n          ...prev,\n          full_name: selectedUser.full_name || '',\n          email: selectedUser.email || '',\n          department: selectedUser.department || '',\n          role_account_type: selectedUser.role || '',\n        }));\n      }\n    }\n  };\n\n  const resetForm = () => {\n    setSelectedUserId('');\n    setFormData({\n      full_name: prefilledUser?.full_name || '',\n      email: prefilledUser?.email || '',\n      department: prefilledUser?.department || '',\n      role_account_type: prefilledUser?.role || '',\n      location: '',\n      access_purpose: '',\n      status: 'Active',\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    \n    try {\n      // Only insert if we have at least a location and access purpose\n      if (!formData.location || !formData.access_purpose) {\n        throw new Error('Location and Access Purpose are required');\n      }\n\n      // Determine the user_id to use\n      const userId = prefilledUser?.user_id || selectedUserId;\n      \n      // If we have a user_id, update the profiles table with location and location_id\n      if (userId && userId !== 'none') {\n        // Get the location name from the location_id\n        const { data: locationData, error: locationError } = await supabase\n          .from('locations')\n          .select('id, name')\n          .eq('id', formData.location)\n          .single();\n\n        if (locationError) {\n          throw new Error(`Failed to fetch location: ${locationError.message}`);\n        }\n\n        if (locationData) {\n          // Update the profiles table with location name and location_id\n          const { error: profileUpdateError } = await supabase\n            .from('profiles')\n            .update({ \n              location: locationData.name, \n              location_id: formData.location \n            })\n            .eq('id', userId);\n\n          if (profileUpdateError) {\n            throw new Error(`Failed to update profile: ${profileUpdateError.message}`);\n          }\n        }\n      }\n\n      const insertData = {\n        full_name: formData.full_name || 'Unassigned',\n        user_id: userId, // Use userId\n        location_id: formData.location, // Assuming this is already a UUID\n        access_purpose: formData.access_purpose,\n        date_access_created: new Date().toISOString().split('T')[0],\n        date_access_revoked: null,\n        status: formData.status,\n      };\n\n      const { error } = await supabase\n        .from('physical_location_access')\n        .insert([insertData]);\n\n      if (error) throw error;\n\n      toast({\n        title: \"Physical location access added\",\n        description: formData.full_name === 'Unassigned' \n          ? \"Location access record created without user assignment.\"\n          : \"Physical location access has been successfully added.\",\n      });\n      \n      onOpenChange(false);\n      resetForm();\n      onSuccess?.();\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Add Physical Location Access</DialogTitle>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            {!prefilledUser && (\n              <div className=\"col-span-2\">\n                <Label htmlFor=\"user_select\">Assign to User (Optional)</Label>\n                <Select value={selectedUserId} onValueChange={handleUserSelection}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select a user or create without assignment\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"none\">Create without user assignment</SelectItem>\n                    {profiles.map((profile) => (\n                      <SelectItem key={profile.id} value={profile.id}>\n                        {profile.full_name || 'No name'} ({profile.email || profile.username || 'No email'})\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            )}\n\n            {(selectedUserId && selectedUserId !== 'none') && (\n              <div className=\"col-span-2 p-3 bg-gray-50 rounded-lg\">\n                <h4 className=\"font-medium mb-2\">Selected User Details:</h4>\n                <p><strong>Name:</strong> {formData.full_name}</p>\n                <p><strong>Email:</strong> {formData.email}</p>\n              </div>\n            )}\n\n            <div>\n              <Label htmlFor=\"full_name\">Full Name</Label>\n              <Input\n                id=\"full_name\"\n                value={formData.full_name}\n                onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}\n                placeholder=\"Leave empty for unassigned\"\n                disabled={!!prefilledUser || (selectedUserId && selectedUserId !== 'none')}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"email\">Email</Label>\n              <Input\n                id=\"email\"\n                value={formData.email}\n                onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                placeholder=\"Leave empty for unassigned\"\n                disabled={!!prefilledUser || (selectedUserId && selectedUserId !== 'none')}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"location\">Location *</Label>\n              <Select \n                value={formData.location} \n                onValueChange={(value) => setFormData({ ...formData, location: value })}\n                required\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select a location\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {locations?.map((location) => (\n                    <SelectItem key={location.id} value={location.id}>\n                      {location.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            <div>\n              <Label htmlFor=\"access_purpose\">Access Purpose *</Label>\n              <Input\n                id=\"access_purpose\"\n                value={formData.access_purpose}\n                onChange={(e) => setFormData({ ...formData, access_purpose: e.target.value })}\n                placeholder=\"e.g., Maintenance, Security, Operations\"\n                required\n              />\n            </div>\n            <div className=\"col-span-2\">\n              <Label htmlFor=\"status\">Status</Label>\n              <Select value={formData.status} onValueChange={(value) => setFormData({ ...formData, status: value })}>\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"Active\">Active</SelectItem>\n                  <SelectItem value=\"Inactive\">Inactive</SelectItem>\n                  <SelectItem value=\"Revoked\">Revoked</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div className=\"flex gap-2 justify-end\">\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)} size=\"icon\">\n              <X className=\"h-4 w-4\" />\n            </Button>\n            <Button type=\"submit\" disabled={loading} size=\"icon\">\n              {loading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Plus className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AssignPhysicalLocationDialog;\n","\nimport React, { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Button } from '@/components/ui/button';\nimport { EditableTable } from '@/components/ui/editable-table';\nimport { Plus } from 'lucide-react';\nimport { toast } from '@/hooks/use-toast';\nimport AssignPhysicalLocationDialog from '../admin/AssignPhysicalLocationDialog';\n\ninterface PhysicalLocationTabProps {\n  profile: any;\n}\n\ninterface PhysicalLocationAccess {\n  id: string;\n  location: string; // Keep for backward compatibility during migration\n  location_id?: string; // New foreign key field\n  access_purpose: string;\n  date_access_created: string;\n  date_access_revoked: string | null;\n  status: string;\n  locations?: {\n    id: string;\n    name: string;\n  };\n}\n\nconst PhysicalLocationTab: React.FC<PhysicalLocationTabProps> = ({ profile }) => {\n  const [isAssignDialogOpen, setIsAssignDialogOpen] = useState(false);\n\n  const { data: locationAccess = [], refetch } = useQuery({\n    queryKey: ['user-physical-location-access', profile.email],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('physical_location_access')\n        .select(`\n          id,\n          access_purpose, \n          status, \n          date_access_created, \n          date_access_revoked,\n          location_id,\n          locations!inner(name)\n        `)\n        .eq('user_id', profile.id)\n        .order('created_at', { ascending: false });\n      \n      if (error) throw error;\n      \n      // Transform the data to map locations.name to location for the table\n      const transformedData = data?.map((item, index) => ({\n        ...item,\n        location: item.locations?.name || 'Unknown Location',\n        // Ensure we have a unique key for React\n        uniqueKey: item.id || `temp-${index}-${Date.now()}`\n      })) || [];\n      \n      return transformedData;\n    },\n  });\n\n  const columns = [\n    {\n      key: 'location',\n      header: 'Location',\n      type: 'text' as const,\n      editable: false, // Not editable as requested\n      required: true,\n      sortable: true,\n    },\n    {\n      key: 'access_purpose',\n      header: 'Access Purpose',\n      type: 'text' as const,\n      editable: false, // Not editable as requested\n      required: true,\n      sortable: true,\n    },\n    {\n      key: 'date_access_created',\n      header: 'Date Created',\n      type: 'date' as const,\n      editable: false, // Not editable as requested\n      required: true,\n      sortable: true,\n    },\n    {\n      key: 'date_access_revoked',\n      header: 'Date Revoked',\n      type: 'date' as const,\n      editable: true, // Only this field is editable as requested\n      sortable: true,\n    },\n    {\n      key: 'status',\n      header: 'Status',\n      type: 'select' as const,\n      options: ['Active', 'Inactive', 'Revoked'],\n      editable: false, // Not editable as requested\n      sortable: true,\n    },\n  ];\n\n  const handleUpdate = async (id: string, updates: Partial<PhysicalLocationAccess>) => {\n    try {\n      const { error } = await supabase\n        .from('physical_location_access')\n        .update(updates)\n        .eq('id', id);\n\n      if (error) throw error;\n\n      toast({\n        title: \"Access updated\",\n        description: \"Physical location access has been successfully updated\",\n      });\n\n      refetch();\n      return { success: true };\n    } catch (error: any) {\n      console.error('Error updating physical location access:', error);\n      toast({\n        title: \"Update failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n      return { success: false, error: error.message };\n    }\n  };\n\n  const handleDelete = async (id: string) => {\n    try {\n      // First, get the location_id from the physical_location_access record\n      const { data: accessRecord, error: fetchError } = await supabase\n        .from('physical_location_access')\n        .select('location_id')\n        .eq('id', id)\n        .single();\n\n      if (fetchError) throw fetchError;\n\n      // If this location_id matches the user's primary location_id in profiles,\n      // update the profiles table to set location and location_id to null\n      if (accessRecord?.location_id) {\n        const { data: userProfile } = await supabase\n          .from('profiles')\n          .select('location_id')\n          .eq('id', profile.id)\n          .single();\n\n        // If the location being deleted is the user's primary location, clear it\n        if (userProfile?.location_id === accessRecord.location_id) {\n          const { error: profileUpdateError } = await supabase\n            .from('profiles')\n            .update({ location: null, location_id: null })\n            .eq('id', profile.id);\n\n          if (profileUpdateError) {\n            throw new Error(`Failed to update profile: ${profileUpdateError.message}`);\n          }\n        }\n      }\n\n      // Then delete from physical_location_access\n      const { error } = await supabase\n        .from('physical_location_access')\n        .delete()\n        .eq('id', id);\n\n      if (error) throw error;\n\n      toast({\n        title: \"Access removed\",\n        description: \"Physical location access has been successfully removed\",\n      });\n\n      refetch();\n      return { success: true };\n    } catch (error: any) {\n      toast({\n        title: \"Delete failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n      return { success: false, error: error.message };\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex justify-between items-center\">\n        <p className=\"text-sm text-muted-foreground\">\n          Manage physical location access for {profile.firstName} {profile.lastName}\n        </p>\n        <Button \n          onClick={() => setIsAssignDialogOpen(true)}\n          size=\"icon\"\n        >\n          <Plus className=\"h-4 w-4\" />\n        </Button>\n      </div>\n\n      <EditableTable\n        data={locationAccess}\n        columns={columns}\n        onUpdate={handleUpdate}\n        onDelete={handleDelete}\n        allowAdd={false}\n        allowDelete={true}\n      />\n\n      <AssignPhysicalLocationDialog\n        isOpen={isAssignDialogOpen}\n        onOpenChange={setIsAssignDialogOpen}\n        prefilledUser={{\n          user_id: profile.id,\n          full_name: profile.firstName + ' ' + profile.lastName,\n          email: profile.email,\n          department: profile.department,\n          role: profile.role,\n        }}\n        onSuccess={() => {\n          refetch();\n          setIsAssignDialogOpen(false);\n        }}\n      />\n    </div>\n  );\n};\n\nexport default PhysicalLocationTab;\n","\nimport React, { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useInventory } from '@/hooks/useInventory';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { toast } from '@/hooks/use-toast';\nimport { Loader2 } from 'lucide-react';\n\ninterface AssignHardwareDialogProps {\n  isOpen: boolean;\n  onOpenChange: (open: boolean) => void;\n  userId: string;\n  onSuccess?: () => void;\n}\n\nconst AssignHardwareDialog: React.FC<AssignHardwareDialogProps> = ({\n  isOpen,\n  onOpenChange,\n  userId,\n  onSuccess,\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [selectedHardwareId, setSelectedHardwareId] = useState('');\n  const { hardwareInventory, refetch } = useInventory();\n\n  // Get unassigned hardware items - check user_id IS NULL (primary) or status/asset_owner (fallback for legacy)\n  const unassignedHardware = hardwareInventory.filter(item => {\n    const hasNoUserId = !item.user_id;\n    const isUnassigned = item.status === 'Unassigned';\n    const hasNoAssignedUser = !item.asset_owner || \n      item.asset_owner.trim() === '' || \n      item.asset_owner === 'no-owner' || \n      item.asset_owner === 'Unassigned';\n    return hasNoUserId && (isUnassigned || hasNoAssignedUser);\n  });\n\n  const selectedHardwareItem = selectedHardwareId ? \n    hardwareInventory.find(item => item.id === selectedHardwareId) : \n    null;\n\n  const { data: userProfile } = useQuery({\n    queryKey: ['user-profile-by-id', userId],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('profiles')\n        .select('full_name, username')\n        .eq('id', userId)\n        .single();\n      \n      if (error) throw error;\n      return data;\n    },\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!selectedHardwareItem || !userProfile) {\n      toast({\n        title: \"Error\",\n        description: \"Please select a hardware item to assign.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setLoading(true);\n    \n    try {\n      const userName = userProfile.full_name || userProfile.username || 'Assigned User';\n      \n      // Update the hardware inventory item to assign it to the user\n      // Set user_id (UUID foreign key) and keep asset_owner (name) for backward compatibility\n      const { error: inventoryError } = await supabase\n        .from('hardware_inventory')\n        .update({ \n          user_id: userId,\n          asset_owner: userName,\n          status: 'Assigned'\n        })\n        .eq('id', selectedHardwareId);\n\n      if (inventoryError) throw inventoryError;\n\n      toast({\n        title: \"Hardware assigned\",\n        description: `${selectedHardwareItem.device_name} has been successfully assigned to ${userName}`,\n      });\n      \n      // Refresh the inventory data\n      await refetch();\n      \n      onOpenChange(false);\n      setSelectedHardwareId('');\n      onSuccess?.();\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Assign Hardware to User</DialogTitle>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"hardware\">Select Hardware</Label>\n            <Select \n              value={selectedHardwareId} \n              onValueChange={setSelectedHardwareId}\n              disabled={unassignedHardware.length === 0}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder={unassignedHardware.length === 0 ? \"No unassigned hardware available\" : \"Select unassigned hardware\"} />\n              </SelectTrigger>\n              <SelectContent>\n                {unassignedHardware.map((item) => (\n                  <SelectItem key={item.id} value={item.id}>\n                    {item.device_name} - {item.asset_type} (S/N: {item.serial_number})\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {selectedHardwareItem && (\n            <div className=\"p-3 bg-blue-50 rounded-lg border border-blue-200\">\n              <h4 className=\"font-medium mb-2 text-blue-900\">Assignment Details:</h4>\n              <p className=\"text-sm text-blue-700\"><strong>Device:</strong> {selectedHardwareItem.device_name}</p>\n              <p className=\"text-sm text-blue-700\"><strong>Type:</strong> {selectedHardwareItem.asset_type}</p>\n              <p className=\"text-sm text-blue-700\"><strong>Serial Number:</strong> {selectedHardwareItem.serial_number}</p>\n              <p className=\"text-sm text-blue-700\"><strong>Location:</strong> {selectedHardwareItem.asset_location || 'Not specified'}</p>\n            </div>\n          )}\n\n          <div className=\"flex gap-2 justify-end\">\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={loading || !selectedHardwareId}>\n              {loading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : \"Assign Hardware\"}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AssignHardwareDialog;\n","\nimport React, { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useInventory } from '@/hooks/useInventory';\nimport { useUserAssets } from '@/hooks/useUserAssets';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { toast } from '@/hooks/use-toast';\nimport { Loader2 } from 'lucide-react';\n\ninterface AssignSoftwareDialogProps {\n  isOpen: boolean;\n  onOpenChange: (open: boolean) => void;\n  userId: string;\n  onSuccess?: () => void;\n}\n\nconst AssignSoftwareDialog: React.FC<AssignSoftwareDialogProps> = ({\n  isOpen,\n  onOpenChange,\n  userId,\n  onSuccess,\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [selectedSoftwareId, setSelectedSoftwareId] = useState('');\n  const [roleAccountType, setRoleAccountType] = useState('');\n  \n  const { softwareInventory } = useInventory();\n  const { addSoftware } = useUserAssets();\n\n  // Get active software items\n  const availableSoftware = softwareInventory.filter(item => \n    item.status === 'Active'\n  );\n\n  const selectedSoftwareItem = softwareInventory.find(item => item.id === selectedSoftwareId);\n\n  // Query to get user profile by user ID with better error handling\n  const { data: userProfile, isLoading: profileLoading, error: profileError } = useQuery({\n    queryKey: ['user-profile-by-id', userId],\n    queryFn: async () => {\n      console.log('Querying profile for userId:', userId);\n      \n      const { data, error } = await supabase\n        .from('profiles')\n        .select('id, full_name, username')\n        .eq('id', userId)\n        .single();\n      \n      console.log('Profile query result:', { data, error });\n      \n      if (error) {\n        console.error('Error fetching user profile:', error);\n        throw error;\n      }\n      return data;\n    },\n    enabled: !!userId && isOpen,\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!selectedSoftwareId || !roleAccountType) {\n      toast({\n        title: \"Error\",\n        description: \"Please fill in all required fields.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (!selectedSoftwareItem) {\n      toast({\n        title: \"Error\",\n        description: \"Selected software item not found.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (!userProfile?.id) {\n      toast({\n        title: \"Error\",\n        description: `User profile not found or missing ID. UserId: ${userId}, Profile: ${JSON.stringify(userProfile)}`,\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setLoading(true);\n    \n    try {\n      const softwareData = {\n        user_id: userProfile.id,\n        full_name: userProfile.full_name,\n        username_email: userProfile.username || '',\n        software: selectedSoftwareItem.software_name,\n        role_account_type: roleAccountType,\n        status: 'Active',\n      };\n      \n      await addSoftware(softwareData);\n      \n      toast({\n        title: \"Software assigned\",\n        description: \"Software license has been successfully assigned to the user.\",\n      });\n      \n      onOpenChange(false);\n      setSelectedSoftwareId('');\n      setRoleAccountType('');\n      onSuccess?.();\n    } catch (error: any) {\n      console.error('Error assigning software:', error);\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (profileLoading) {\n    return (\n      <Dialog open={isOpen} onOpenChange={onOpenChange}>\n        <DialogContent>\n          <div className=\"flex items-center justify-center p-6\">\n            <Loader2 className=\"h-6 w-6 animate-spin\" />\n            <span className=\"ml-2\">Loading user profile...</span>\n          </div>\n        </DialogContent>\n      </Dialog>\n    );\n  }\n\n  if (profileError) {\n    return (\n      <Dialog open={isOpen} onOpenChange={onOpenChange}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Error Loading User Profile</DialogTitle>\n          </DialogHeader>\n          <div className=\"p-4\">\n            <p className=\"text-red-600\">\n              Failed to load user profile: {profileError.message}\n            </p>\n            <p className=\"text-sm text-gray-600 mt-2\">\n              User ID: {userId}\n            </p>\n            <Button onClick={() => onOpenChange(false)} className=\"mt-4\">\n              Close\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n    );\n  }\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>\n            Assign Software License to {userProfile?.full_name || 'User'}\n          </DialogTitle>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"software\">Select Software</Label>\n            <Select \n              value={selectedSoftwareId} \n              onValueChange={setSelectedSoftwareId}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select software from inventory\" />\n              </SelectTrigger>\n              <SelectContent>\n                {availableSoftware.length === 0 ? (\n                  <SelectItem value=\"\" disabled>No software available in inventory</SelectItem>\n                ) : (\n                  availableSoftware.map((item) => (\n                    <SelectItem key={item.id} value={item.id}>\n                      {item.software_name} {item.software_version ? `v${item.software_version}` : ''}\n                      {item.software_publisher ? ` by ${item.software_publisher}` : ''}\n                    </SelectItem>\n                  ))\n                )}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {selectedSoftwareItem && (\n            <div className=\"p-3 bg-gray-50 rounded-lg\">\n              <h4 className=\"font-medium mb-2\">Selected Software Details:</h4>\n              <p><strong>Name:</strong> {selectedSoftwareItem.software_name}</p>\n              <p><strong>Publisher:</strong> {selectedSoftwareItem.software_publisher || 'Not specified'}</p>\n              <p><strong>Version:</strong> {selectedSoftwareItem.software_version || 'Not specified'}</p>\n              <p><strong>Department:</strong> {selectedSoftwareItem.department || 'Not specified'}</p>\n            </div>\n          )}\n\n          <div>\n            <Label htmlFor=\"role_account_type\">Access Level</Label>\n            <Select value={roleAccountType} onValueChange={setRoleAccountType}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select access level\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"Admin\">Admin</SelectItem>\n                <SelectItem value=\"User\">User</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"flex gap-2 justify-end\">\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={loading || !selectedSoftwareId || !roleAccountType}>\n              {loading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : \"Assign Software\"}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AssignSoftwareDialog;\n","\nimport React, { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useUserAssets } from '@/hooks/useUserAssets';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { toast } from '@/hooks/use-toast';\nimport { Loader2, X, Plus } from 'lucide-react';\n\ninterface AddEducationDialogProps {\n  isOpen: boolean;\n  onOpenChange: (open: boolean) => void;\n  userId: string;\n  onSuccess?: () => void;\n}\n\nconst AddEducationDialog: React.FC<AddEducationDialogProps> = ({\n  isOpen,\n  onOpenChange,\n  userId,\n  onSuccess,\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    type: 'Certificate',\n    name: '',\n    issued_by: '',\n    date_acquired: '',\n    expiry_date: '',\n    credential_id: '',\n    status: 'Valid',\n  });\n\n  const { addCertificate } = useUserAssets();\n\n  // Fix: Look up user profile by ID, only select id since email doesn't exist\n  const { data: userProfile } = useQuery({\n    queryKey: ['user-profile', userId],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('profiles')\n        .select('id')\n        .eq('id', userId)\n        .single();\n      \n      if (error) throw error;\n      return data;\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      type: 'Certificate',\n      name: '',\n      issued_by: '',\n      date_acquired: '',\n      expiry_date: '',\n      credential_id: '',\n      status: 'Valid',\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!userProfile) {\n      toast({\n        title: \"Error\",\n        description: \"User profile not found.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setLoading(true);\n    \n    try {\n      const certificateData = {\n        user_id: userProfile.id,\n        type: formData.type,\n        name: formData.name,\n        issued_by: formData.issued_by,\n        date_acquired: formData.date_acquired,\n        expiry_date: formData.expiry_date || null,\n        credential_id: formData.credential_id || null,\n        status: formData.status,\n      };\n      \n      await addCertificate(certificateData);\n      \n      toast({\n        title: \"Education record added\",\n        description: \"Education record has been successfully added.\",\n      });\n      \n      onOpenChange(false);\n      resetForm();\n      onSuccess?.();\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Add Certificate</DialogTitle>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"type\">Type *</Label>\n            <Select value={formData.type} onValueChange={(value) => setFormData({ ...formData, type: value })}>\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"Certificate\">Certificate</SelectItem>\n                <SelectItem value=\"Document\">Document</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div>\n            <Label htmlFor=\"name\">Name *</Label>\n            <Input\n              id=\"name\"\n              value={formData.name}\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n              placeholder=\"e.g., Cybersecurity Certificate, PDPC e-Learning, ISP, IRP\"\n              required\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"issued_by\">Issued By *</Label>\n            <Input\n              id=\"issued_by\"\n              value={formData.issued_by}\n              onChange={(e) => setFormData({ ...formData, issued_by: e.target.value })}\n              placeholder=\"e.g., RAYN, PDPC,\"\n              required\n            />\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"date_acquired\">Date Acquired *</Label>\n              <Input\n                id=\"date_acquired\"\n                type=\"date\"\n                value={formData.date_acquired}\n                onChange={(e) => setFormData({ ...formData, date_acquired: e.target.value })}\n                required\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"expiry_date\">Expiry Date</Label>\n              <Input\n                id=\"expiry_date\"\n                type=\"date\"\n                value={formData.expiry_date}\n                onChange={(e) => setFormData({ ...formData, expiry_date: e.target.value })}\n              />\n            </div>\n          </div>\n\n          <div>\n            <Label htmlFor=\"credential_id\">Credential ID</Label>\n            <Input\n              id=\"credential_id\"\n              value={formData.credential_id}\n              onChange={(e) => setFormData({ ...formData, credential_id: e.target.value })}\n              placeholder=\"Certificate or credential identifier\"\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"status\">Status</Label>\n            <Select value={formData.status} onValueChange={(value) => setFormData({ ...formData, status: value })}>\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"Valid\">Valid</SelectItem>\n                <SelectItem value=\"Expired\">Expired</SelectItem>\n                <SelectItem value=\"Pending\">Pending</SelectItem>\n                <SelectItem value=\"Revoked\">Revoked</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"flex gap-2 justify-end\">\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)} size=\"icon\">\n              <X className=\"h-4 w-4\" />\n            </Button>\n            <Button type=\"submit\" disabled={loading || !formData.name || !formData.issued_by || !formData.date_acquired} size=\"icon\">\n              {loading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Plus className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AddEducationDialog;\n","import React, { useState, forwardRef, useImperativeHandle } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { useUserDepartments } from '@/hooks/useUserDepartments';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Plus, X, Star, Users, Check } from 'lucide-react';\nimport { toast } from 'sonner';\nimport { useAuth } from 'staysecure-auth';\n\ninterface UserDepartmentsRolesTableProps {\n  userId: string;\n}\n\nexport interface UserDepartmentsRolesTableRef {\n  handleAddNewRow: () => void;\n}\n\ninterface DepartmentRolePair {\n  id?: string;\n  departmentId?: string;\n  departmentName?: string;\n  departmentAssignmentId?: string;\n  roleName?: string;\n  roleId?: string;\n  isDepartmentPrimary?: boolean;\n  isRolePrimary?: boolean;\n  isNewRow?: boolean;\n}\n\nexport const UserDepartmentsRolesTable = forwardRef<UserDepartmentsRolesTableRef, UserDepartmentsRolesTableProps>(({ userId }, ref) => {\n  const [newRows, setNewRows] = useState<DepartmentRolePair[]>([]);\n  const queryClient = useQueryClient();\n  const { user } = useAuth();\n  \n  const { \n    userDepartments, \n    addDepartment, \n    removeDepartment, \n    setPrimaryDepartment,\n    isAddingDepartment,\n    refetch: refetchUserDepartments\n  } = useUserDepartments(userId);\n\n  // Fetch all available departments\n  const { data: allDepartments = [] } = useQuery({\n    queryKey: ['departments'],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('departments')\n        .select('id, name')\n        .order('name');\n      if (error) throw error;\n      return data;\n    },\n  });\n\n  // Fetch user's current roles\n  const { data: userRoles = [] } = useQuery({\n    queryKey: ['user-roles', userId],\n    queryFn: async () => {\n      if (!userId) return [];\n      \n      console.log('UserDepartmentsRolesTable: Fetching roles for user:', userId);\n      const { data, error } = await supabase\n        .from('user_profile_roles')\n        .select(`\n          *,\n          roles (\n            name\n          )\n        `)\n        .eq('user_id', userId)\n        .order('is_primary', { ascending: false });\n      \n      console.log('UserDepartmentsRolesTable: Raw roles data:', data);\n      console.log('UserDepartmentsRolesTable: Roles query error:', error);\n      \n      if (error) throw error;\n      \n      // Transform the data to match expected interface\n      const transformedData = (data || []).map(item => ({\n        id: item.id,\n        user_id: item.user_id,\n        role_id: item.role_id,\n        role_name: item.roles?.name || '',\n        is_primary: item.is_primary,\n        assigned_at: item.assigned_at,\n        assigned_by: item.assigned_by,\n        pairing_id: item.pairing_id,\n      }));\n      \n      // Sort by role name after transformation\n      transformedData.sort((a, b) => {\n        if (a.is_primary && !b.is_primary) return -1;\n        if (!a.is_primary && b.is_primary) return 1;\n        return (a.role_name || '').localeCompare(b.role_name || '');\n      });\n      \n      console.log('UserDepartmentsRolesTable: Transformed roles data:', transformedData);\n      return transformedData;\n    },\n    enabled: !!userId,\n  });\n\n  // Fetch all available roles\n  const { data: allRoles = [] } = useQuery({\n    queryKey: ['all-roles'],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('roles')\n        .select('role_id, name, department_id, departments(name)')\n        .eq('is_active', true)\n        .order('name');\n      \n      if (error) throw error;\n      return data;\n    },\n  });\n\n  // Add role mutation\n  const addRoleMutation = useMutation({\n    mutationFn: async ({ roleId, pairingId }: { roleId: string; pairingId?: string }) => {\n      console.log('UserDepartmentsRolesTable: addRoleMutation called with roleId:', roleId, 'pairingId:', pairingId);\n      const role = allRoles.find(r => r.role_id === roleId);\n      console.log('UserDepartmentsRolesTable: Found role:', role);\n      if (!role) throw new Error('Role not found');\n\n      const isPrimary = userRoles.length === 0;\n      console.log('UserDepartmentsRolesTable: isPrimary:', isPrimary, 'userRoles.length:', userRoles.length);\n      \n      const insertData = {\n        user_id: userId,\n        role_id: roleId,\n        is_primary: isPrimary,\n        assigned_by: user?.id,\n        pairing_id: pairingId\n      };\n      console.log('UserDepartmentsRolesTable: Inserting role data:', insertData);\n      \n      const { data, error } = await supabase\n        .from('user_profile_roles')\n        .insert(insertData)\n        .select();\n      \n      console.log('UserDepartmentsRolesTable: Insert result:', data);\n      console.log('UserDepartmentsRolesTable: Insert error:', error);\n      \n      if (error) throw error;\n      return role;\n    },\n    onSuccess: (data) => {\n      console.log('UserDepartmentsRolesTable: Role assignment successful:', data);\n      queryClient.invalidateQueries({ queryKey: ['user-roles', userId] });\n      toast.success('Role assigned successfully');\n    },\n    onError: (error: any) => {\n      console.error('UserDepartmentsRolesTable: Role assignment failed:', error);\n      toast.error('Failed to assign role: ' + error.message);\n    }\n  });\n\n  // Remove role mutation\n  const removeRoleMutation = useMutation({\n    mutationFn: async (roleId: string) => {\n      const { error } = await supabase\n        .from('user_profile_roles')\n        .delete()\n        .eq('id', roleId);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['user-roles', userId] });\n      toast.success('Role removed successfully');\n    },\n    onError: (error: any) => {\n      toast.error('Failed to remove role: ' + error.message);\n    }\n  });\n\n  // Set primary role mutation\n  const setPrimaryRoleMutation = useMutation({\n    mutationFn: async (roleId: string) => {\n      await supabase\n        .from('user_profile_roles')\n        .update({ is_primary: false })\n        .eq('user_id', userId);\n\n      const { error } = await supabase\n        .from('user_profile_roles')\n        .update({ is_primary: true })\n        .eq('id', roleId);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['user-roles', userId] });\n      toast.success('Primary role updated');\n    }\n  });\n\n  // Create the table data - show paired and unpaired assignments correctly\n  const createTableData = (): DepartmentRolePair[] => {\n    const pairs: DepartmentRolePair[] = [];\n    const usedPairingIds = new Set<string>();\n    \n    // First, find paired assignments (departments and roles with matching pairing_id)\n    userDepartments.forEach(dept => {\n      if (dept.pairing_id) {\n        const matchingRole = userRoles.find(role => role.pairing_id === dept.pairing_id);\n        if (matchingRole) {\n          pairs.push({\n            id: `pair-${dept.pairing_id}`,\n            departmentId: dept.department_id,\n            departmentName: dept.department_name,\n            departmentAssignmentId: dept.id,\n            roleName: matchingRole.role_name,\n            roleId: matchingRole.id,\n            isDepartmentPrimary: dept.is_primary,\n            isRolePrimary: matchingRole.is_primary,\n          });\n          usedPairingIds.add(dept.pairing_id);\n        }\n      }\n    });\n    \n    // Add standalone departments (no pairing_id or no matching role)\n    userDepartments.forEach(dept => {\n      if (!dept.pairing_id || !usedPairingIds.has(dept.pairing_id)) {\n        pairs.push({\n          id: `dept-${dept.id}`,\n          departmentId: dept.department_id,\n          departmentName: dept.department_name,\n          departmentAssignmentId: dept.id,\n          isDepartmentPrimary: dept.is_primary,\n        });\n      }\n    });\n    \n    // Add standalone roles (no pairing_id or no matching department)\n    userRoles.forEach(role => {\n      if (!role.pairing_id || !usedPairingIds.has(role.pairing_id)) {\n        pairs.push({\n          id: `role-${role.id}`,\n          roleName: role.role_name,\n          roleId: role.id,\n          isRolePrimary: role.is_primary,\n        });\n      }\n    });\n    \n    // Sort to show primary assignments first\n    pairs.sort((a, b) => {\n      const aPrimary = a.isDepartmentPrimary || a.isRolePrimary;\n      const bPrimary = b.isDepartmentPrimary || b.isRolePrimary;\n      if (aPrimary && !bPrimary) return -1;\n      if (!aPrimary && bPrimary) return 1;\n      return 0;\n    });\n\n    // Add new rows\n    pairs.push(...newRows);\n    \n    return pairs;\n  };\n\n  const getAvailableRoles = (selectedDepartmentId?: string) => {\n    console.log('getAvailableRoles called with:', selectedDepartmentId);\n    console.log('allRoles:', allRoles);\n    \n    if (!selectedDepartmentId) {\n      // Show only roles without departments (general roles)\n      const generalRoles = allRoles.filter(role => !role.department_id);\n      console.log('No department selected, showing general roles:', generalRoles);\n      return generalRoles;\n    }\n    \n    // Show ONLY roles from the selected department (not general roles)\n    const departmentRoles = allRoles.filter(role => role.department_id === selectedDepartmentId);\n    console.log(`Department ${selectedDepartmentId} selected, showing ONLY department roles:`, departmentRoles);\n    \n    return departmentRoles;\n  };\n\n  const handleAddNewRow = () => {\n    setNewRows(prev => [...prev, { isNewRow: true }]);\n  };\n\n  // Expose the handleAddNewRow function to parent components\n  useImperativeHandle(ref, () => ({\n    handleAddNewRow\n  }));\n\n  const handleNewRowDepartmentChange = (index: number, departmentId: string) => {\n    if (departmentId === 'none') {\n      departmentId = '';\n    }\n\n    const department = allDepartments.find(d => d.id === departmentId);\n    const currentRow = newRows[index];\n    \n    // Check if current role is still valid for the new department\n    const availableRoles = getAvailableRoles(departmentId || undefined);\n    const isCurrentRoleStillValid = currentRow.roleId && \n      availableRoles.some(role => role.role_id === currentRow.roleId);\n    \n    const updatedRow = { \n      ...currentRow, \n      departmentId: departmentId || undefined, \n      departmentName: department?.name,\n      // Clear role if it's no longer valid for the selected department\n      roleId: isCurrentRoleStillValid ? currentRow.roleId : undefined,\n      roleName: isCurrentRoleStillValid ? currentRow.roleName : undefined\n    };\n    \n    setNewRows(prev => prev.map((row, i) => i === index ? updatedRow : row));\n  };\n\n  const handleNewRowRoleChange = (index: number, roleId: string) => {\n    if (roleId === 'none') {\n      roleId = '';\n    }\n\n    const role = allRoles.find(r => r.role_id === roleId);\n    const updatedRow = { \n      ...newRows[index], \n      roleId: roleId || undefined,\n      roleName: role?.name \n    };\n    \n    setNewRows(prev => prev.map((row, i) => i === index ? updatedRow : row));\n  };\n\n  const handleSaveNewRow = async (index: number) => {\n    const row = newRows[index];\n    \n    console.log('UserDepartmentsRolesTable: Saving new row:', row);\n    console.log('UserDepartmentsRolesTable: Current userRoles:', userRoles);\n    console.log('UserDepartmentsRolesTable: Current userDepartments:', userDepartments);\n    \n    // Ensure at least one field is selected\n    if (!row.departmentId && !row.roleId) {\n      toast.error('Please select at least a department or role');\n      return;\n    }\n\n    try {\n      // Generate pairing_id if both department and role are selected\n      const pairingId = (row.departmentId && row.roleId) ? crypto.randomUUID() : undefined;\n      console.log('UserDepartmentsRolesTable: Generated pairingId:', pairingId);\n      \n      // Add department if selected and not already assigned\n      if (row.departmentId) {\n        const isDepartmentAlreadyAssigned = userDepartments.some(dept => dept.department_id === row.departmentId);\n        console.log('UserDepartmentsRolesTable: Department already assigned?', isDepartmentAlreadyAssigned);\n        console.log('UserDepartmentsRolesTable: Current userDepartments:', userDepartments);\n        console.log('UserDepartmentsRolesTable: Looking for departmentId:', row.departmentId);\n        if (!isDepartmentAlreadyAssigned) {\n          const isPrimary = userDepartments.length === 0;\n          console.log('UserDepartmentsRolesTable: Adding department with isPrimary:', isPrimary);\n          console.log('UserDepartmentsRolesTable: Department params:', { \n            userId, \n            departmentId: row.departmentId, \n            isPrimary,\n            pairingId,\n            assignedBy: user?.id\n          });\n          await addDepartment({ \n            userId, \n            departmentId: row.departmentId, \n            isPrimary,\n            pairingId,\n            assignedBy: user?.id\n          });\n          console.log('UserDepartmentsRolesTable: Department addition completed');\n        } else {\n          console.log('UserDepartmentsRolesTable: Department already assigned, skipping');\n        }\n      }\n      \n      // Add role if selected and not already assigned\n      if (row.roleId) {\n        const isRoleAlreadyAssigned = userRoles.some(role => role.role_id === row.roleId);\n        console.log('UserDepartmentsRolesTable: Role already assigned?', isRoleAlreadyAssigned);\n        console.log('UserDepartmentsRolesTable: Checking roleId', row.roleId, 'against userRoles:', userRoles.map(r => r.role_id));\n        if (!isRoleAlreadyAssigned) {\n          console.log('UserDepartmentsRolesTable: Adding role with roleId:', row.roleId);\n          await addRoleMutation.mutateAsync({ \n            roleId: row.roleId,\n            pairingId\n          });\n        }\n      }\n      \n      // Remove the new row after successful save\n      setNewRows(prev => prev.filter((_, i) => i !== index));\n      toast.success('Assignment saved successfully');\n    } catch (error) {\n      console.error('Error saving assignment:', error);\n      toast.error('Failed to save assignment');\n    }\n  };\n\n  const handleDeletePair = async (pair: DepartmentRolePair) => {\n    try {\n      // Remove department if it exists\n      if (pair.departmentAssignmentId) {\n        removeDepartment(pair.departmentAssignmentId);\n      }\n      \n      // Remove role if it exists\n      if (pair.roleId) {\n        await removeRoleMutation.mutateAsync(pair.roleId);\n      }\n    } catch (error) {\n      toast.error('Failed to delete assignment');\n    }\n  };\n\n  const handleCancelNewRow = (index: number) => {\n    setNewRows(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Set primary pair mutation\n  const setPrimaryPairMutation = useMutation({\n    mutationFn: async (pair: DepartmentRolePair) => {\n      // First, unset all primary assignments for this user\n      await supabase\n        .from('user_departments')\n        .update({ is_primary: false })\n        .eq('user_id', userId);\n\n      await supabase\n        .from('user_profile_roles')\n        .update({ is_primary: false })\n        .eq('user_id', userId);\n\n      // Then set the selected pair as primary\n      if (pair.departmentAssignmentId) {\n        const { error: deptError } = await supabase\n          .from('user_departments')\n          .update({ is_primary: true })\n          .eq('id', pair.departmentAssignmentId);\n\n        if (deptError) throw deptError;\n      }\n\n      if (pair.roleId) {\n        const { error: roleError } = await supabase\n          .from('user_profile_roles')\n          .update({ is_primary: true })\n          .eq('id', pair.roleId);\n\n        if (roleError) throw roleError;\n      }\n    },\n    onSuccess: () => {\n      refetchUserDepartments();\n      queryClient.invalidateQueries({ queryKey: ['user-roles', userId] });\n      toast.success('Primary assignment updated successfully');\n    },\n    onError: (error: any) => {\n      toast.error('Failed to update primary assignment: ' + error.message);\n    }\n  });\n\n  const tableData = createTableData();\n\n  return (\n    <Card>\n      <CardContent className=\"pt-6\">\n        <div className=\"space-y-4\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Department</TableHead>\n                <TableHead>Role</TableHead>\n                <TableHead className=\"w-[80px]\">Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {tableData.map((pair, index) => (\n                <TableRow key={pair.id || `new-${index}`}>\n                  <TableCell>\n                    {pair.isNewRow ? (\n                      <Select \n                        value={pair.departmentId || ''} \n                        onValueChange={(value) => handleNewRowDepartmentChange(index - (tableData.length - newRows.length), value)}\n                      >\n                        <SelectTrigger className=\"w-full\">\n                          <SelectValue placeholder=\"Select department...\" />\n                        </SelectTrigger>\n                        <SelectContent className=\"bg-background border z-50\">\n                          {allDepartments.map((dept) => (\n                            <SelectItem key={dept.id} value={dept.id}>\n                              {dept.name}\n                            </SelectItem>\n                          ))}\n                          <SelectItem value=\"none\">\n                            <span className=\"text-muted-foreground italic\">Skip department</span>\n                          </SelectItem>\n                        </SelectContent>\n                      </Select>\n                    ) : pair.departmentName ? (\n                      <div className=\"flex items-center gap-2\">\n                        <Badge variant={pair.isDepartmentPrimary ? \"default\" : \"secondary\"}>\n                          {pair.departmentName}\n                        </Badge>\n                        {pair.isDepartmentPrimary && (\n                          <Star className=\"h-3 w-3 fill-current text-yellow-500\" />\n                        )}\n                      </div>\n                    ) : (\n                      <span className=\"text-muted-foreground italic\">No department</span>\n                    )}\n                  </TableCell>\n                  \n                  <TableCell>\n                    {pair.isNewRow ? (\n                      <Select \n                        value={pair.roleId || ''} \n                        onValueChange={(value) => handleNewRowRoleChange(index - (tableData.length - newRows.length), value)}\n                      >\n                        <SelectTrigger className=\"w-full\">\n                          <SelectValue placeholder=\"Select role...\" />\n                        </SelectTrigger>\n                        <SelectContent className=\"bg-background border z-50\">\n                          {getAvailableRoles(pair.departmentId).map((role) => (\n                            <SelectItem key={role.role_id} value={role.role_id}>\n                              {role.name}\n                              {role.department_id && (\n                                <span className=\"text-xs text-muted-foreground ml-1\">\n                                  (Dept. role)\n                                </span>\n                              )}\n                            </SelectItem>\n                          ))}\n                          <SelectItem value=\"none\">\n                            <span className=\"text-muted-foreground italic\">Skip role</span>\n                          </SelectItem>\n                        </SelectContent>\n                      </Select>\n                    ) : pair.roleName ? (\n                      <div className=\"flex items-center gap-2\">\n                        <Badge variant={pair.isRolePrimary ? \"default\" : \"secondary\"}>\n                          {pair.roleName}\n                        </Badge>\n                        {pair.isRolePrimary && (\n                          <Star className=\"h-3 w-3 fill-current text-yellow-500\" />\n                        )}\n                      </div>\n                    ) : (\n                      <span className=\"text-muted-foreground italic\">No role</span>\n                    )}\n                  </TableCell>\n                  \n                  <TableCell>\n                    {pair.isNewRow ? (\n                      <div className=\"flex items-center gap-1\">\n                        <Button\n                          size=\"sm\"\n                          variant=\"ghost\"\n                          onClick={() => handleSaveNewRow(index - (tableData.length - newRows.length))}\n                          className=\"h-6 w-6 p-0 hover:bg-primary hover:text-primary-foreground\"\n                          disabled={!pair.departmentId && !pair.roleId}\n                        >\n                          <Check className=\"h-3 w-3\" />\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"ghost\"\n                          onClick={() => handleCancelNewRow(index - (tableData.length - newRows.length))}\n                          className=\"h-6 w-6 p-0 hover:bg-destructive hover:text-destructive-foreground\"\n                        >\n                          <X className=\"h-3 w-3\" />\n                        </Button>\n                      </div>\n                    ) : (pair.departmentName || pair.roleName) ? (\n                      <div className=\"flex items-center gap-1\">\n                        <Button\n                          size=\"sm\"\n                          variant=\"ghost\"\n                          onClick={() => setPrimaryPairMutation.mutate(pair)}\n                          disabled={setPrimaryPairMutation.isPending || (pair.isDepartmentPrimary && pair.isRolePrimary)}\n                          className=\"h-6 w-6 p-0 hover:bg-yellow-500 hover:text-white\"\n                          title=\"Set as primary\"\n                        >\n                          <Star \n                            className={`h-3 w-3 ${\n                              pair.isDepartmentPrimary || pair.isRolePrimary \n                                ? 'fill-current text-yellow-500' \n                                : 'text-muted-foreground'\n                            }`} \n                          />\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"ghost\"\n                          className=\"h-6 w-6 p-0 hover:bg-destructive hover:text-destructive-foreground\"\n                          onClick={() => handleDeletePair(pair)}\n                        >\n                          <X className=\"h-3 w-3\" />\n                        </Button>\n                      </div>\n                    ) : null}\n                  </TableCell>\n                </TableRow>\n              ))}\n              \n              {tableData.length === 0 && (\n                <TableRow>\n                  <TableCell colSpan={3} className=\"text-center text-muted-foreground\">\n                    No department or role assignments\n                  </TableCell>\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </div>\n      </CardContent>\n    </Card>\n  );\n});","import React, { forwardRef, useImperativeHandle, useRef } from 'react';\nimport { UserDepartmentsRolesTable } from './UserDepartmentsRolesTable';\n\ninterface UserDepartmentsRolesManagerProps {\n  userId: string;\n}\n\nexport interface UserDepartmentsRolesManagerRef {\n  handleAddNewRow: () => void;\n}\n\nexport const UserDepartmentsRolesManager = forwardRef<UserDepartmentsRolesManagerRef, UserDepartmentsRolesManagerProps>(\n  ({ userId }, ref) => {\n    const tableRef = useRef<UserDepartmentsRolesManagerRef>(null);\n\n    useImperativeHandle(ref, () => ({\n      handleAddNewRow: () => tableRef.current?.handleAddNewRow?.()\n    }));\n\n    return <UserDepartmentsRolesTable userId={userId} ref={tableRef} />;\n  }\n);","\nimport React, { useState, useRef } from \"react\";\nimport { useUserRole } from '@/hooks/useUserRole';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport HardwareInventory from \"@/components/HardwareInventory\";\nimport SoftwareAccounts from \"@/components/SoftwareAccounts\";\nimport EditableCertificates from \"../certificates/EditableCertificates\";\nimport PhysicalLocationTab from \"./PhysicalLocationTab\";\nimport AssignHardwareDialog from \"../admin/AssignHardwareDialog\";\nimport AssignSoftwareDialog from \"../admin/AssignSoftwareDialog\";\nimport AddCertificatesDialog from \"../certificates/AddCertificatesDialog\";\nimport { Laptop, MonitorSmartphone, GraduationCap, MapPin, Plus, BookOpen, Users, Play } from \"lucide-react\";\nimport MyDocuments from \"@/components/knowledge/MyDocuments\";\nimport { UserDepartmentsRolesManager, UserDepartmentsRolesManagerRef } from \"../organisational/UserDepartmentsRolesManager\";\nimport LearningTracksTab from \"@/components/LearningTracksTab\";\n\ninterface PersonaDetailsTabsProps {\n  profile: any; // Using any for now since we're adapting the data structure\n  userId: string;\n  onUpdate?: () => void;\n}\n\nconst PersonaDetailsTabs: React.FC<PersonaDetailsTabsProps> = ({ profile, userId, onUpdate }) => {\n  const [isAssignHardwareOpen, setIsAssignHardwareOpen] = useState(false);\n  const [isAssignSoftwareOpen, setIsAssignSoftwareOpen] = useState(false);\n  const [isAddEducationOpen, setIsAddEducationOpen] = useState(false);\n  const departmentRolesRef = useRef<UserDepartmentsRolesManagerRef>(null);\n\n  // Detect if we're in Learn mode (root path) or Govern mode (admin path)\n  // This is the GOVERN app, so default to GOVERN mode unless explicitly set to LEARN\n  const isLearnMode = import.meta.env.VITE_APP_MODE === 'LEARN';\n  const { hasAdminAccess } = useUserRole();\n\n  const handleCertificateUpdate = (certificateId: string, updates: any) => {\n    // This would typically update the certificate in the database\n  };\n\n  const handleDataChange = () => {\n    // Trigger data refresh\n    onUpdate?.();\n  };\n\n  // ... existing code ...\n\n  // Get the appropriate grid class based on mode\n  const getGridClass = () => {\n    if (isLearnMode) {\n      return \"grid-cols-3\"; // Only Departments & Roles, Physical Location and Certificates in Learn mode\n    }\n    \n    if (profile?.enrolled_in_learn) {\n      return \"grid-cols-7\"; // All tabs including Learn\n    }\n    \n    return \"grid-cols-6\"; // All tabs except Learn\n  };\n\n  return (\n    <Card className=\"w-full\">\n      <CardContent className=\"p-6\">\n        <Tabs defaultValue=\"departments\" className=\"w-full\">\n          <TabsList className={`grid w-full ${getGridClass()} mb-6`}>\n            <TabsTrigger value=\"departments\" className=\"flex items-center gap-2\">\n              <Users className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">Departments & Roles</span>\n            </TabsTrigger>\n            \n            {/* Only show these tabs in Govern mode */}\n            {!isLearnMode && (\n              <>\n                <TabsTrigger value=\"hardware\" className=\"flex items-center gap-2\">\n                  <Laptop className=\"h-4 w-4\" />\n                  <span className=\"hidden sm:inline\">Hardware</span>\n                </TabsTrigger>\n                <TabsTrigger value=\"software\" className=\"flex items-center gap-2\">\n                  <MonitorSmartphone className=\"h-4 w-4\" />\n                  <span className=\"hidden sm:inline\">Accounts</span>\n                </TabsTrigger>\n              </>\n            )}\n            \n            <TabsTrigger value=\"location\" className=\"flex items-center gap-2\">\n                  <MapPin className=\"h-4 w-4\" />\n                  <span className=\"hidden sm:inline\">Physical Location</span>\n            </TabsTrigger>\n            \n            {/* Only show Knowledge tab in Govern mode */}\n            {!isLearnMode && (\n              <TabsTrigger value=\"knowledge\" className=\"flex items-center gap-2\">\n                <BookOpen className=\"h-4 w-4\" />\n                <span className=\"hidden sm:inline\">Knowledge</span>\n              </TabsTrigger>\n            )}\n            <TabsTrigger value=\"certification\" className=\"flex items-center gap-2\">\n              <GraduationCap className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">Certificates</span>\n            </TabsTrigger>\n            \n            {/* Only show Learn tab in Govern mode */}\n            {!isLearnMode && profile?.enrolled_in_learn && (\n              <TabsTrigger value=\"learn\" className=\"flex items-center gap-2\">\n                <Play className=\"h-4 w-4\" />\n                <span className=\"hidden sm:inline\">StaySecure LEARN</span>\n              </TabsTrigger>\n            )}\n          </TabsList>\n          \n\n          <TabsContent value=\"departments\" className=\"space-y-4 animate-fade-in\">\n            {hasAdminAccess && (\n              <div className=\"flex justify-end\">\n                <Button \n                  onClick={() => departmentRolesRef.current?.handleAddNewRow?.()}\n                  size=\"icon\"\n                >\n                  <Plus className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            )}\n            <UserDepartmentsRolesManager userId={userId} ref={departmentRolesRef} />\n          </TabsContent>\n          \n          {/* Only show these tab contents in Govern mode */}\n          {!isLearnMode && (\n            <>\n              <TabsContent value=\"hardware\" className=\"space-y-4 animate-fade-in\">\n                <div className=\"flex justify-end\">\n                  <Button \n                    onClick={() => setIsAssignHardwareOpen(true)}\n                    size=\"icon\"\n                  >\n                    <Plus className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n                <HardwareInventory profile={profile} onUpdate={handleDataChange} />\n              </TabsContent>\n              \n              <TabsContent value=\"software\" className=\"space-y-4 animate-fade-in\">\n                <div className=\"flex justify-end\">\n                  <Button \n                    onClick={() => setIsAssignSoftwareOpen(true)}\n                    size=\"icon\"\n                  >\n                    <Plus className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n                <SoftwareAccounts profile={profile} />\n              </TabsContent>\n\n            </>\n          )}\n                        \n          <TabsContent value=\"location\" className=\"space-y-4 animate-fade-in\">\n            <PhysicalLocationTab profile={profile} canAdd={hasAdminAccess} />\n          </TabsContent>\n          \n          {/* Only show Knowledge tab content in Govern mode */}\n          {!isLearnMode && (\n            <TabsContent value=\"knowledge\" className=\"space-y-4 animate-fade-in\">\n              <MyDocuments userId={profile.id} />\n            </TabsContent>\n          )}\n              \n          <TabsContent value=\"certification\" className=\"space-y-4 animate-fade-in\">\n            <div className=\"flex justify-end\">\n              <Button \n                onClick={() => setIsAddEducationOpen(true)}\n                size=\"icon\"\n              >\n                <Plus className=\"h-4 w-4\" />\n              </Button>\n            </div>\n            <EditableCertificates \n              profile={profile} \n              onUpdate={handleCertificateUpdate}\n              onDataChange={handleDataChange}\n            />\n          </TabsContent>\n\n          {/* Only show Learn tab content in Govern mode */}\n          {!isLearnMode && profile?.enrolled_in_learn && (\n            <TabsContent value=\"learn\" className=\"space-y-4 animate-fade-in\">\n              <LearningTracksTab userId={profile.id} />\n            </TabsContent>\n          )}\n        </Tabs>\n\n        {/* Dialogs - only show in Govern mode */}\n        {!isLearnMode && (\n          <>\n            <AssignHardwareDialog\n              isOpen={isAssignHardwareOpen}\n              onOpenChange={setIsAssignHardwareOpen}\n              userId={profile.id}\n              onSuccess={() => {\n                setIsAssignHardwareOpen(false);\n                handleDataChange();\n              }}\n            />\n\n            <AssignSoftwareDialog\n              isOpen={isAssignSoftwareOpen}\n              onOpenChange={setIsAssignSoftwareOpen}\n              userId={profile.id}\n              onSuccess={() => {\n                setIsAssignSoftwareOpen(false);\n                handleDataChange();\n              }}\n            />\n          </>\n        )}\n\n        <AddCertificatesDialog\n          isOpen={isAddEducationOpen}\n          onOpenChange={setIsAddEducationOpen}\n          userId={profile.id}\n          onSuccess={() => {\n            setIsAddEducationOpen(false);\n            handleDataChange();\n          }}\n        />\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default PersonaDetailsTabs;","\nimport React, { useRef, useState } from \"react\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Upload, Loader2 } from \"lucide-react\";\nimport { toast } from \"@/components/ui/use-toast\";\nimport { supabase } from \"@/integrations/supabase/client\";\n\ninterface ProfileAvatarProps {\n  avatarUrl?: string;\n  firstName: string;\n  lastName: string;\n  profileId?: string;\n  onAvatarUpdate?: (avatarUrl: string) => void;\n}\n\nconst ProfileAvatar: React.FC<ProfileAvatarProps> = ({ \n  avatarUrl, \n  firstName, \n  lastName,\n  profileId,\n  onAvatarUpdate\n}) => {\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [uploading, setUploading] = useState(false);\n\n  const initials = firstName && lastName\n    ? (firstName.charAt(0) + lastName.charAt(0))\n    : firstName?.slice(0, 2) || 'U';\n\n  const handleAvatarClick = () => {\n    console.log('ProfileAvatar: Upload button clicked');\n    console.log('ProfileAvatar: fileInputRef.current:', fileInputRef.current);\n    console.log('ProfileAvatar: profileId:', profileId);\n    console.log('ProfileAvatar: supabase:', supabase);\n    fileInputRef.current?.click();\n  };\n\n  const handleFileChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    console.log('ProfileAvatar: File selected:', event.target.files);\n    const file = event.target.files?.[0];\n    if (!file) {\n      console.log('ProfileAvatar: No file selected');\n      return;\n    }\n    console.log('ProfileAvatar: Processing file:', file.name, file.type, file.size);\n\n    // Check file type - only images\n    const validTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\n    if (!validTypes.includes(file.type)) {\n      toast({\n        title: \"Invalid file type\",\n        description: \"Please upload an image (JPEG, PNG, GIF, or WebP)\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    // Check file size (5MB limit for avatars)\n    if (file.size > 5 * 1024 * 1024) {\n      toast({\n        title: \"File too large\",\n        description: \"Please upload an image smaller than 5MB\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    setUploading(true);\n\n    try {\n      // Generate unique filename\n      const fileExt = file.name.split('.').pop();\n      const fileName = `avatars/${profileId || 'user'}-${Date.now()}-${Math.random().toString(36).substring(2)}.${fileExt}`;\n\n      // Delete old avatar if it exists (optional cleanup)\n      if (avatarUrl && avatarUrl.includes('/storage/v1/object/public/avatars/')) {\n        try {\n          // Extract the file path from the Supabase public URL\n          // URL format: https://[project].supabase.co/storage/v1/object/public/avatars/path/to/file\n          const urlParts = avatarUrl.split('/storage/v1/object/public/avatars/');\n          if (urlParts.length > 1) {\n            const oldFilePath = urlParts[1];\n            await supabase.storage\n              .from('avatars')\n              .remove([oldFilePath]);\n          }\n        } catch (error) {\n          // Ignore errors when deleting old avatar - not critical\n          console.warn('Could not delete old avatar:', error);\n        }\n      }\n\n      // Upload to Supabase Storage\n      const { data, error } = await supabase.storage\n        .from('avatars')\n        .upload(fileName, file, {\n          cacheControl: '3600',\n          upsert: false\n        });\n\n      if (error) {\n        console.error('Storage upload error:', error);\n        throw error;\n      }\n\n      // Get public URL\n      const { data: urlData } = supabase.storage\n        .from('avatars')\n        .getPublicUrl(fileName);\n\n      // Update profile with new avatar URL\n      if (profileId) {\n        const { error: updateError } = await supabase\n          .from('profiles')\n          .update({ avatar_url: urlData.publicUrl })\n          .eq('id', profileId);\n\n        if (updateError) {\n          console.error('Profile update error:', updateError);\n          throw updateError;\n        }\n      }\n\n      // Call the callback if provided\n      if (onAvatarUpdate) {\n        console.log('ProfileAvatar: Calling onAvatarUpdate with:', urlData.publicUrl);\n        onAvatarUpdate(urlData.publicUrl);\n        console.log('ProfileAvatar: onAvatarUpdate called');\n      } else {\n        console.warn('ProfileAvatar: onAvatarUpdate callback not provided');\n      }\n\n      toast({\n        title: \"Avatar uploaded\",\n        description: \"Your avatar has been updated successfully\"\n      });\n    } catch (error: any) {\n      console.error('Error uploading avatar:', error);\n      const errorMessage = error?.message || 'Failed to upload avatar. Please try again.';\n      toast({\n        title: \"Upload failed\",\n        description: errorMessage,\n        variant: \"destructive\"\n      });\n    } finally {\n      setUploading(false);\n      // Reset file input\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    }\n  };\n\n  return (\n    <div className=\"relative\">\n      <Avatar className=\"h-24 w-24 border-2 border-primary\">\n        <AvatarImage src={avatarUrl} alt={`${firstName} ${lastName}`} key={avatarUrl} />\n        <AvatarFallback className=\"text-2xl\">{initials}</AvatarFallback>\n      </Avatar>\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\"image/jpeg,image/png,image/gif,image/webp\"\n        onChange={handleFileChange}\n        className=\"hidden\"\n      />\n      <Button\n        size=\"sm\"\n        variant=\"outline\"\n        className=\"absolute -bottom-2 -right-2 h-8 w-8 rounded-full p-0\"\n        onClick={handleAvatarClick}\n        disabled={uploading || !profileId}\n      >\n        {uploading ? (\n          <Loader2 className=\"h-3 w-3 animate-spin\" />\n        ) : (\n          <Upload className=\"h-3 w-3\" />\n        )}\n      </Button>\n    </div>\n  );\n};\n\nexport default ProfileAvatar;\n","import React, { useState } from 'react';\nimport { Badge } from '@/components/ui/badge';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { useUserRoleById, AppRole } from '@/hooks/useUserRoleById';\nimport { useUserRole } from '@/hooks/useUserRole';\nimport { Loader2, Key } from 'lucide-react';\n\ninterface UserRoleFieldProps {\n  userId: string;\n}\n\nexport const UserRoleField: React.FC<UserRoleFieldProps> = ({ userId }) => {\n  const [isEditing, setIsEditing] = useState(false);\n  const { role, isLoading, updateRole, isUpdating, getRoleDisplayName, getRoleBadgeVariant } = useUserRoleById(userId);\n  const { hasAdminAccess } = useUserRole();\n\n  const roleOptions: { value: AppRole; label: string }[] = [\n    { value: 'user', label: 'User' },\n    { value: 'author', label: 'Author' },\n    { value: 'manager', label: 'Manager' },\n    { value: 'client_admin', label: 'Administrator' },\n    { value: 'super_admin', label: 'Super Administrator' },\n  ];\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center gap-2\">\n        <Loader2 className=\"h-4 w-4 animate-spin\" />\n        <span className=\"text-sm text-muted-foreground\">Loading role...</span>\n      </div>\n    );\n  }\n\n  const handleRoleChange = async (newRole: AppRole) => {\n    await updateRole(newRole);\n    setIsEditing(false);\n  };\n\n  // Display mode - show as text with icon\n  if (!isEditing) {\n    return (\n      <div className=\"flex items-center gap-2\">\n        <Key className=\"h-4 w-4 text-muted-foreground\" />\n        <Badge \n          variant={getRoleBadgeVariant(role)}\n          className={`text-sm ${hasAdminAccess ? 'cursor-pointer hover:bg-muted/50 px-2 py-1 rounded transition-colors' : ''}`}\n          onClick={() => hasAdminAccess && setIsEditing(true)}\n        >\n          {getRoleDisplayName(role)}\n        </Badge>\n      </div>\n    );\n  }\n\n  // Edit mode - show dropdown\n  return (\n    <div className=\"flex items-center gap-2\">\n      <Key className=\"h-4 w-4 text-muted-foreground\" />\n      <Select\n        value={role || 'user'}\n        onValueChange={(value) => handleRoleChange(value as AppRole)}\n        disabled={isUpdating}\n        open={isEditing}\n        onOpenChange={setIsEditing}\n      >\n        <SelectTrigger className=\"w-48 h-8 text-sm\">\n          <SelectValue />\n        </SelectTrigger>\n        <SelectContent className=\"z-50\">\n          {roleOptions.map((option) => (\n            <SelectItem key={option.value} value={option.value}>\n              {option.label}\n            </SelectItem>\n          ))}\n        </SelectContent>\n      </Select>\n      {isUpdating && <Loader2 className=\"h-4 w-4 animate-spin\" />}\n    </div>\n  );\n};\n","\nimport React from \"react\";\nimport { Calendar, Shield, Clock } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { UserRoleField } from './UserRoleField';\n\ninterface ProfileContactInfoProps {\n  startDate: string;\n  userId: string;\n  // Account status props\n  status?: string;\n  accessLevel?: string;\n  lastLogin?: string;\n  passwordLastChanged?: string;\n  twoFactorEnabled?: boolean;\n}\n\nconst ProfileContactInfo: React.FC<ProfileContactInfoProps> = ({\n  startDate,\n  userId,\n  status,\n  accessLevel,\n  lastLogin,\n  passwordLastChanged,\n  twoFactorEnabled\n}) => {\n  const formatDate = (dateString?: string) => {\n    if (!dateString) return 'Not set';\n    return new Date(dateString).toLocaleDateString();\n  };\n\n  const formatDateAndTime = (dateString?: string) => {\n    if (!dateString) return 'Never';\n    return new Date(dateString).toLocaleString();\n  };\n  return (\n    <div className=\"flex flex-col items-end space-y-3 ml-auto\">\n      {/* Account Status Information */}\n      <div className=\"flex items-center gap-2 text-sm\">\n        <Shield className=\"h-4 w-4 text-muted-foreground\" />\n        <Badge variant={status === 'Active' ? 'default' : 'secondary'}>\n          {status || 'Active'}\n        </Badge>\n      </div>\n\n      <div className=\"flex items-center justify-end gap-2 text-sm\">\n        <UserRoleField userId={userId} />\n      </div>\n\n      <div className=\"flex items-center gap-2 text-sm\">\n        <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n        <span>Started {formatDate(startDate)}</span>\n      </div>\n\n      <div className=\"flex items-center gap-2 text-sm\">\n        <Clock className=\"h-4 w-4 text-muted-foreground\" />\n        <span>Last login: {lastLogin ? formatDateAndTime(lastLogin) : 'Never'}</span>\n      </div>\n    </div>\n  );\n};\n\nexport default ProfileContactInfo;\n","import React, { useState } from 'react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { MapPin, Building, User, Edit2, Save, X, Hash, Phone, Star, Network } from 'lucide-react';\nimport { useUserProfiles } from '@/hooks/useUserProfiles';\nimport { useUserDepartments } from '@/hooks/useUserDepartments';\nimport { useUserProfileRoles } from '@/hooks/useUserProfileRoles';\nimport { useUserPhysicalLocations } from '@/hooks/useUserPhysicalLocations';\nimport { toast } from '@/components/ui/use-toast';\nimport ProfileAvatar from './ProfileAvatar';\nimport ProfileContactInfo from './ProfileContactInfo';\nimport EditableField from './EditableField';\nimport { UserRoleField } from './UserRoleField';\n\ninterface EditableProfileHeaderProps {\n  profile: any;\n  onProfileUpdate: () => void;\n  isReadOnly?: boolean;\n  onOptimisticUpdate?: (field: string, value: string) => void;\n}\n\nconst EditableProfileHeader: React.FC<EditableProfileHeaderProps> = ({ \n  profile, \n  onProfileUpdate,\n  isReadOnly = false,\n  onOptimisticUpdate\n}) => {\n  const { profiles, updateProfile } = useUserProfiles();\n  const [editingField, setEditingField] = useState<string | null>(null);\n  const [saving, setSaving] = useState(false);\n  const [managerValue, setManagerValue] = useState(profile.manager || '');\n\n  const handleFieldEdit = (field: string) => {\n    setEditingField(field);\n  };\n\n  const handleFieldSave = async (field: string, value: string) => {\n    try {\n      setSaving(true);\n      let updateData: any = {};\n      if (field === 'full_name') {\n        updateData.full_name = value;\n      } else if (field === 'phone') {\n        updateData.phone = value;\n      } else if (field === 'location') {\n        updateData.location = value;\n      } else if (field === 'location_id') {\n        updateData.location_id = value;\n      } else if (field === 'role') {\n        updateData.role = value;\n      } else if (field === 'department') {\n        updateData.department = value;\n      } else if (field === 'manager') {\n        updateData.manager = value;\n      }\n      \n      if (!profile.id) {\n        console.error('Profile ID is undefined. Profile object:', profile);\n        toast({\n          title: \"Error\",\n          description: \"Profile ID is missing. Cannot update profile.\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      \n      await updateProfile(profile.id, updateData);\n      \n      toast({\n        title: \"Profile updated\",\n        description: \"Your profile has been successfully updated.\",\n      });\n      setEditingField(null);\n      if (onOptimisticUpdate) {\n        onOptimisticUpdate(field, value);\n      }\n      onProfileUpdate();\n    } catch (error: any) {\n      console.error('Save error:', error);\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to update profile\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleFieldCancel = () => {\n    setEditingField(null);\n  };\n\n  const handleNameChange = async (field: 'firstName' | 'lastName', value: string) => {\n    try {\n      setSaving(true);\n\n      // Update the specific name field\n      const updateData: any = {};\n      if (field === 'firstName') {\n        updateData.first_name = value;\n      } else {\n        updateData.last_name = value;\n      }\n      \n      // Only auto-generate full_name if it's currently empty\n      if (profile.full_name === '' || profile.full_name?.trim() === '') {\n        const firstName = field === 'firstName' ? value : profile.firstName || '';\n        const lastName = field === 'lastName' ? value : profile.lastName || '';\n        updateData.full_name = `${firstName} ${lastName}`.trim();\n      }\n      \n      await updateProfile(profile.id, updateData);\n      \n      toast({\n        title: \"Profile updated\",\n        description: \"Your profile has been successfully updated.\",\n      });\n      \n      setEditingField(null);\n      if (onOptimisticUpdate) {\n        onOptimisticUpdate(field, value);\n        if (updateData.full_name) {\n          onOptimisticUpdate('full_name', updateData.full_name);\n        }\n      }\n      onProfileUpdate();\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to update profile\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleFullNameChange = async (value: string) => {\n    // Allow manual override of full_name\n    await handleFieldSave('full_name', value);\n  };\n\n  // Get manager name and filtered profiles\n  const filteredProfiles = profiles.filter(user => user.id !== profile.id);\n  const managerProfile = profiles.find(u => u.id === profile.manager);\n  const managerName = managerProfile ? (managerProfile.full_name || managerProfile.username) : 'Not assigned';\n\n  // Get departments and roles\n  const { userDepartments } = useUserDepartments(profile.id);\n  const { primaryRole } = useUserProfileRoles(profile.id);\n  const { data: physicalLocations, isLoading: locationsLoading } = useUserPhysicalLocations(profile.id);\n  \n  // Get primary department\n  const primaryDepartment = userDepartments?.find(dept => dept.is_primary);\n\n  const handleManagerChange = async (userId: string) => {\n    setManagerValue(userId);\n    await handleFieldSave('manager', userId);\n  };\n\n  // Handle location selection with both name and ID\n  const handleLocationSelect = async (locationName: string, selectedOption?: { value: string; label: string; id?: string }) => {\n    if (selectedOption?.id) {\n      // Update both location name and location_id\n      await handleFieldSave('location', locationName);\n      await handleFieldSave('location_id', selectedOption.id);\n    } else {\n      await handleFieldSave('location', locationName);\n    }\n  };\n\n  return (\n    <Card className=\"w-full\">\n      <CardContent className=\"p-6 lg:p-8\">\n        {/* 4-column layout: Avatar, Personal, Work, Status */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-3\">\n          {/* Column 1 - Avatar section */}\n          <div className=\"flex justify-center md:justify-start\">\n            <ProfileAvatar \n              avatarUrl={profile.avatar || profile.avatar_url}\n              firstName={profile.firstName || profile.first_name || ''}\n              lastName={profile.lastName || profile.last_name || ''}\n              profileId={profile.id}\n              onAvatarUpdate={(newAvatarUrl) => {\n                console.log('EditableProfileHeader: onAvatarUpdate called with:', newAvatarUrl);\n                console.log('EditableProfileHeader: onProfileUpdate type:', typeof onProfileUpdate);\n                console.log('EditableProfileHeader: onProfileUpdate value:', onProfileUpdate);\n                if (onOptimisticUpdate) {\n                  console.log('EditableProfileHeader: Calling onOptimisticUpdate');\n                  onOptimisticUpdate('avatar_url', newAvatarUrl);\n                }\n                console.log('EditableProfileHeader: Calling onProfileUpdate');\n                if (onProfileUpdate && typeof onProfileUpdate === 'function') {\n                  try {\n                    console.log('EditableProfileUpdate: About to invoke onProfileUpdate, function name:', onProfileUpdate.name);\n                    const result = onProfileUpdate();\n                    console.log('EditableProfileHeader: onProfileUpdate returned:', result);\n                    if (result && typeof result.then === 'function') {\n                      console.log('EditableProfileHeader: onProfileUpdate returned a promise, waiting...');\n                      result.then(() => {\n                        console.log('EditableProfileHeader: onProfileUpdate promise resolved');\n                      }).catch((err) => {\n                        console.error('EditableProfileHeader: onProfileUpdate promise rejected:', err);\n                      });\n                    }\n                    console.log('EditableProfileHeader: onProfileUpdate called successfully');\n                  } catch (error) {\n                    console.error('EditableProfileHeader: Error calling onProfileUpdate:', error);\n                  }\n                } else {\n                  console.error('EditableProfileHeader: onProfileUpdate is not a function!', onProfileUpdate);\n                }\n              }}\n            />\n          </div>\n          \n          {/* Column 2 - Personal info */}\n          <div className=\"space-y-2\">\n              <div className=\"text-center sm:text-left space-y-2\">\n                <div className=\"grid grid-cols-2 gap-2\">\n                  <EditableField\n                    value={profile.firstName || ''}\n                    fieldKey=\"firstName\"\n                    onSave={(field, value) => handleNameChange('firstName', value)}\n                    isEditing={editingField === 'firstName'}\n                    onEdit={handleFieldEdit}\n                    onCancel={handleFieldCancel}\n                    saving={saving}\n                    placeholder=\"First Name\"\n                    inputClassName=\"text-sm h-8\"\n                  />\n                  <EditableField\n                    value={profile.lastName || ''}\n                    fieldKey=\"lastName\"\n                    onSave={(field, value) => handleNameChange('lastName', value)}\n                    isEditing={editingField === 'lastName'}\n                    onEdit={handleFieldEdit}\n                    onCancel={handleFieldCancel}\n                    saving={saving}\n                    placeholder=\"Last Name\"\n                    inputClassName=\"text-sm h-8\"\n                  />\n                </div>\n                <EditableField\n                  value={profile.full_name || `${profile.firstName} ${profile.lastName}`.trim()}\n                  fieldKey=\"full_name\"\n                  onSave={(field, value) => handleFullNameChange(value)}\n                  isEditing={editingField === 'full_name'}\n                  onEdit={handleFieldEdit}\n                  onCancel={handleFieldCancel}\n                  saving={saving}\n                  placeholder=\"Full Name (Auto-generated, editable)\"\n                  className=\"flex-1\"\n                  inputClassName=\"text-2xl font-bold h-10\"\n                />\n              </div>\n              \n              {profile.account?.username && (\n                <div className=\"flex items-center gap-2 text-sm\">\n                  <User className=\"h-4 w-4 text-muted-foreground\" />\n                  <span className=\"text-foreground\">{profile.account.username}</span>\n                </div>\n              )}\n              \n              {profile.account?.employeeId && (\n                <div className=\"flex items-center gap-2 text-sm\">\n                  <Hash className=\"h-4 w-4 text-muted-foreground\" />\n                  <span className=\"text-foreground\">{profile.account.employeeId}</span>\n                </div>\n              )}\n              \n              <div className=\"flex items-center gap-2 text-sm\">\n                <Phone className=\"h-4 w-4 text-muted-foreground\" />\n                <EditableField\n                  value={profile.phone || 'Not provided'}\n                  fieldKey=\"phone\"\n                  placeholder=\"Phone number\"\n                  onSave={handleFieldSave}\n                  isEditing={editingField === 'phone'}\n                  onEdit={handleFieldEdit}\n                  onCancel={handleFieldCancel}\n                  saving={saving}\n                  inputClassName=\"h-6 text-sm\"\n                />\n              </div>\n            </div>\n\n          {/* Column 3 - Work info */}\n          <div className=\"space-y-2\">\n              <div className=\"flex items-center gap-2 text-sm\">\n                <Network className=\"h-4 w-4 text-muted-foreground\" />\n                {editingField === 'manager' ? (\n                  <Select\n                    value={managerValue}\n                    onValueChange={handleManagerChange}\n                  >\n                    <SelectTrigger className=\"w-full\">\n                      <SelectValue placeholder=\"Select manager\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {filteredProfiles.map((user) => (\n                        <SelectItem key={user.id} value={user.id}>\n                          {user.full_name || user.username || 'Unnamed User'}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                ) : (\n                  <EditableField\n                    value={managerName}\n                    fieldKey=\"manager\"\n                    onSave={handleFieldSave}\n                    isEditing={editingField === 'manager'}\n                    onEdit={handleFieldEdit}\n                    onCancel={handleFieldCancel}\n                    saving={saving}\n                    inputClassName=\"text-sm h-6\"\n                  />\n                )}\n              </div>\n              \n              <div className=\"flex items-center gap-2 text-sm\">\n                <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n                <EditableField\n                  value={profile.location || 'Not specified'}\n                  fieldKey=\"location\"\n                  placeholder=\"Select location\"\n                  onSave={handleFieldSave}\n                  onSelectChange={handleLocationSelect}\n                  isEditing={editingField === 'location'}\n                  onEdit={handleFieldEdit}\n                  onCancel={handleFieldCancel}\n                  saving={saving}\n                  type=\"select\"\n                  asyncOptions={physicalLocations}\n                  isLoading={locationsLoading}\n                  inputClassName=\"h-6 text-sm w-48\"\n                  locationId={profile.locationId}\n                />\n              </div>\n\n              {/* Primary Department and Role */}\n              <div className=\"flex items-center gap-4 w-full\">\n                <div className=\"flex items-center gap-2\">\n                  <Star className=\"h-3 w-3 fill-current text-yellow-500\" />\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  {primaryDepartment && (\n                    <Badge variant=\"default\">\n                      {primaryDepartment.department_name}\n                    </Badge>\n                  )}\n                  {primaryRole && (\n                    <Badge variant=\"default\">\n                      {primaryRole.role_name}\n                    </Badge>\n                  )}\n                </div>\n              </div>\n            </div>\n\n          {/* Column 4 - Status info */}\n          <div className=\"space-y-2\">\n              <ProfileContactInfo\n                startDate={profile.startDate}\n                userId={profile.id}\n                status={profile.account?.status}\n                accessLevel={profile.account?.accessLevel}\n                lastLogin={profile.account?.lastLogin}\n                passwordLastChanged={profile.account?.passwordLastChanged}\n                twoFactorEnabled={profile.account?.twoFactorEnabled}\n              />\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default EditableProfileHeader;\n","import React, { useEffect, useState, useMemo } from \"react\";\nimport { useAuth } from 'staysecure-auth';\nimport { useProfile } from \"@/hooks/useProfile\";\nimport { useUserAssets } from \"@/hooks/useUserAssets\";\nimport { useUserRole } from \"@/hooks/useUserRole\";\nimport { Loader2, LogOut } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { toast } from \"@/components/ui/use-toast\";\nimport EditableProfileHeader from \"./EditableProfileHeader\";\nimport PersonaDetailsTabs from \"./PersonaDetailsTabs\";\n\n// Define PersonProfile interface to replace the one from deleted mockData.ts\nexport interface PersonProfile {\n  id: string;\n  full_name: string;\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone: string;\n  location: string;\n  avatar: string;\n  role: string;\n  department: string;\n  manager: string;\n  startDate: string;\n  account: {\n    username: string;\n    employeeId: string;\n    status: string;\n    accessLevel: string;\n    lastLogin: string;\n    passwordLastChanged: string;\n    twoFactorEnabled: boolean;\n  };\n  hardware: Array<{\n    id: string;\n    type: string;\n    model: string;\n    serialNumber: string;\n    status: string;\n    assignedDate: string;\n    manufacturer: string;\n    osEdition: string;\n    osVersion: string;\n  }>;\n  software: Array<{\n    id: string;\n    name: string;\n    role_account_type: string;\n    expiryDate: string | null;\n    lastUsed: string | null;\n  }>;\n  certificates: Array<{\n    name: string;\n    issuedBy: string;\n    dateAcquired: string;\n    expiryDate: string;\n    credentialId: string;\n    status: string;\n    org_cert?: boolean;\n    type?: string;\n  }>;\n}\n\nconst PersonaProfile: React.FC = () => {\n  const { user, signOut } = useAuth();\n  const { hasAdminAccess } = useUserRole();\n  const { profile, loading: profileLoading, refetch: refetchProfile } = useProfile();\n  const { hardware, software, certificates, loading: assetsLoading, refetch: refetchAssets } = useUserAssets(user?.id);\n  \n  // Extract user email to prevent infinite re-renders\n  const userEmail = user?.email;\n  \n  // ALL HOOKS MUST BE CALLED BEFORE ANY EARLY RETURNS\n  const [optimisticData, setOptimisticData] = useState<PersonProfile | null>(null);\n\n  // Memoize personaData to prevent infinite re-renders - MUST be called before any early returns\n  const personaData = useMemo(() => ({\n    id: profile?.id || '',\n    full_name: profile?.full_name || '',\n    firstName: profile?.first_name || '',  // Use actual first_name from DB\n    lastName: profile?.last_name || '',    // Use actual last_name from DB\n    email: userEmail || '',\n    phone: profile?.phone || 'Not provided',\n    location: profile?.location || 'Not specified',\n    avatar: profile?.avatar_url || '',\n    role: profile?.role || 'Employee',\n    department: profile?.department || 'General',\n    manager: profile?.manager || 'Not assigned',\n    startDate: profile?.start_date || profile?.created_at || '',\n    account: {\n      username: profile?.username || 'Not set',\n      employeeId: profile?.employee_id || 'Not assigned',\n      status: profile?.status || 'Active',\n      accessLevel: profile?.access_level || 'User',\n      lastLogin: profile?.last_login || profile?.created_at || '',\n      passwordLastChanged: profile?.password_last_changed || profile?.created_at || '',\n      twoFactorEnabled: profile?.two_factor_enabled || false,\n    },\n    hardware: (hardware || []).map(h => ({\n      id: h.id,\n      type: h.type,\n      model: h.model,\n      serialNumber: h.serial_number,\n      status: h.status,\n      assignedDate: h.assigned_date,\n      manufacturer: h.manufacturer || '',\n      osEdition: h.os_edition || '',\n      osVersion: h.os_version || '',\n    })),\n    software: (software || []).map(s => ({\n      id: s.id,\n      name: s.name,\n      role_account_type: s.role_account_type,\n      expiryDate: s.expiryDate,\n      lastUsed: s.lastUsed,\n    })),\n    certificates: (certificates || []).map(c => {\n      const mapped = {\n        name: c.name,\n        issuedBy: c.issued_by,\n        dateAcquired: c.date_acquired,\n        expiryDate: c.expiry_date,\n        credentialId: c.credential_id,\n        status: c.status,\n        org_cert: c.org_cert !== undefined ? c.org_cert : false, // Preserve false, default to false if undefined\n        type: c.type, // Include type for display\n      };\n      return mapped;\n    }),\n  }), [profile, hardware, software, certificates, userEmail]);\n\n  const handleProfileUpdate = async () => {\n    console.log('PersonaProfile: handleProfileUpdate called');\n    // Clear optimistic data first so fresh data will be used\n    setOptimisticData(null);\n    console.log('PersonaProfile: Cleared optimistic data, refetching profile...');\n    // Refetch both profile and assets data to ensure everything is fresh\n    await refetchProfile();\n    console.log('PersonaProfile: Profile refetched');\n    refetchAssets();\n    console.log('PersonaProfile: Assets refetch triggered');\n  };\n\n  if (profileLoading || assetsLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\n      </div>\n    );\n  }\n\n  if (!profile) {\n    return (\n      <div className=\"text-center py-8\">\n        <p className=\"text-muted-foreground\">No profile found. Please update your profile information.</p>\n      </div>\n    );\n  }\n\n  // Handler for optimistic update\n  const handleOptimisticUpdate = (field: string, value: string) => {\n    setOptimisticData(prev => {\n      const baseData = prev || personaData;\n      const updated = { ...baseData };\n      // Map avatar_url to avatar field\n      if (field === 'avatar_url') {\n        updated.avatar = value;\n      } else if (field in updated) {\n        updated[field] = value;\n      } else if (updated.account && field in updated.account) {\n        updated.account = { ...updated.account, [field]: value };\n      }\n      return updated;\n    });\n  };\n\n  const handleSignOut = async () => {\n    try {\n      await signOut();\n      toast({\n        title: \"Signed out successfully\",\n        description: \"You have been signed out of your account.\",\n      });\n    } catch (error: any) {\n      toast({\n        title: \"Error signing out\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const displayData = optimisticData || personaData;\n\n  return (\n    <div className=\"space-y-6\">\n      {!hasAdminAccess && (\n        <div className=\"flex justify-between items-center\">\n          <h1 className=\"text-3xl font-bold\">My Profile</h1>\n        </div>\n      )}\n      <EditableProfileHeader \n        profile={displayData} \n        onProfileUpdate={() => {\n          console.log('PersonaProfile: onProfileUpdate prop called directly');\n          handleProfileUpdate();\n        }} \n        onOptimisticUpdate={handleOptimisticUpdate} \n      />\n      <PersonaDetailsTabs profile={displayData} userId={user?.id || ''} onUpdate={handleProfileUpdate} />\n    </div>\n  );\n};\n\nexport default PersonaProfile;\n","\nimport React from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useUserProfiles } from '@/hooks/useUserProfiles';\nimport { useUserAssets } from '@/hooks/useUserAssets';\nimport { Button } from '@/components/ui/button';\nimport { ArrowLeft, Loader2 } from 'lucide-react';\nimport EditableProfileHeader from '../profile/EditableProfileHeader';\nimport PersonaDetailsTabs from '../profile/PersonaDetailsTabs';\n\nconst UserDetailView: React.FC = () => {\n  const { userId } = useParams<{ userId: string }>();\n  const navigate = useNavigate();\n  const { profiles, loading: profilesLoading } = useUserProfiles();\n  const { hardware, software, certificates, loading: assetsLoading } = useUserAssets(userId);\n\n  // Build personaData from the latest userProfile\n  const buildPersonaData = (profileObj: any) => ({\n    id: profileObj.id,\n    full_name: profileObj.full_name || '',  // Add this line\n    firstName: profileObj.first_name || '',  // Use actual first_name from DB\n    lastName: profileObj.last_name || '',    // Use actual last_name from DB\n    email: profileObj.email || '',\n    phone: profileObj.phone || 'Not provided',\n    location: profileObj.location || 'Not specified',\n    avatar: profileObj.avatar_url || '',\n    role: profileObj.role || 'Employee',\n    department: profileObj.department || 'General',\n    manager: profileObj.manager || 'Not assigned',\n    startDate: profileObj.start_date || profileObj.created_at,\n    enrolled_in_learn: profileObj.enrolled_in_learn || false,\n    account: {\n      username: profileObj.username || 'Not set',\n      employeeId: profileObj.employee_id || 'Not assigned',\n      status: profileObj.status || 'Active',\n      accessLevel: profileObj.access_level || 'User',\n      lastLogin: profileObj.last_login || profileObj.created_at,\n      passwordLastChanged: profileObj.password_last_changed || profileObj.created_at,\n      twoFactorEnabled: profileObj.two_factor_enabled || false,\n    },\n    hardware: hardware.map((h: any) => ({\n      id: h.id,\n      type: h.type,\n      model: h.model,\n      serialNumber: h.serial_number,\n      status: h.status,\n      assignedDate: h.assigned_date,\n      manufacturer: h.manufacturer || '',\n      osEdition: h.os_edition || '',\n      osVersion: h.os_version || '',\n    })),\n    software: software.map((s: any) => ({\n      name: s.name,\n      role_account_type: s.role_account_type,\n      expiryDate: s.expiryDate,\n      lastUsed: s.lastUsed,\n    })),\n    certificates: certificates.map((c: any) => ({\n      type: c.type || 'Certificate',\n      name: c.name,\n      issuedBy: c.issued_by,\n      dateAcquired: c.date_acquired,\n      expiryDate: c.expiry_date,\n      credentialId: c.credential_id,\n      status: c.status,\n      org_cert: c.org_cert,\n    })),\n  });\n\n  // Hooks at the top\n  const [personaData, setPersonaData] = React.useState<any>(null);\n\n  React.useEffect(() => {\n    const userProfile = profiles.find((p: any) => p.id === userId);\n    if (userProfile) {\n      setPersonaData(buildPersonaData(userProfile));\n    }\n  }, [profiles, userId, hardware, software, certificates]);\n\n  // Handler for optimistic update\n  const handleOptimisticUpdate = (field: string, value: string) => {\n    setPersonaData((prev: any) => {\n      const updated = { ...prev };\n      if (field in updated) {\n        updated[field] = value;\n      } else if (updated.account && field in updated.account) {\n        updated.account = { ...updated.account, [field]: value };\n      }\n      return updated;\n    });\n  };\n\n  const handleProfileUpdate = () => {\n    // For admin view, we might want to refresh the data but not allow editing\n  };\n\n  const handleBackToUsers = () => {\n    // Navigate to admin panel with organisation tab active\n    navigate('/admin', { state: { activeTab: 'organisation' } });\n  };\n\n  // Loading and error UI\n  if (profilesLoading || assetsLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\n      </div>\n    );\n  }\n\n  const userProfile = profiles.find((p: any) => p.id === userId);\n\n  if (!userProfile) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-screen gap-4\">\n        <p className=\"text-muted-foreground\">User not found</p>\n        <Button onClick={() => navigate('/admin')} variant=\"outline\">\n          <ArrowLeft className=\"h-4 w-4 mr-2\" />\n          Back to Admin\n        </Button>\n      </div>\n    );\n  }\n\n  if (!personaData) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-6xl mx-auto py-6 px-4 space-y-6\">\n      <div className=\"flex items-center gap-4 mb-6\">\n        <Button onClick={handleBackToUsers} variant=\"outline\" size=\"icon\">\n          <ArrowLeft className=\"h-4 w-4\" />\n        </Button>\n        <h1 className=\"text-2xl font-bold\">User Profile: {userProfile.full_name || 'Unnamed User'}</h1>\n      </div>\n      <EditableProfileHeader \n        profile={personaData} \n        onProfileUpdate={handleProfileUpdate}\n        onOptimisticUpdate={handleOptimisticUpdate}\n      />\n      <PersonaDetailsTabs profile={personaData} userId={userId!} />\n    </div>\n  );\n};\n\nexport default UserDetailView;\n","\nimport React from \"react\";\nimport { PersonProfile } from \"../profile/PersonaProfile\";\nimport { Award, Calendar, Building, FileText } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface CertificatesProps {\n  profile: PersonProfile;\n}\n\nconst Certificates: React.FC<CertificatesProps> = ({ profile }) => {\n  const { certificates } = profile;\n\n  const formatDate = (dateString: string | null) => {\n    if (!dateString) return \"No expiry\";\n    return new Date(dateString).toLocaleDateString();\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'Valid': return 'bg-green-500';\n      case 'Expired': return 'bg-red-500';\n      case 'Pending': return 'bg-yellow-500';\n      default: return 'bg-blue-500';\n    }\n  };\n\n  const getTypeIcon = (type?: string) => {\n    return type === 'Document' ? <FileText className=\"h-5 w-5 text-primary flex-shrink-0\" /> : <Award className=\"h-5 w-5 text-primary flex-shrink-0\" />;\n  };\n\n  const getTypeColor = (type?: string) => {\n    return type === 'Document' ? 'bg-blue-500' : 'bg-purple-500';\n  };\n\n  // Filter certificates to only show those where org_cert is false\n  const filteredCertificates = certificates.filter(cert => \n    (cert as any).org_cert === false\n  );\n\n  return (\n    <div className=\"space-y-4 animate-fade-in\">\n      {filteredCertificates.length === 0 ? (\n        <p className=\"text-muted-foreground text-center py-8\">No certificates yet</p>\n      ) : (\n        <div className=\"space-y-4\">\n          {filteredCertificates.map((cert, index) => (\n            <div key={index} className=\"border rounded-lg p-4\">\n              {/* Top line with name, issuer, ID, type */}\n              <div className=\"flex items-center justify-between gap-3 mb-3\">\n                <div className=\"flex items-center gap-3 min-w-0 flex-1\">\n                  {getTypeIcon((cert as any).type)}\n                  <h3 className=\"font-semibold text-lg truncate\">{cert.name}</h3>\n                </div>\n                \n                {/* Right-aligned issuer, ID, type section */}\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"flex items-center gap-1\">\n                    <Building className=\"h-4 w-4 text-muted-foreground\" />\n                    <span className=\"text-base font-medium text-foreground\">{cert.issuedBy}</span>\n                  </div>\n                  {cert.credentialId && (\n                    <span className=\"text-base font-medium text-muted-foreground\">\n                      ID: {cert.credentialId}\n                    </span>\n                  )}\n                  <Badge className={`${getTypeColor((cert as any).type)} text-white text-sm px-2 py-1 flex-shrink-0`}>\n                    {(cert as any).type || 'Certificate'}\n                  </Badge>\n                </div>\n              </div>\n              \n              {/* Bottom line with dates and status */}\n              <div className=\"grid grid-cols-3 gap-4 text-sm ml-8\">\n                <div className=\"flex items-center gap-2\">\n                  <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                  <span className=\"text-muted-foreground\">Issued:</span>\n                  <span className=\"font-medium\">{formatDate(cert.dateAcquired)}</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                  <span className=\"text-muted-foreground\">Expires:</span>\n                  <span className=\"font-medium\">{formatDate(cert.expiryDate)}</span>\n                </div>\n                <div className=\"flex items-center justify-end\">\n                  <Badge className={`${getStatusColor(cert.status)} text-white`}>{cert.status}</Badge>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Certificates;\n","\nimport React, { useState } from 'react';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useUserProfiles } from '@/hooks/useUserProfiles';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { toast } from '@/components/ui/use-toast';\nimport { Loader2, X, Plus } from 'lucide-react';\n\ninterface AddPhysicalLocationDialogProps {\n  isOpen: boolean;\n  onOpenChange: (open: boolean) => void;\n  prefilledUser?: {\n    full_name: string;\n    email: string;\n    department: string;\n    role: string;\n  };\n  onSuccess?: () => void;\n}\n\nconst AddPhysicalLocationDialog: React.FC<AddPhysicalLocationDialogProps> = ({\n  isOpen,\n  onOpenChange,\n  prefilledUser,\n  onSuccess,\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [selectedUserId, setSelectedUserId] = useState('');\n  const { profiles } = useUserProfiles();\n  \n  const [formData, setFormData] = useState({\n    full_name: prefilledUser?.full_name || '',\n    email: prefilledUser?.email || '',\n    department: prefilledUser?.department || '',\n    role_account_type: prefilledUser?.role || '',\n    location: '',\n    access_purpose: '',\n    date_access_created: new Date().toISOString().split('T')[0],\n    date_access_revoked: '',\n    status: 'Active',\n  });\n\n  const handleUserSelection = (userId: string) => {\n    setSelectedUserId(userId);\n    if (userId === 'none') {\n      // Clear user data when \"Create without user\" is selected\n      setFormData(prev => ({\n        ...prev,\n        full_name: '',\n        email: '',\n        department: '',\n        role_account_type: '',\n      }));\n    } else {\n      const selectedUser = profiles.find(profile => profile.id === userId);\n      if (selectedUser) {\n        setFormData(prev => ({\n          ...prev,\n          full_name: selectedUser.full_name || '',\n          email: selectedUser.email || '',\n          department: selectedUser.department || '',\n          role_account_type: selectedUser.role || '',\n        }));\n      }\n    }\n  };\n\n  const resetForm = () => {\n    setSelectedUserId('');\n    setFormData({\n      full_name: prefilledUser?.full_name || '',\n      email: prefilledUser?.email || '',\n      department: prefilledUser?.department || '',\n      role_account_type: prefilledUser?.role || '',\n      location: '',\n      access_purpose: '',\n      date_access_created: new Date().toISOString().split('T')[0],\n      date_access_revoked: '',\n      status: 'Active',\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    \n    try {\n      // Only insert if we have at least a location and access purpose\n      if (!formData.location || !formData.access_purpose) {\n        throw new Error('Location and Access Purpose are required');\n      }\n\n      const insertData = {\n        full_name: formData.full_name || 'Unassigned',\n        user_id: 'ae5c8c73-e0c3-4a86-9c0d-123456789abc', // Placeholder user ID - should be dynamic\n        location_id: formData.location, // Assuming this is already a UUID\n        access_purpose: formData.access_purpose,\n        date_access_created: formData.date_access_created,\n        date_access_revoked: formData.date_access_revoked || null,\n        status: formData.status,\n      };\n\n      const { error } = await supabase\n        .from('physical_location_access')\n        .insert([insertData]);\n\n      if (error) throw error;\n\n      toast({\n        title: \"Physical location access added\",\n        description: formData.full_name === 'Unassigned' \n          ? \"Location access record created without user assignment.\"\n          : \"Physical location access has been successfully added.\",\n      });\n      \n      onOpenChange(false);\n      resetForm();\n      onSuccess?.();\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Add Physical Location Access</DialogTitle>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            {!prefilledUser && (\n              <div className=\"col-span-2\">\n                <Label htmlFor=\"user_select\">Assign to User (Optional)</Label>\n                <Select value={selectedUserId} onValueChange={handleUserSelection}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select a user or create without assignment\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"none\">Create without user assignment</SelectItem>\n                    {profiles.map((profile) => (\n                      <SelectItem key={profile.id} value={profile.id}>\n                        {profile.full_name || 'No name'} ({profile.email || profile.username || 'No email'})\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            )}\n\n            {(selectedUserId && selectedUserId !== 'none') && (\n              <div className=\"col-span-2 p-3 bg-gray-50 rounded-lg\">\n                <h4 className=\"font-medium mb-2\">Selected User Details:</h4>\n                <p><strong>Name:</strong> {formData.full_name}</p>\n                <p><strong>Email:</strong> {formData.email}</p>\n                <p><strong>Department:</strong> {formData.department || 'Not specified'}</p>\n                <p><strong>Role:</strong> {formData.role_account_type || 'Not specified'}</p>\n              </div>\n            )}\n\n            <div>\n              <Label htmlFor=\"full_name\">Full Name</Label>\n              <Input\n                id=\"full_name\"\n                value={formData.full_name}\n                onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}\n                placeholder=\"Leave empty for unassigned\"\n                disabled={!!prefilledUser || (selectedUserId && selectedUserId !== 'none')}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"email\">Email</Label>\n              <Input\n                id=\"email\"\n                value={formData.email}\n                onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                placeholder=\"Leave empty for unassigned\"\n                disabled={!!prefilledUser || (selectedUserId && selectedUserId !== 'none')}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"department\">Department</Label>\n              <Input\n                id=\"department\"\n                value={formData.department}\n                onChange={(e) => setFormData({ ...formData, department: e.target.value })}\n                disabled={!!prefilledUser || (selectedUserId && selectedUserId !== 'none')}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"role_account_type\">Role/Account Type</Label>\n              <Input\n                id=\"role_account_type\"\n                value={formData.role_account_type}\n                onChange={(e) => setFormData({ ...formData, role_account_type: e.target.value })}\n                disabled={!!prefilledUser || (selectedUserId && selectedUserId !== 'none')}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"location\">Location *</Label>\n              <Input\n                id=\"location\"\n                value={formData.location}\n                onChange={(e) => setFormData({ ...formData, location: e.target.value })}\n                placeholder=\"e.g., Building A - Floor 3, Server Room\"\n                required\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"access_purpose\">Access Purpose *</Label>\n              <Input\n                id=\"access_purpose\"\n                value={formData.access_purpose}\n                onChange={(e) => setFormData({ ...formData, access_purpose: e.target.value })}\n                placeholder=\"e.g., Maintenance, Security, Operations\"\n                required\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"date_access_created\">Date Access Created *</Label>\n              <Input\n                id=\"date_access_created\"\n                type=\"date\"\n                value={formData.date_access_created}\n                onChange={(e) => setFormData({ ...formData, date_access_created: e.target.value })}\n                required\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"date_access_revoked\">Date Access Revoked</Label>\n              <Input\n                id=\"date_access_revoked\"\n                type=\"date\"\n                value={formData.date_access_revoked}\n                onChange={(e) => setFormData({ ...formData, date_access_revoked: e.target.value })}\n              />\n            </div>\n            <div className=\"col-span-2\">\n              <Label htmlFor=\"status\">Status</Label>\n              <Select value={formData.status} onValueChange={(value) => setFormData({ ...formData, status: value })}>\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"Active\">Active</SelectItem>\n                  <SelectItem value=\"Inactive\">Inactive</SelectItem>\n                  <SelectItem value=\"Revoked\">Revoked</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div className=\"flex gap-2 justify-end\">\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)} size=\"icon\">\n              <X className=\"h-4 w-4\" />\n            </Button>\n            <Button type=\"submit\" disabled={loading} size=\"icon\">\n              {loading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Plus className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AddPhysicalLocationDialog;\n","import React from \"react\";\nimport { Phone, MapPin, Star, User, Hash } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport EditableField from \"./EditableField\";\nimport { useUserDepartments } from \"@/hooks/useUserDepartments\";\nimport { useUserProfileRoles } from \"@/hooks/useUserProfileRoles\";\nimport { useUserPhysicalLocations } from \"@/hooks/useUserPhysicalLocations\";\nimport { UserRoleField } from \"./UserRoleField\";\n\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\n\ninterface ProfileBasicInfoProps {\n  firstName: string;\n  lastName: string;\n  manager: string;\n  phone: string;\n  location: string;\n  locationId?: string;\n  username?: string;\n  employeeId?: string;\n  editingField: string | null;\n  onEdit: (field: string) => void;\n  onSave: (field: string, value: string) => Promise<void>;\n  onCancel: () => void;\n  saving: boolean;\n  profiles: { id: string; full_name: string; username: string }[];\n  currentUserId: string;\n  userId: string; // Add userId for multiple roles\n}\n\nconst ProfileBasicInfo: React.FC<ProfileBasicInfoProps> = ({\n  firstName,\n  lastName,\n  manager,\n  phone,\n  location,\n  locationId,\n  username,\n  employeeId,\n  editingField,\n  onEdit,\n  onSave,\n  onCancel,\n  saving,\n  profiles,\n  currentUserId,\n  userId\n}) => {\n  console.log('ProfileBasicInfo rendering with userId:', userId, 'currentUserId:', currentUserId);\n  const { userDepartments } = useUserDepartments(userId);\n  const { primaryRole } = useUserProfileRoles(userId);\n  const { data: physicalLocations, isLoading: locationsLoading } = useUserPhysicalLocations(userId);\n  \n  // Get primary department\n  const primaryDepartment = userDepartments.find(dept => dept.is_primary);\n  \n  const handleNameSave = async (fieldKey: string, value: string) => {\n    await onSave('full_name', value);\n  };\n  \n  const [managerValue, setManagerValue] = React.useState(manager);\n  React.useEffect(() => { setManagerValue(manager); }, [manager, editingField]);\n  \n  const handleManagerChange = async (userId: string) => {\n    setManagerValue(userId);\n    await onSave('manager', userId);\n  };\n  \n  // Handle location selection with both name and ID\n  const handleLocationSelect = async (locationName: string, selectedOption?: { value: string; label: string; id?: string }) => {\n    if (selectedOption?.id) {\n      // Save both location name and location_id \n      await onSave('location', locationName);\n      // Note: We would need to extend onSave to handle multiple fields or create a separate handler\n      // For now, we'll save the location name and the parent component should handle location_id\n    } else {\n      await onSave('location', locationName);\n    }\n  };\n  \n  const filteredProfiles = profiles.filter(user => user.id !== currentUserId);\n  const managerProfile = profiles.find(u => u.id === manager);\n  const managerName = managerProfile ? (managerProfile.full_name || managerProfile.username) : 'Not assigned';\n\n  return (\n    <div className=\"flex-1\">\n      {/* Name */}\n      <div className=\"flex items-center gap-2 mb-4\">\n        <EditableField\n          value={`${firstName} ${lastName}`}\n          fieldKey=\"full_name\"\n          onSave={handleNameSave}\n          isEditing={editingField === 'full_name'}\n          onEdit={onEdit}\n          onCancel={onCancel}\n          saving={saving}\n          className=\"flex-1\"\n          inputClassName=\"text-2xl font-bold h-10\"\n        />\n      </div>\n      \n      {/* 2-column layout */}\n      <div className=\"grid grid-cols-1 md:grid-cols-[1fr_2fr] gap-8 lg:gap-12 w-full\">\n        {/* Left column - Personal info: Email, Employee ID, Phone */}\n        <div className=\"space-y-2 w-full\">\n          {username && (\n            <div className=\"flex items-center gap-2 text-sm\">\n              <User className=\"h-4 w-4 text-muted-foreground\" />\n              <span className=\"text-foreground\">{username}</span>\n            </div>\n          )}\n          \n          {employeeId && (\n            <div className=\"flex items-center gap-2 text-sm\">\n              <Hash className=\"h-4 w-4 text-muted-foreground\" />\n              <span className=\"text-foreground\">{employeeId}</span>\n            </div>\n          )}\n          \n          <div className=\"flex items-center gap-2 text-sm\">\n            <Phone className=\"h-4 w-4 text-muted-foreground\" />\n            <EditableField\n              value={phone || 'Not provided'}\n              fieldKey=\"phone\"\n              placeholder=\"Phone number\"\n              onSave={onSave}\n              isEditing={editingField === 'phone'}\n              onEdit={onEdit}\n              onCancel={onCancel}\n              saving={saving}\n              inputClassName=\"h-6 text-sm\"\n            />\n          </div>\n        </div>\n        \n        {/* Middle column - Work info: Reports to, Location, Department/Role */}\n        <div className=\"space-y-2 w-full\">\n          {editingField === 'manager' ? (\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-sm text-muted-foreground\">Reports to:</span>\n              <Select\n                value={managerValue}\n                onValueChange={handleManagerChange}\n              >\n                <SelectTrigger className=\"w-full\">\n                  <SelectValue placeholder=\"Select manager\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {filteredProfiles.map((user) => (\n                    <SelectItem key={user.id} value={user.id}>\n                      {user.full_name || user.username || 'Unnamed User'}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          ) : (\n            <EditableField\n              value={managerName}\n              fieldKey=\"manager\"\n              label=\"Reports to:\"\n              onSave={onSave}\n              isEditing={editingField === 'manager'}\n              onEdit={onEdit}\n              onCancel={onCancel}\n              saving={saving}\n              inputClassName=\"text-sm h-6\"\n            />\n          )}\n          \n          <div className=\"flex items-center gap-2 text-sm\">\n            <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n            <EditableField\n              value={location || 'Not specified'}\n              fieldKey=\"location\"\n              placeholder=\"Select location\"\n              onSave={onSave}\n              onSelectChange={handleLocationSelect}\n              isEditing={editingField === 'location'}\n              onEdit={onEdit}\n              onCancel={onCancel}\n              saving={saving}\n              type=\"select\"\n              asyncOptions={physicalLocations}\n              isLoading={locationsLoading}\n              inputClassName=\"h-6 text-sm w-48\"\n              locationId={locationId}\n            />\n          </div>\n          \n          {/* System Role */}\n          <div className=\"flex items-center gap-2 text-sm\">\n            <span className=\"text-muted-foreground\">System Role:</span>\n            <UserRoleField userId={userId} />\n          </div>\n          \n          {/* Primary Department and Role */}\n          <div className=\"flex items-center gap-4 w-full\">\n            {primaryDepartment && (\n              <div className=\"flex items-center gap-1\">\n                <Star className=\"h-3 w-3 fill-current text-yellow-500\" />\n                <Badge variant=\"default\">\n                  {primaryDepartment.department_name}\n                </Badge>\n              </div>\n            )}\n            \n            {primaryRole && (\n              <div className=\"flex items-center gap-1\">\n                <Star className=\"h-3 w-3 fill-current text-yellow-500\" />\n                <Badge variant=\"default\">\n                  {primaryRole.role_name}\n                </Badge>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProfileBasicInfo;\n","import React, { useState } from 'react';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Plus, X } from 'lucide-react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport { toast } from '@/components/ui/use-toast';\n\ninterface MultipleRolesFieldProps {\n  userId: string;\n  departmentValue?: string;\n  isEditing: boolean;\n  onEdit: () => void;\n  onCancel: () => void;\n}\n\nconst MultipleRolesField: React.FC<MultipleRolesFieldProps> = ({\n  userId,\n  departmentValue,\n  isEditing,\n  onEdit,\n  onCancel\n}) => {\n  const [isAddingRole, setIsAddingRole] = useState(false);\n  const [selectedRole, setSelectedRole] = useState('');\n  const queryClient = useQueryClient();\n\n  // Fetch user's current roles\n  const { data: userRoles, isLoading: rolesLoading } = useQuery({\n    queryKey: ['user-roles', userId],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('user_profile_roles')\n        .select(`\n          *,\n          roles (\n            name\n          )\n        `)\n        .eq('user_id', userId)\n        .order('is_primary', { ascending: false })\n        .order('roles.name');\n      \n      if (error) throw error;\n      \n      // Transform data to match expected interface\n      const transformedData = (data || []).map(item => ({\n        id: item.id,\n        user_id: item.user_id,\n        role_id: item.role_id,\n        role_name: item.roles?.name || '',\n        is_primary: item.is_primary,\n        assigned_at: item.assigned_at,\n        assigned_by: item.assigned_by,\n        pairing_id: item.pairing_id,\n      }));\n      \n      return transformedData;\n    },\n    enabled: !!userId,\n  });\n\n  // Fetch available roles\n  const { data: availableRoles } = useQuery({\n    queryKey: ['available-roles', departmentValue],\n    queryFn: async () => {\n      let query = supabase\n        .from('roles')\n        .select('role_id, name, department_id, departments(name)')\n        .eq('is_active', true);\n\n      if (departmentValue && departmentValue !== '') {\n        const { data: department } = await supabase\n          .from('departments')\n          .select('id')\n          .eq('name', departmentValue)\n          .maybeSingle();\n        \n        if (department) {\n          // Show roles that either belong to the selected department OR have no department (designation roles)\n          query = query.or(`department_id.eq.${department.id},department_id.is.null`);\n        } else {\n          // If department not found, only show designation roles\n          query = query.is('department_id', null);\n        }\n      }\n      // If no department filter, show all roles\n\n      const { data, error } = await query.order('name');\n      if (error) throw error;\n      return data;\n    },\n  });\n\n  // Add role mutation\n  const addRoleMutation = useMutation({\n    mutationFn: async ({ roleId, isPrimary }: { roleId: string; isPrimary: boolean }) => {\n      const { error } = await supabase\n        .from('user_profile_roles')\n        .insert({\n          user_id: userId,\n          role_id: roleId,\n          is_primary: isPrimary,\n          assigned_by: userId // In a real app, this would be the current admin user\n        });\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['user-roles', userId] });\n      setSelectedRole('');\n      setIsAddingRole(false);\n      toast({\n        title: \"Role added\",\n        description: \"The role has been successfully added.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to add role\",\n        variant: \"destructive\",\n      });\n    }\n  });\n\n  // Remove role mutation\n  const removeRoleMutation = useMutation({\n    mutationFn: async (roleId: string) => {\n      const { error } = await supabase\n        .from('user_profile_roles')\n        .delete()\n        .eq('id', roleId);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['user-roles', userId] });\n      toast({\n        title: \"Role removed\",\n        description: \"The role has been successfully removed.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to remove role\",\n        variant: \"destructive\",\n      });\n    }\n  });\n\n  // Set primary role mutation\n  const setPrimaryRoleMutation = useMutation({\n    mutationFn: async (roleId: string) => {\n      // First, unset all primary roles for this user\n      await supabase\n        .from('user_profile_roles')\n        .update({ is_primary: false })\n        .eq('user_id', userId);\n\n      // Then set the selected role as primary\n      const { error } = await supabase\n        .from('user_profile_roles')\n        .update({ is_primary: true })\n        .eq('id', roleId);\n      \n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['user-roles', userId] });\n      toast({\n        title: \"Primary role updated\",\n        description: \"The primary role has been updated.\",\n      });\n    }\n  });\n\n  const handleAddRole = () => {\n    if (!selectedRole) return;\n    \n    const isPrimary = !userRoles || userRoles.length === 0;\n    addRoleMutation.mutate({ roleId: selectedRole, isPrimary });\n  };\n\n  const handleRemoveRole = (roleId: string) => {\n    removeRoleMutation.mutate(roleId);\n  };\n\n  const handleSetPrimary = (roleId: string) => {\n    setPrimaryRoleMutation.mutate(roleId);\n  };\n\n  if (rolesLoading) {\n    return <div className=\"text-sm text-muted-foreground\">Loading roles...</div>;\n  }\n\n  return (\n    <div className=\"space-y-2\">\n      <div className=\"flex items-center gap-2 flex-wrap\">\n        {userRoles?.map((userRole) => (\n          <div key={userRole.id} className=\"flex items-center gap-1\">\n            <Badge \n              variant={userRole.is_primary ? \"default\" : \"secondary\"}\n              className=\"flex items-center gap-1\"\n            >\n              {userRole.role_name}\n              {userRole.is_primary && (\n                <span className=\"text-xs font-normal\">(Primary)</span>\n              )}\n              {isEditing && (\n                <Button\n                  size=\"sm\"\n                  variant=\"ghost\"\n                  onClick={() => handleRemoveRole(userRole.id)}\n                  className=\"h-4 w-4 p-0 ml-1 hover:bg-destructive hover:text-destructive-foreground\"\n                >\n                  <X className=\"h-3 w-3\" />\n                </Button>\n              )}\n            </Badge>\n            {isEditing && !userRole.is_primary && userRoles.length > 1 && (\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={() => handleSetPrimary(userRole.id)}\n                className=\"h-6 px-2 text-xs\"\n              >\n                Set Primary\n              </Button>\n            )}\n          </div>\n        ))}\n        \n        {isEditing && (\n          <Button\n            size=\"sm\"\n            variant=\"outline\"\n            onClick={() => setIsAddingRole(true)}\n            className=\"h-6 w-6 p-0\"\n          >\n            <Plus className=\"h-3 w-3\" />\n          </Button>\n        )}\n      </div>\n\n      <Dialog open={isAddingRole} onOpenChange={setIsAddingRole}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle>Add Role</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <Select value={selectedRole} onValueChange={setSelectedRole}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select a role\" />\n              </SelectTrigger>\n              <SelectContent>\n                {availableRoles?.filter(role => \n                  !userRoles?.some(userRole => userRole.role_id === role.role_id)\n                ).map((role) => (\n                  <SelectItem key={role.role_id} value={role.role_id}>\n                    {role.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            <div className=\"flex justify-end gap-2\">\n              <Button variant=\"outline\" onClick={() => setIsAddingRole(false)}>\n                Cancel\n              </Button>\n              <Button \n                onClick={handleAddRole} \n                disabled={!selectedRole || addRoleMutation.isPending}\n              >\n                Add Role\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default MultipleRolesField;","import React from 'react';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { AlertCircle, Download, X, AlertTriangle } from 'lucide-react';\nimport { ScrollArea } from '@/components/ui/scroll-area';\n\nexport interface ImportError {\n  rowNumber: number;\n  identifier: string; // email, name, or other identifying field\n  field?: string;\n  error: string;\n  rawData?: any;\n  type?: 'error' | 'warning';\n}\n\ninterface ImportErrorReportProps {\n  errors: ImportError[];\n  warnings?: ImportError[];\n  successCount: number;\n  totalCount: number;\n  isOpen: boolean;\n  onClose: () => void;\n  importType: string; // \"users\", \"hardware\", \"software\", etc.\n}\n\nexport const ImportErrorReport: React.FC<ImportErrorReportProps> = ({\n  errors,\n  warnings = [],\n  successCount,\n  totalCount,\n  isOpen,\n  onClose,\n  importType\n}) => {\n  const downloadErrorReport = () => {\n    const headers = ['Row Number', 'Identifier', 'Field', 'Type', 'Message'];\n    const allIssues = [\n      ...errors.map(err => [err.rowNumber, err.identifier, err.field || 'N/A', 'Error', err.error]),\n      ...warnings.map(warn => [warn.rowNumber, warn.identifier, warn.field || 'N/A', 'Warning', warn.error])\n    ];\n    \n    const csvContent = [headers, ...allIssues]\n      .map(row => row.map(field => `\"${field}\"`).join(','))\n      .join('\\n');\n    \n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', `import_report_${new Date().toISOString()}.csv`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const errorRate = totalCount > 0 ? ((errors.length / totalCount) * 100).toFixed(1) : '0';\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh]\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            {errors.length > 0 ? (\n              <AlertCircle className=\"h-5 w-5 text-destructive\" />\n            ) : warnings.length > 0 ? (\n              <AlertTriangle className=\"h-5 w-5 text-yellow-600\" />\n            ) : (\n              <AlertCircle className=\"h-5 w-5 text-destructive\" />\n            )}\n            Import Report: {importType}\n          </DialogTitle>\n          <DialogDescription>\n            Review the import results and download detailed error and warning information\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 overflow-y-auto\">\n          {/* Summary Stats */}\n          <div className=\"grid grid-cols-4 gap-4\">\n            <div className=\"p-4 bg-green-50 border border-green-200 rounded-lg\">\n              <div className=\"text-2xl font-bold text-green-700\">{successCount}</div>\n              <div className=\"text-sm text-green-600\">Successful</div>\n            </div>\n            <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg\">\n              <div className=\"text-2xl font-bold text-red-700\">{errors.length}</div>\n              <div className=\"text-sm text-red-600\">Failed</div>\n            </div>\n            <div className=\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n              <div className=\"text-2xl font-bold text-yellow-700\">{warnings.length}</div>\n              <div className=\"text-sm text-yellow-600\">Warnings</div>\n            </div>\n            <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n              <div className=\"text-2xl font-bold text-blue-700\">{errorRate}%</div>\n              <div className=\"text-sm text-blue-600\">Error Rate</div>\n            </div>\n          </div>\n\n          {/* Action Buttons */}\n          {(errors.length > 0 || warnings.length > 0) && (\n            <div className=\"flex gap-2\">\n              <Button onClick={downloadErrorReport} variant=\"outline\" size=\"icon\">\n                <Download className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          )}\n\n          {/* Error/Warning List */}\n          {(errors.length > 0 || warnings.length > 0) ? (\n            <div className=\"space-y-2\">\n              <h4 className=\"font-semibold text-sm\">\n                Issues ({errors.length + warnings.length})\n              </h4>\n              <ScrollArea className=\"h-[400px] border rounded-lg p-4\">\n                <div className=\"space-y-3\">\n                  {/* Show errors first */}\n                  {errors.map((error, index) => (\n                    <Alert \n                      key={`error-${index}`} \n                      variant=\"destructive\"\n                      className=\"relative\"\n                    >\n                      <AlertCircle className=\"h-4 w-4\" />\n                      <AlertDescription>\n                        <div className=\"space-y-1\">\n                          <div className=\"flex items-center gap-2 flex-wrap\">\n                            <Badge variant=\"destructive\" className=\"text-xs\">\n                              Error\n                            </Badge>\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              Row {error.rowNumber}\n                            </Badge>\n                            <span className=\"font-semibold text-sm\">{error.identifier}</span>\n                            {error.field && (\n                              <Badge variant=\"secondary\" className=\"text-xs\">\n                                Field: {error.field}\n                              </Badge>\n                            )}\n                          </div>\n                          <p className=\"text-sm mt-1 text-destructive\">{error.error}</p>\n                          {error.rawData && (\n                            <details className=\"mt-2\">\n                              <summary className=\"text-xs cursor-pointer hover:underline\">\n                                View raw data\n                              </summary>\n                              <pre className=\"mt-1 text-xs bg-muted p-2 rounded overflow-x-auto\">\n                                {JSON.stringify(error.rawData, null, 2)}\n                              </pre>\n                            </details>\n                          )}\n                        </div>\n                      </AlertDescription>\n                    </Alert>\n                  ))}\n                  \n                  {/* Show warnings second */}\n                  {warnings.map((warning, index) => (\n                    <Alert \n                      key={`warning-${index}`} \n                      variant=\"default\"\n                      className=\"relative bg-yellow-50 border-yellow-200 text-yellow-900\"\n                    >\n                      <AlertTriangle className=\"h-4 w-4\" />\n                      <AlertDescription>\n                        <div className=\"space-y-1\">\n                          <div className=\"flex items-center gap-2 flex-wrap\">\n                            <Badge variant=\"secondary\" className=\"text-xs bg-yellow-200 text-yellow-800\">\n                              Warning\n                            </Badge>\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              Row {warning.rowNumber}\n                            </Badge>\n                            <span className=\"font-semibold text-sm\">{warning.identifier}</span>\n                            {warning.field && (\n                              <Badge variant=\"secondary\" className=\"text-xs\">\n                                Field: {warning.field}\n                              </Badge>\n                            )}\n                          </div>\n                          <p className=\"text-sm mt-1 text-yellow-800\">{warning.error}</p>\n                          {warning.rawData && (\n                            <details className=\"mt-2\">\n                              <summary className=\"text-xs cursor-pointer hover:underline\">\n                                View raw data\n                              </summary>\n                              <pre className=\"mt-1 text-xs bg-muted p-2 rounded overflow-x-auto\">\n                                {JSON.stringify(warning.rawData, null, 2)}\n                              </pre>\n                            </details>\n                          )}\n                        </div>\n                      </AlertDescription>\n                    </Alert>\n                  ))}\n                </div>\n              </ScrollArea>\n            </div>\n          ) : (\n            <Alert className=\"bg-green-50 border-green-200\">\n              <AlertDescription className=\"text-green-800\">\n                All rows imported successfully! No errors or warnings to report.\n              </AlertDescription>\n            </Alert>\n          )}\n\n          {/* Common Error/Warning Patterns (if we detect them) */}\n          {(errors.length > 0 || warnings.length > 0) && (\n            <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n              <h4 className=\"font-semibold text-sm text-yellow-900 mb-2\">\n                Troubleshooting Tips\n              </h4>\n              <div className=\"max-h-32 overflow-y-auto\">\n                <ul className=\"text-sm text-yellow-800 space-y-1 list-disc list-inside pr-2\">\n                  {errors.length > 0 && (\n                    <>\n                      <li>Verify that all required fields are present in your CSV</li>\n                      <li>Check for special characters or formatting issues</li>\n                      <li>Ensure email addresses are valid and not duplicates</li>\n                      <li>Review the error messages for specific guidance</li>\n                    </>\n                  )}\n                  {warnings.length > 0 && (\n                    <>\n                      <li>Users with invalid locations were still created successfully</li>\n                      <li>You can assign locations manually after import using the user management interface</li>\n                      <li>Check the locations table to see available valid location names</li>\n                      <li>Consider updating your import template with correct location names</li>\n                    </>\n                  )}\n                  <li>Download the report to fix issues in bulk</li>\n                </ul>\n              </div>\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex justify-end\">\n          <Button onClick={onClose} variant=\"outline\" size=\"icon\">\n            <X className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\n"],"names":["React","Edit","toast","validateManager","validateManagerUtil","ImportErrorReport","Loader2","error","E","$t","re","X","xt","fe","Icon","AddCertificatesDialog","_a","userProfile","userId","AlertCircle","AlertTriangle"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,67]}